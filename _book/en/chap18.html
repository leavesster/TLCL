
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>18. 查找文件 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="chap19.html" />
    
    
    <link rel="prev" href="chap17.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="chap01.html">
            
                <a href="chap01.html">
            
                    
                    01. 引言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="chap02.html">
            
                <a href="chap02.html">
            
                    
                    02. 什么是 shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="chap03.html">
            
                <a href="chap03.html">
            
                    
                    03. 文件系统中跳转
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="chap04.html">
            
                <a href="chap04.html">
            
                    
                    04. 探究操作系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5" data-path="chap05.html">
            
                <a href="chap05.html">
            
                    
                    05. 操作文件和目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6" data-path="chap06.html">
            
                <a href="chap06.html">
            
                    
                    06. 使用命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7" data-path="chap07.html">
            
                <a href="chap07.html">
            
                    
                    07. 重定向
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8" data-path="chap08.html">
            
                <a href="chap08.html">
            
                    
                    08. 从 shell 眼中看世界
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.9" data-path="chap09.html">
            
                <a href="chap09.html">
            
                    
                    09. 键盘高级操作技巧
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.10" data-path="chap10.html">
            
                <a href="chap10.html">
            
                    
                    10. 权限
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.11" data-path="chap11.html">
            
                <a href="chap11.html">
            
                    
                    11. 进程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.12" data-path="chap12.html">
            
                <a href="chap12.html">
            
                    
                    12. shell 环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.13" data-path="chap13.html">
            
                <a href="chap13.html">
            
                    
                    13. vi 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.14" data-path="chap14.html">
            
                <a href="chap14.html">
            
                    
                    14. 自定制 shell 提示符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.15" data-path="chap15.html">
            
                <a href="chap15.html">
            
                    
                    15. 软件包管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.16" data-path="chap16.html">
            
                <a href="chap16.html">
            
                    
                    16. 存储媒介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.17" data-path="chap17.html">
            
                <a href="chap17.html">
            
                    
                    17. 网络系统
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.1.18" data-path="chap18.html">
            
                <a href="chap18.html">
            
                    
                    18. 查找文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.19" data-path="chap19.html">
            
                <a href="chap19.html">
            
                    
                    19. 归档和备份
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.20" data-path="chap20.html">
            
                <a href="chap20.html">
            
                    
                    20. 正则表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.21" data-path="chap21.html">
            
                <a href="chap21.html">
            
                    
                    21. 文本处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.22" data-path="chap22.html">
            
                <a href="chap22.html">
            
                    
                    22. 格式化输出
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.23" data-path="chap23.html">
            
                <a href="chap23.html">
            
                    
                    23. 打印
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.24" data-path="chap24.html">
            
                <a href="chap24.html">
            
                    
                    24. 编译程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.25" data-path="chap25.html">
            
                <a href="chap25.html">
            
                    
                    25. 编写第一个 Shell 脚本
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.26" data-path="chap26.html">
            
                <a href="chap26.html">
            
                    
                    26. 启动一个项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.27" data-path="chap27.html">
            
                <a href="chap27.html">
            
                    
                    27. 自顶向下设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.28" data-path="chap28.html">
            
                <a href="chap28.html">
            
                    
                    28. 流程控制：if 分支结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.29" data-path="chap29.html">
            
                <a href="chap29.html">
            
                    
                    29. 读取键盘输入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.30" data-path="chap30.html">
            
                <a href="chap30.html">
            
                    
                    30. 流程控制：while/until 循环
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.31" data-path="chap31.html">
            
                <a href="chap31.html">
            
                    
                    31. 疑难排解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.32" data-path="chap32.html">
            
                <a href="chap32.html">
            
                    
                    32. 流程控制：case 分支
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.33" data-path="chap33.html">
            
                <a href="chap33.html">
            
                    
                    33. 位置参数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.34" data-path="chap34.html">
            
                <a href="chap34.html">
            
                    
                    34. 流程控制：for 循环
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.35" data-path="chap35.html">
            
                <a href="chap35.html">
            
                    
                    35. 字符串和数字
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.36" data-path="chap36.html">
            
                <a href="chap36.html">
            
                    
                    36. 数组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.37" data-path="chap37.html">
            
                <a href="chap37.html">
            
                    
                    37. 奇珍异宝
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >18. 查找文件</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p>As we have wandered around our Linux system, one thing has become abundantly clear:
a typical Linux system has a lot of files! This begs the question, &#x201C;how do we find
things?&#x201D; We already know that the Linux file system is well organized according to
conventions that have been passed down from one generation of Unix-like system to the
next, but the sheer number of files can present a daunting problem.
In this chapter, we will look at two tools that are used to find files on a system. These
tools are:</p>
<p>&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x6D4F;&#x89C8;&#x4E86; Linux &#x7CFB;&#x7EDF;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x4EF6;&#x4E8B;&#x5DF2;&#x7ECF;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x6E05;&#x695A;&#xFF1A;&#x4E00;&#x4E2A;&#x5178;&#x578B;&#x7684; Linux &#x7CFB;&#x7EDF;&#x5305;&#x542B;&#x5F88;&#x591A;&#x6587;&#x4EF6;&#xFF01;
&#x8FD9;&#x5C31;&#x5F15;&#x53D1;&#x4E86;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x201C;&#x6211;&#x4EEC;&#x600E;&#x6837;&#x67E5;&#x627E;&#x4E1C;&#x897F;&#xFF1F;&#x201D;&#x3002;&#x867D;&#x7136;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053; Linux &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x826F;&#x597D;&#x7684;&#x7EC4;&#x7EC7;&#x7ED3;&#x6784;&#xFF0C;&#x662F;&#x6E90;&#x81EA;
&#x7C7B; Unix &#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4EE3;&#x4EE3;&#x4F20;&#x627F;&#x7684;&#x4E60;&#x4FD7;&#x3002;&#x4F46;&#x662F;&#x4EC5;&#x6587;&#x4EF6;&#x6570;&#x91CF;&#x5C31;&#x4F1A;&#x5F15;&#x8D77;&#x53EF;&#x6015;&#x7684;&#x95EE;&#x9898;&#x3002;&#x5728;&#x8FD9;&#x4E00;&#x7AE0;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5BDF;&#x770B;
&#x4E24;&#x4E2A;&#x7528;&#x6765;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x67E5;&#x627E;&#x6587;&#x4EF6;&#x7684;&#x5DE5;&#x5177;&#x3002;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x662F;&#xFF1A;</p>
<ul>
<li><p>locate &#x2013; Find files by name</p>
</li>
<li><p>locate &#x2013; &#x901A;&#x8FC7;&#x540D;&#x5B57;&#x6765;&#x67E5;&#x627E;&#x6587;&#x4EF6;</p>
</li>
<li><p>find &#x2013; Search for files in a directory hierarchy</p>
</li>
<li><p>find &#x2013; &#x5728;&#x76EE;&#x5F55;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x4E2D;&#x641C;&#x7D22;&#x6587;&#x4EF6;</p>
</li>
</ul>
<p>We will also look at a command that is often used with file search commands to process
the resulting list of files:</p>
<p>&#x6211;&#x4EEC;&#x4E5F;&#x5C06;&#x770B;&#x4E00;&#x4E2A;&#x7ECF;&#x5E38;&#x4E0E;&#x6587;&#x4EF6;&#x641C;&#x7D22;&#x547D;&#x4EE4;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5B83;&#x7528;&#x6765;&#x5904;&#x7406;&#x641C;&#x7D22;&#x5230;&#x7684;&#x6587;&#x4EF6;&#x5217;&#x8868;&#xFF1A;</p>
<ul>
<li><p>xargs &#x2013; Build and execute command lines from standard input</p>
</li>
<li><p>xargs &#x2013; &#x4ECE;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x751F;&#x6210;&#x548C;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x884C;</p>
</li>
</ul>
<p>In addition, we will introduce a couple of commands to assist us in or exploration:</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4ECB;&#x7ECD;&#x4E24;&#x4E2A;&#x547D;&#x4EE4;&#x6765;&#x534F;&#x52A9;&#x6211;&#x4EEC;&#x63A2;&#x7D22;&#xFF1A;</p>
<ul>
<li><p>touch &#x2013; Change file times</p>
</li>
<li><p>touch &#x2013; &#x66F4;&#x6539;&#x6587;&#x4EF6;&#x65F6;&#x95F4;</p>
</li>
<li><p>stat &#x2013; Display file or file system status</p>
</li>
<li><p>stat &#x2013; &#x663E;&#x793A;&#x6587;&#x4EF6;&#x6216;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x72B6;&#x6001;</p>
</li>
</ul>
<h3 id="locate---&#x67E5;&#x627E;&#x6587;&#x4EF6;&#x7684;&#x7B80;&#x5355;&#x65B9;&#x6CD5;">locate - &#x67E5;&#x627E;&#x6587;&#x4EF6;&#x7684;&#x7B80;&#x5355;&#x65B9;&#x6CD5;</h3>
<p>The locate program performs a rapid database search of pathnames and outputs every
name that matches a given substring. Say, for example, we want to find all the programs
with names that begin with &#x201C;zip.&#x201D; Since we are looking for programs, we can assume
that the directory containing the programs would end with &quot;bin/&quot;. Therefore, we could
try to use locate this way to find our files:</p>
<p>&#x8FD9;&#x4E2A; locate &#x7A0B;&#x5E8F;&#x5FEB;&#x901F;&#x641C;&#x7D22;&#x8DEF;&#x5F84;&#x540D;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E76;&#x4E14;&#x8F93;&#x51FA;&#x6BCF;&#x4E2A;&#x4E0E;&#x7ED9;&#x5B9A;&#x5B57;&#x7B26;&#x4E32;&#x76F8;&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x3002;&#x6BD4;&#x5982;&#x8BF4;&#xFF0C;
&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x627E;&#x5230;&#x6240;&#x6709;&#x540D;&#x5B57;&#x4EE5;&#x201C;zip&#x201D;&#x5F00;&#x5934;&#x7684;&#x7A0B;&#x5E8F;&#x3002;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x6B63;&#x5728;&#x67E5;&#x627E;&#x7A0B;&#x5E8F;&#xFF0C;&#x53EF;&#x4EE5;&#x5047;&#x5B9A;&#x5305;&#x542B;
&#x5339;&#x914D;&#x7A0B;&#x5E8F;&#x7684;&#x76EE;&#x5F55;&#x4EE5;&quot;bin/&quot;&#x7ED3;&#x5C3E;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x8BD5;&#x7740;&#x4EE5;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4F7F;&#x7528; locate &#x547D;&#x4EE4;&#xFF0C;&#x6765;&#x627E;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x6587;&#x4EF6;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ locate bin/zip
</code></pre><p>locate will search its database of pathnames and output any that contain the string &#x201C;bin/zip&#x201D;:</p>
<p>locate &#x547D;&#x4EE4;&#x5C06;&#x4F1A;&#x641C;&#x7D22;&#x5B83;&#x7684;&#x8DEF;&#x5F84;&#x540D;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8F93;&#x51FA;&#x4EFB;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x5B57;&#x7B26;&#x4E32;&#x201C;bin/zip&#x201D;&#x7684;&#x8DEF;&#x5F84;&#x540D;&#xFF1A;</p>
<pre><code>/usr/bin/zip
/usr/bin/zipcloak
/usr/bin/zipgrep
/usr/bin/zipinfo
/usr/bin/zipnote
/usr/bin/zipsplit
</code></pre><p>If the search requirement is not so simple, locate can be combined with other tools
such as grep to design more interesting searches:</p>
<p>&#x5982;&#x679C;&#x641C;&#x7D22;&#x8981;&#x6C42;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;locate &#x53EF;&#x4EE5;&#x7ED3;&#x5408;&#x5176;&#x5B83;&#x5DE5;&#x5177;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4; grep &#x547D;&#x4EE4;&#xFF0C;&#x6765;&#x8BBE;&#x8BA1;&#x66F4;&#x52A0;
&#x6709;&#x8DA3;&#x7684;&#x641C;&#x7D22;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ locate zip | grep bin
/bin/bunzip2
/bin/bzip2
/bin/bzip2recover
/bin/gunzip
/bin/gzip
/usr/bin/funzip
/usr/bin/gpg-zip
/usr/bin/preunzip
/usr/bin/prezip
/usr/bin/prezip-bin
/usr/bin/unzip
/usr/bin/unzipsfx
/usr/bin/zip
/usr/bin/zipcloak
/usr/bin/zipgrep
/usr/bin/zipinfo
/usr/bin/zipnote
/usr/bin/zipsplit
</code></pre><p>The locate program has been around for a number of years, and there are several
different variants in common use. The two most common ones found in modern Linux
distributions are slocate and mlocate, though they are usually accessed by a
symbolic link named locate. The different versions of locate have overlapping
options sets. Some versions include regular expression matching (which we&#x2019;ll cover in
an upcoming chapter) and wild card support. Check the man page for locate to
determine which version of locate is installed.</p>
<p>&#x8FD9;&#x4E2A; locate &#x7A0B;&#x5E8F;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E86;&#x5F88;&#x591A;&#x5E74;&#x4E86;&#xFF0C;&#x5B83;&#x6709;&#x51E0;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x53D8;&#x4F53;&#x88AB;&#x666E;&#x904D;&#x4F7F;&#x7528;&#x7740;&#x3002;&#x5728;&#x73B0;&#x5728; Linux
&#x53D1;&#x884C;&#x7248;&#x4E2D;&#x53D1;&#x73B0;&#x7684;&#x4E24;&#x4E2A;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x53D8;&#x4F53;&#x662F; slocate &#x548C; mlocate&#xFF0C;&#x4F46;&#x662F;&#x901A;&#x5E38;&#x5B83;&#x4EEC;&#x88AB;&#x540D;&#x4E3A; locate &#x7684;
&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x8BBF;&#x95EE;&#x3002;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x7684; locate &#x547D;&#x4EE4;&#x62E5;&#x6709;&#x91CD;&#x590D;&#x7684;&#x9009;&#x9879;&#x96C6;&#x5408;&#x3002;&#x4E00;&#x4E9B;&#x7248;&#x672C;&#x5305;&#x62EC;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;
&#x5339;&#x914D;&#xFF08;&#x6211;&#x4EEC;&#x4F1A;&#x5728;&#x4E0B;&#x4E00;&#x7AE0;&#x4E2D;&#x8BA8;&#x8BBA;&#xFF09;&#x548C;&#x901A;&#x914D;&#x7B26;&#x652F;&#x6301;&#x3002;&#x67E5;&#x770B; locate &#x547D;&#x4EE4;&#x7684;&#x624B;&#x518C;&#xFF0C;&#x4ECE;&#x800C;&#x786E;&#x5B9A;&#x5B89;&#x88C5;&#x4E86;
&#x54EA;&#x4E2A;&#x7248;&#x672C;&#x7684; locate &#x7A0B;&#x5E8F;&#x3002;</p>
<blockquote>
<p>Where Does The locate Database Come From?</p>
<p>locate &#x6570;&#x636E;&#x5E93;&#x6765;&#x81EA;&#x4F55;&#x65B9;&#xFF1F;</p>
<p>You may notice that, on some distributions, locate fails to work just
after the system is installed, but if you try again the next day, it works
fine. What gives?  The locate database is created by another program named
updatedb.  Usually, it is run periodically as a cron job; that is, a task
performed at regular intervals by the cron daemon. Most systems equipped
with locate run updatedb once a day. Since the database is not updated
continuously, you will notice that very recent files do not show up when using
locate. To overcome this, it&#x2019;s possible to run the updatedb program manually
by becoming the superuser and running updatedb at the prompt.</p>
<p>&#x4F60;&#x53EF;&#x80FD;&#x6CE8;&#x610F;&#x5230;&#x4E86;&#xFF0C;&#x5728;&#x4E00;&#x4E9B;&#x53D1;&#x884C;&#x7248;&#x4E2D;&#xFF0C;&#x4EC5;&#x4EC5;&#x5728;&#x7CFB;&#x7EDF;&#x5B89;&#x88C5;&#x4E4B;&#x540E;&#xFF0C;locate &#x4E0D;&#x80FD;&#x5DE5;&#x4F5C;&#xFF0C;
&#x4F46;&#x662F;&#x5982;&#x679C;&#x4F60;&#x7B2C;&#x4E8C;&#x5929;&#x518D;&#x8BD5;&#x4E00;&#x4E0B;&#xFF0C;&#x5B83;&#x5C31;&#x5DE5;&#x4F5C;&#x6B63;&#x5E38;&#x4E86;&#x3002;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#x5462;&#xFF1F;locate &#x6570;&#x636E;&#x5E93;&#x7531;&#x53E6;&#x4E00;&#x4E2A;&#x53EB;&#x505A; updatedb
&#x7684;&#x7A0B;&#x5E8F;&#x521B;&#x5EFA;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A; cron &#x5DE5;&#x4F5C;&#x4F8B;&#x7A0B;&#x5468;&#x671F;&#x6027;&#x8FD0;&#x8F6C;&#xFF1B;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;
&#x5728;&#x7279;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5185;&#x88AB; cron &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x6267;&#x884C;&#x3002;&#x5927;&#x591A;&#x6570;&#x88C5;&#x6709; locate &#x7684;&#x7CFB;&#x7EDF;&#x4F1A;&#x6BCF;&#x9694;&#x4E00;&#x5929;&#x8FD0;&#x884C;&#x4E00;&#x56DE;
updatedb &#x7A0B;&#x5E8F;&#x3002;&#x56E0;&#x4E3A;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x80FD;&#x88AB;&#x6301;&#x7EED;&#x5730;&#x66F4;&#x65B0;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x4F7F;&#x7528; locate &#x65F6;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;
&#x76EE;&#x524D;&#x6700;&#x65B0;&#x7684;&#x6587;&#x4EF6;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x3002;&#x4E3A;&#x4E86;&#x514B;&#x670D;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x8FD0;&#x884C; updatedb &#x7A0B;&#x5E8F;&#xFF0C;
&#x66F4;&#x6539;&#x4E3A;&#x8D85;&#x7EA7;&#x7528;&#x6237;&#x8EAB;&#x4EFD;&#xFF0C;&#x5728;&#x63D0;&#x793A;&#x7B26;&#x4E0B;&#x8FD0;&#x884C; updatedb &#x547D;&#x4EE4;&#x3002;</p>
</blockquote>
<h3 id="find---&#x67E5;&#x627E;&#x6587;&#x4EF6;&#x7684;&#x590D;&#x6742;&#x65B9;&#x5F0F;">find - &#x67E5;&#x627E;&#x6587;&#x4EF6;&#x7684;&#x590D;&#x6742;&#x65B9;&#x5F0F;</h3>
<p>While the locate program can find a file based solely on its name, the find program
searches a given directory (and its subdirectories) for files based on a variety of
attributes. We&#x2019;re going to spend a lot of time with find because it has a lot of
interesting features that we will see again and again when we start to cover programming
concepts in later chapters.</p>
<p>locate &#x7A0B;&#x5E8F;&#x53EA;&#x80FD;&#x4F9D;&#x636E;&#x6587;&#x4EF6;&#x540D;&#x6765;&#x67E5;&#x627E;&#x6587;&#x4EF6;&#xFF0C;&#x800C; find &#x7A0B;&#x5E8F;&#x80FD;&#x57FA;&#x4E8E;&#x5404;&#x79CD;&#x5404;&#x6837;&#x7684;&#x5C5E;&#x6027;&#xFF0C;
&#x641C;&#x7D22;&#x4E00;&#x4E2A;&#x7ED9;&#x5B9A;&#x76EE;&#x5F55;&#xFF08;&#x4EE5;&#x53CA;&#x5B83;&#x7684;&#x5B50;&#x76EE;&#x5F55;&#xFF09;&#xFF0C;&#x6765;&#x67E5;&#x627E;&#x6587;&#x4EF6;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x8981;&#x82B1;&#x8D39;&#x5927;&#x91CF;&#x7684;&#x65F6;&#x95F4;&#x5B66;&#x4E60; find &#x547D;&#x4EE4;&#xFF0C;&#x56E0;&#x4E3A;
&#x5B83;&#x6709;&#x8BB8;&#x591A;&#x6709;&#x8DA3;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x5728;&#x968F;&#x540E;&#x7684;&#x7AE0;&#x8282;&#x91CC;&#x9762;&#x8BA8;&#x8BBA;&#x7F16;&#x7A0B;&#x6982;&#x5FF5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4F1A;&#x91CD;&#x590D;&#x770B;&#x5230;&#x8FD9;&#x4E9B;&#x7279;&#x6027;&#x3002;</p>
<p>In its simplest use, find is given one or more names of directories to search. For
example, to produce a list of our home directory:</p>
<p>find &#x547D;&#x4EE4;&#x7684;&#x6700;&#x7B80;&#x5355;&#x4F7F;&#x7528;&#x662F;&#xFF0C;&#x641C;&#x7D22;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x76EE;&#x5F55;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x8F93;&#x51FA;&#x6211;&#x4EEC;&#x7684;&#x5BB6;&#x76EE;&#x5F55;&#x5217;&#x8868;&#x3002;</p>
<pre><code>[me@linuxbox ~]$ find ~
</code></pre><p>On most active user accounts, this will produce a large list. Since the list is sent to
standard output, we can pipe the list into other programs. Let&#x2019;s use wc to count the
number of files:</p>
<p>&#x5BF9;&#x4E8E;&#x6700;&#x6D3B;&#x8DC3;&#x7684;&#x7528;&#x6237;&#x5E10;&#x53F7;&#xFF0C;&#x8FD9;&#x5C06;&#x4EA7;&#x751F;&#x4E00;&#x5F20;&#x5F88;&#x5927;&#x7684;&#x5217;&#x8868;&#x3002;&#x56E0;&#x4E3A;&#x8FD9;&#x5F20;&#x5217;&#x8868;&#x88AB;&#x53D1;&#x9001;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#xFF0C;
&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A;&#x8FD9;&#x4E2A;&#x5217;&#x8868;&#x7BA1;&#x9053;&#x5230;&#x5176;&#x5B83;&#x7684;&#x7A0B;&#x5E8F;&#x4E2D;&#x3002;&#x8BA9;&#x6211;&#x4EEC;&#x4F7F;&#x7528; wc &#x7A0B;&#x5E8F;&#x6765;&#x8BA1;&#x7B97;&#x51FA;&#x6587;&#x4EF6;&#x7684;&#x6570;&#x91CF;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ find ~ | wc -l
47068
</code></pre><p>Wow, we&#x2019;ve been busy! The beauty of find is that it can be used to identify files that
meet specific criteria. It does this through the (slightly strange) application of options,
tests, and actions. We&#x2019;ll look at the tests first.</p>
<p>&#x54C7;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x76F4;&#x5F88;&#x5FD9;&#xFF01;find &#x547D;&#x4EE4;&#x7684;&#x9B45;&#x529B;&#x6240;&#x5728;&#x5C31;&#x662F;&#x5B83;&#x80FD;&#x591F;&#x88AB;&#x7528;&#x6765;&#x8BC6;&#x522B;&#x7B26;&#x5408;&#x7279;&#x5B9A;&#x6807;&#x51C6;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x5B83;&#x901A;&#x8FC7;
&#xFF08;&#x6709;&#x70B9;&#x5947;&#x602A;&#xFF09;&#x5E94;&#x7528;&#x9009;&#x9879;&#xFF0C;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#xFF0C;&#x548C;&#x64CD;&#x4F5C;&#x6765;&#x5B8C;&#x6210;&#x641C;&#x7D22;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x770B;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x3002;</p>
<h4 id="tests">Tests</h4>
<p>Let&#x2019;s say that we want a list of directories from our search. To do this, we could add the
following test:</p>
<p>&#x6BD4;&#x5982;&#x8BF4;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x76EE;&#x5F55;&#x5217;&#x8868;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ find ~ -type d | wc -l
1695
</code></pre><p>Adding the test -type d limited the search to directories. Conversely, we could have
limited the search to regular files with this test:</p>
<p>&#x6DFB;&#x52A0;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;-type d &#x9650;&#x5236;&#x4E86;&#x53EA;&#x641C;&#x7D22;&#x76EE;&#x5F55;&#x3002;&#x76F8;&#x53CD;&#x5730;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x6765;&#x9650;&#x5B9A;&#x641C;&#x7D22;&#x666E;&#x901A;&#x6587;&#x4EF6;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ find ~ -type f | wc -l
38737
</code></pre><p>Here are the common file type tests supported by find:</p>
<p>&#x8FD9;&#x91CC;&#x662F; find &#x547D;&#x4EE4;&#x652F;&#x6301;&#x7684;&#x666E;&#x901A;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#xFF1A;</p>
<table class="multi">
<caption class="cap">Table 18-1: find File Types</caption>
<tr>
<th class="title">File Type </th>
<th class="title">Description</th>
</tr>
<tr>
<td valign="top" width="25%">b</td>
<td valign="top">Block special device file
</td>
</tr>
<tr>
<td valign="top">c</td>
<td valign="top">Character special device file</td>
</tr>
<tr>
<td valign="top">d</td>
<td valign="top">Directory</td>
</tr>
<tr>
<td valign="top">f</td>
<td valign="top">Regular file</td>
</tr>
<tr>
<td valign="top">l</td>
<td valign="top">Symbolic link</td>
</tr>
</table>

<table class="multi">
<caption class="cap">&#x8868;18-1: find &#x6587;&#x4EF6;&#x7C7B;&#x578B;</caption>
<tr>
<th class="title">&#x6587;&#x4EF6;&#x7C7B;&#x578B;</th>
<th class="title">&#x63CF;&#x8FF0;</th>
</tr>
<tr>
<td valign="top" width="25%">b</td>
<td valign="top">&#x5757;&#x8BBE;&#x5907;&#x6587;&#x4EF6; </td>
</tr>
<tr>
<td valign="top">c</td>
<td valign="top">&#x5B57;&#x7B26;&#x8BBE;&#x5907;&#x6587;&#x4EF6;</td>
</tr>
<tr>
<td valign="top">d</td>
<td valign="top">&#x76EE;&#x5F55;</td>
</tr>
<tr>
<td valign="top">f</td>
<td valign="top">&#x666E;&#x901A;&#x6587;&#x4EF6;</td>
</tr>
<tr>
<td valign="top">l</td>
<td valign="top">&#x7B26;&#x53F7;&#x94FE;&#x63A5;</td>
</tr>
</table>

<p>We can also search by file size and filename by adding some additional tests: Let&#x2019;s look
for all the regular files that match the wild card pattern &#x201C;*.JPG&#x201D; and are larger than one
megabyte:</p>
<p>&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x52A0;&#x5165;&#x4E00;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#xFF0C;&#x6839;&#x636E;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x548C;&#x6587;&#x4EF6;&#x540D;&#x6765;&#x641C;&#x7D22;&#xFF1A;&#x8BA9;&#x6211;&#x4EEC;&#x67E5;&#x627E;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x540D;&#x5339;&#x914D;
&#x901A;&#x914D;&#x7B26;&#x6A21;&#x5F0F;&#x201C;*.JPG&#x201D;&#x548C;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x5927;&#x4E8E;1M &#x7684;&#x6587;&#x4EF6;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ find ~ -type f -name &quot;*.JPG&quot; -size +1M | wc -l
840
</code></pre><p>In this example, we add the -name test followed by the wild card pattern. Notice how
we enclose it in quotes to prevent pathname expansion by the shell. Next, we add the
-size test followed by the string &#x201C;+1M&#x201D;. The leading plus sign indicates that we are
looking for files larger than the specified number. A leading minus sign would change
the meaning of the string to be smaller than the specified number. No sign means,
&#x201C;match the value exactly.&#x201D; The trailing letter &#x201C;M&#x201D; indicates that the unit of measurement
is megabytes. The following characters may be used to specify units:</p>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x91CC;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x52A0;&#x5165;&#x4E86; -name &#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#xFF0C;&#x540E;&#x9762;&#x8DDF;&#x901A;&#x914D;&#x7B26;&#x6A21;&#x5F0F;&#x3002;&#x6CE8;&#x610F;&#xFF0C;&#x6211;&#x4EEC;&#x628A;&#x5B83;&#x7528;&#x53CC;&#x5F15;&#x53F7;&#x5F15;&#x8D77;&#x6765;&#xFF0C;
&#x4ECE;&#x800C;&#x963B;&#x6B62; shell &#x5C55;&#x5F00;&#x8DEF;&#x5F84;&#x540D;&#x3002;&#x7D27;&#x63A5;&#x7740;&#xFF0C;&#x6211;&#x4EEC;&#x52A0;&#x5165; -size &#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#xFF0C;&#x540E;&#x8DDF;&#x5B57;&#x7B26;&#x4E32;&#x201C;+1M&#x201D;&#x3002;&#x5F00;&#x5934;&#x7684;&#x52A0;&#x53F7;&#x8868;&#x660E;
&#x6211;&#x4EEC;&#x6B63;&#x5728;&#x5BFB;&#x627E;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x5927;&#x4E8E;&#x6307;&#x5B9A;&#x6570;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x82E5;&#x5B57;&#x7B26;&#x4E32;&#x4EE5;&#x51CF;&#x53F7;&#x5F00;&#x5934;&#xFF0C;&#x5219;&#x610F;&#x5473;&#x7740;&#x67E5;&#x627E;&#x5C0F;&#x4E8E;&#x6307;&#x5B9A;&#x6570;&#x7684;&#x6587;&#x4EF6;&#x3002;
&#x82E5;&#x6CA1;&#x6709;&#x7B26;&#x53F7;&#x610F;&#x5473;&#x7740;&#x201C;&#x7CBE;&#x786E;&#x5339;&#x914D;&#x8FD9;&#x4E2A;&#x6570;&#x201D;&#x3002;&#x7ED3;&#x5C3E;&#x5B57;&#x6BCD;&#x201C;M&#x201D;&#x8868;&#x660E;&#x6D4B;&#x91CF;&#x5355;&#x4F4D;&#x662F;&#x5146;&#x5B57;&#x8282;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x53EF;&#x4EE5;
&#x88AB;&#x7528;&#x6765;&#x6307;&#x5B9A;&#x6D4B;&#x91CF;&#x5355;&#x4F4D;&#xFF1A;</p>
<table class="multi">
<caption class="cap">Table 18-2: find Size Units</caption>
<tr>
<th class="title">Character</th>
<th class="title">Unit</th>
</tr>
<tr>
<td valign="top" width="25%">b</td>
<td valign="top">512 byte blocks. This is the default if no unit is specified.</td>
</tr>
<tr>
<td valign="top">c</td>
<td valign="top">Bytes</td>
</tr>
<tr>
<td valign="top">w</td>
<td valign="top">Two byte words</td>
</tr>
<tr>
<td valign="top">k</td>
<td valign="top">Kilobytes (Units of 1024 bytes)</td>
</tr>
<tr>
<td valign="top">M</td>
<td valign="top">Megabytes (Units of 1048576 bytes)</td>
</tr>
<tr>
<td valign="top">G</td>
<td valign="top">Gigabytes (Units of 1073741824 bytes)</td>
</tr>
</table>

<table class="multi">
<caption class="cap">&#x8868;18-2: find &#x5927;&#x5C0F;&#x5355;&#x4F4D;</caption>
<tr>
<th class="title">&#x5B57;&#x7B26;</th>
<th class="title">&#x5355;&#x4F4D;</th>
</tr>
<tr>
<td valign="top" width="25%">b</td>
<td valign="top">512 &#x4E2A;&#x5B57;&#x8282;&#x5757;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x5355;&#x4F4D;&#xFF0C;&#x5219;&#x8FD9;&#x662F;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</td>
</tr>
<tr>
<td valign="top">c</td>
<td valign="top">&#x5B57;&#x8282;</td>
</tr>
<tr>
<td valign="top">w</td>
<td valign="top">&#x4E24;&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5B57;</td>
</tr>
<tr>
<td valign="top">k</td>
<td valign="top">&#x5343;&#x5B57;&#x8282;(1024&#x4E2A;&#x5B57;&#x8282;&#x5355;&#x4F4D;)</td>
</tr>
<tr>
<td valign="top">M</td>
<td valign="top">&#x5146;&#x5B57;&#x8282;(1048576&#x4E2A;&#x5B57;&#x8282;&#x5355;&#x4F4D;)</td>
</tr>
<tr>
<td valign="top">G</td>
<td valign="top">&#x5343;&#x5146;&#x5B57;&#x8282;(1073741824&#x4E2A;&#x5B57;&#x8282;&#x5355;&#x4F4D;)</td>
</tr>
</table>

<p>find supports a large number of different tests. Below is a rundown of the common
ones. Note that in cases where a numeric argument is required, the same &#x201C;+&#x201D; and &#x201C;-&#x201D;
notation discussed above can be applied:</p>
<p>find &#x547D;&#x4EE4;&#x652F;&#x6301;&#x5927;&#x91CF;&#x4E0D;&#x540C;&#x7684;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x3002;&#x4E0B;&#x8868;&#x662F;&#x5217;&#x51FA;&#x4E86;&#x4E00;&#x4E9B;&#x5E38;&#x89C1;&#x7684;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x3002;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5728;&#x9700;&#x8981;&#x6570;&#x503C;&#x53C2;&#x6570;&#x7684;
&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x5E94;&#x7528;&#x4EE5;&#x4E0A;&#x8BA8;&#x8BBA;&#x7684;&#x201C;+&#x201D;&#x548C;&quot;-&quot;&#x7B26;&#x53F7;&#x8868;&#x793A;&#x6CD5;&#xFF1A;</p>
<table class="multi">
<caption class="cap">Table 18-3: find Tests</caption>
<tr>
<th class="title">Test</th>
<th class="title">Description</th>
</tr>
<tr>
<td valign="top" width="25%">-cmin n </td>
<td valign="top">Match files or directories whose content or attributes were
last modified exactly n minutes ago. To specify less than n
minutes ago, use -n and to specify more than n minutes
ago, use +n.</td>
</tr>
<tr>
<td valign="top">-cnewer file </td>
<td valign="top">Match files or directories whose contents or attributes were
last modified more recently than those of file.</td>
</tr>
<tr>
<td valign="top">-ctime n </td>
<td valign="top">Match files or directories whose contents or attributes were
last modified n*24 hours ago.</td>
</tr>
<tr>
<td valign="top">-empty </td>
<td valign="top">Match empty files and directories.</td>
</tr>
<tr>
<td valign="top">-group name </td>
<td valign="top">Match file or directories belonging to group. group may
be expressed as either a group name or as a numeric group
ID.</td>
</tr>
<tr>
<td valign="top">-iname pattern </td>
<td valign="top">Like the -name test but case insensitive.</td>
</tr>
<tr>
<td valign="top">-inum n </td>
<td valign="top">Match files with inode number n. This is helpful for
finding all the hard links to a particular inode.</td>
</tr>
<tr>
<td valign="top">-mmin n </td>
<td valign="top">Match files or directories whose contents were modified n
minutes ago.</td>
</tr>
<tr>
<td valign="top">-mtime n </td>
<td valign="top">Match files or directories whose contents were modified
n*24 hours ago.</td>
</tr>
<tr>
<td valign="top">-name pattern </td>
<td valign="top">Match files and directories with the specified wild card pattern.</td>
</tr>
<tr>
<td valign="top">-newer file </td>
<td valign="top">Match files and directories whose contents were modified
more recently than the specified file. This is very useful
when writing shell scripts that perform file backups. Each
time you make a backup, update a file (such as a log), then
use find to determine which files that have changed since
the last update.</td>
</tr>
<tr>
<td valign="top">-nouser </td>
<td valign="top">Match file and directories that do not belong to a valid user.
This can be used to find files belonging to deleted accounts
or to detect activity by attackers.</td>
</tr>
<tr>
<td valign="top">-nogroup </td>
<td valign="top">Match files and directories that do not belong to a valid
group.</td>
</tr>
<tr>
<td valign="top">-perm mode </td>
<td valign="top">Match files or directories that have permissions set to the
specified mode. mode may be expressed by either octal or
symbolic notation.</td>
</tr>
<tr>
<td valign="top">-samefile name </td>
<td valign="top">Similar to the -inum test. Matches files that share the
same inode number as file name.</td>
</tr>
<tr>
<td valign="top">-size n </td>
<td valign="top">Match files of size n.</td>
</tr>
<tr>
<td valign="top">-type c </td>
<td valign="top">Match files of type c.</td>
</tr>
<tr>
<td valign="top">-user name </td>
<td valign="top">Match files or directories belonging to user name. The
user may be expressed by a user name or by a numeric user
ID.</td>
</tr>
</table>

<table class="multi">
<caption class="cap">&#x8868;18-3: find &#x6D4B;&#x8BD5;&#x6761;&#x4EF6;</caption>
<tr>
<th class="title">&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;</th>
<th class="title">&#x63CF;&#x8FF0;</th>
</tr>
<tr>
<td valign="top" width="25%">-cmin n </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x7684;&#x5185;&#x5BB9;&#x6216;&#x5C5E;&#x6027;&#x6700;&#x540E;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x6B63;&#x597D;&#x5728; n &#x5206;&#x949F;&#x4E4B;&#x524D;&#x3002;
&#x6307;&#x5B9A;&#x5C11;&#x4E8E; n &#x5206;&#x949F;&#x4E4B;&#x524D;&#xFF0C;&#x4F7F;&#x7528; -n&#xFF0C;&#x6307;&#x5B9A;&#x591A;&#x4E8E; n &#x5206;&#x949F;&#x4E4B;&#x524D;&#xFF0C;&#x4F7F;&#x7528; +n&#x3002; </td>
</tr>
<tr>
<td valign="top">-cnewer file </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x7684;&#x5185;&#x5BB9;&#x6216;&#x5C5E;&#x6027;&#x6700;&#x540E;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x65E9;&#x4E8E;&#x90A3;&#x4E9B;&#x6587;&#x4EF6;&#x3002; </td>
</tr>
<tr>
<td valign="top">-ctime n </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x7684;&#x5185;&#x5BB9;&#x548C;&#x5C5E;&#x6027;&#x6700;&#x540E;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x5728; n*24&#x5C0F;&#x65F6;&#x4E4B;&#x524D;&#x3002;</td>
</tr>
<tr>
<td valign="top">-empty </td>
<td valign="top">&#x5339;&#x914D;&#x7A7A;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x3002;</td>
</tr>
<tr>
<td valign="top">-group name </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x5C5E;&#x4E8E;&#x4E00;&#x4E2A;&#x7EC4;&#x3002;&#x7EC4;&#x53EF;&#x4EE5;&#x7528;&#x7EC4;&#x540D;&#x6216;&#x7EC4; ID &#x6765;&#x8868;&#x793A;&#x3002;</td>
</tr>
<tr>
<td valign="top">-iname pattern </td>
<td valign="top">&#x5C31;&#x50CF;-name &#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x3002;</td>
</tr>
<tr>
<td valign="top">-inum n </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x7684; inode &#x53F7;&#x662F; n&#x3002;&#x8FD9;&#x5BF9;&#x4E8E;&#x627E;&#x5230;&#x67D0;&#x4E2A;&#x7279;&#x6B8A; inode &#x7684;&#x6240;&#x6709;&#x786C;&#x94FE;&#x63A5;&#x5F88;&#x6709;&#x5E2E;&#x52A9;&#x3002; </td>
</tr>
<tr>
<td valign="top">-mmin n </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x5185;&#x5BB9;&#x88AB;&#x4FEE;&#x6539;&#x4E8E; n &#x5206;&#x949F;&#x4E4B;&#x524D;&#x3002;</td>
</tr>
<tr>
<td valign="top">-mtime n </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x5185;&#x5BB9;&#x88AB;&#x4FEE;&#x6539;&#x4E8E; n*24&#x5C0F;&#x65F6;&#x4E4B;&#x524D;&#x3002; </td>
</tr>
<tr>
<td valign="top">-name pattern </td>
<td valign="top">&#x7528;&#x6307;&#x5B9A;&#x7684;&#x901A;&#x914D;&#x7B26;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x3002;</td>
</tr>
<tr>
<td valign="top">-newer file </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x7684;&#x5185;&#x5BB9;&#x65E9;&#x4E8E;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x5F53;&#x7F16;&#x5199; shell &#x811A;&#x672C;&#xFF0C;&#x505A;&#x6587;&#x4EF6;&#x5907;&#x4EFD;&#x65F6;&#xFF0C;&#x975E;&#x5E38;&#x6709;&#x5E2E;&#x52A9;&#x3002;
&#x6BCF;&#x6B21;&#x4F60;&#x5236;&#x4F5C;&#x4E00;&#x4E2A;&#x5907;&#x4EFD;&#xFF0C;&#x66F4;&#x65B0;&#x6587;&#x4EF6;&#xFF08;&#x6BD4;&#x5982;&#x8BF4;&#x65E5;&#x5FD7;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528; find &#x547D;&#x4EE4;&#x6765;&#x51B3;&#x5B9A;&#x81EA;&#x4ECE;&#x4E0A;&#x6B21;&#x66F4;&#x65B0;&#xFF0C;&#x54EA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5DF2;&#x7ECF;&#x66F4;&#x6539;&#x4E86;&#x3002; </td>
</tr>
<tr>
<td valign="top">-nouser </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x4E0D;&#x5C5E;&#x4E8E;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x7528;&#x6237;&#x3002;&#x8FD9;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x67E5;&#x627E;
&#x5C5E;&#x4E8E;&#x5220;&#x9664;&#x5E10;&#x6237;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x76D1;&#x6D4B;&#x653B;&#x51FB;&#x884C;&#x4E3A;&#x3002; </td>
</tr>
<tr>
<td valign="top">-nogroup </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x4E0D;&#x5C5E;&#x4E8E;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x7684;&#x7EC4;&#x3002; </td>
</tr>
<tr>
<td valign="top">-perm mode </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x7684;&#x6743;&#x9650;&#x5DF2;&#x7ECF;&#x8BBE;&#x7F6E;&#x4E3A;&#x6307;&#x5B9A;&#x7684; mode&#x3002;mode &#x53EF;&#x4EE5;&#x7528;
&#x516B;&#x8FDB;&#x5236;&#x6216;&#x7B26;&#x53F7;&#x8868;&#x793A;&#x6CD5;&#x3002;</td>
</tr>
<tr>
<td valign="top">-samefile name </td>
<td valign="top">&#x76F8;&#x4F3C;&#x4E8E;-inum &#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x3002;&#x5339;&#x914D;&#x548C;&#x6587;&#x4EF6; name &#x4EAB;&#x6709;&#x540C;&#x6837; inode &#x53F7;&#x7684;&#x6587;&#x4EF6;&#x3002; </td>
</tr>
<tr>
<td valign="top">-size n </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x4E3A; n&#x3002;</td>
</tr>
<tr>
<td valign="top">-type c </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#x662F; c&#x3002;</td>
</tr>
<tr>
<td valign="top">-user name </td>
<td valign="top">&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x5C5E;&#x4E8E;&#x67D0;&#x4E2A;&#x7528;&#x6237;&#x3002;&#x8FD9;&#x4E2A;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7528;&#x6237;&#x540D;&#x6216;&#x7528;&#x6237; ID &#x6765;&#x8868;&#x793A;&#x3002; </td>
</tr>
</table>

<p>This is not a complete list. The find man page has all the details.</p>
<p>&#x8FD9;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x5217;&#x8868;&#x3002;find &#x547D;&#x4EE4;&#x624B;&#x518C;&#x6709;&#x66F4;&#x8BE6;&#x7EC6;&#x7684;&#x8BF4;&#x660E;&#x3002;</p>
<h4 id="&#x64CD;&#x4F5C;&#x7B26;">&#x64CD;&#x4F5C;&#x7B26;</h4>
<p>Even with all the tests that find provides, we may still need a better way to describe the
logical relationships between the tests. For example, what if we needed to determine if
all the files and subdirectories in a directory had secure permissions? We would look for
all the files with permissions that are not 0600 and the directories with permissions that
are not 0700. Fortunately, find provides a way to combine tests using logical operators
to create more complex logical relationships. To express the aforementioned test, we
could do this:</p>
<p>&#x5373;&#x4F7F;&#x62E5;&#x6709;&#x4E86; find &#x547D;&#x4EE4;&#x63D0;&#x4F9B;&#x7684;&#x6240;&#x6709;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x66F4;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x63CF;&#x8FF0;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x4E4B;&#x95F4;&#x7684;&#x903B;&#x8F91;&#x5173;&#x7CFB;&#x3002;&#x4F8B;&#x5982;&#xFF0C;
&#x5982;&#x679C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x786E;&#x5B9A;&#x662F;&#x5426;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x5B50;&#x76EE;&#x5F55;&#x62E5;&#x6709;&#x5B89;&#x5168;&#x6743;&#x9650;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#x5462;&#xFF1F;
&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x67E5;&#x627E;&#x6743;&#x9650;&#x4E0D;&#x662F;0600&#x7684;&#x6587;&#x4EF6;&#x548C;&#x6743;&#x9650;&#x4E0D;&#x662F;0700&#x7684;&#x76EE;&#x5F55;&#x3002;&#x5E78;&#x8FD0;&#x5730;&#x662F;&#xFF0C;find &#x547D;&#x4EE4;&#x63D0;&#x4F9B;&#x4E86;
&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x6765;&#x7ED3;&#x5408;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x903B;&#x8F91;&#x64CD;&#x4F5C;&#x7B26;&#x6765;&#x521B;&#x5EFA;&#x66F4;&#x590D;&#x6742;&#x7684;&#x903B;&#x8F91;&#x5173;&#x7CFB;&#x3002;
&#x4E3A;&#x4E86;&#x8868;&#x8FBE;&#x4E0A;&#x8FF0;&#x7684;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x505A;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ find ~ \( -type f -not -perm 0600 \) -or \( -type d -not -perm 0700 \)
</code></pre><p>Yikes! That sure looks weird. What is all this stuff? Actually, the operators are not that
complicated once you get to know them. Here is the list:</p>
<p>&#x5440;&#xFF01;&#x8FD9;&#x7684;&#x786E;&#x770B;&#x8D77;&#x6765;&#x5F88;&#x5947;&#x602A;&#x3002;&#x8FD9;&#x4E9B;&#x662F;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#xFF1F;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x7B26;&#x6CA1;&#x6709;&#x90A3;&#x4E48;&#x590D;&#x6742;&#xFF0C;&#x4E00;&#x65E6;&#x4F60;&#x77E5;&#x9053;&#x4E86;&#x5B83;&#x4EEC;&#x7684;&#x539F;&#x7406;&#x3002;
&#x8FD9;&#x91CC;&#x662F;&#x64CD;&#x4F5C;&#x7B26;&#x5217;&#x8868;&#xFF1A;</p>
<table class="multi">
<caption class="cap">Table 18-4: find Logical Operators</caption>
<tr>
<th class="title">Operator</th>
<th class="title">Description</th>
</tr>
<tr>
<td valign="top" width="25%">-and</td>
<td>Match if the tests on both sides of the operator are true. May be shortened to -a. Note that when no operator is present, -and is implied by default.</td>
</tr>
<tr>
<td valign="top">-or</td>
<td>Match if a test on either side of the operator is true. May be shortened to -o.</td>
</tr>
<tr>
<td valign="top">-not</td>
<td>Match if the test following the operator is false. May be abbreviated with an exclamation point (!).</td>
</tr>
<tr>
<td valign="top">()</td>
<td>Groups tests and operators together to form larger expressions. This is used to control the precedence of the
logical evaluations. By default, find evaluates from left to right. It is often necessary to override the default evaluation order to obtain the desired result. Even if not needed, it is helpful sometimes to include the grouping characters to improve readability of the command. Note that since the parentheses characters have special meaning to the shell, they must be quoted when using them on the command line to allow them to be passed as arguments to find. Usually the backslash character is used to escape them.</td>
</tr>
</table>

<table class="multi">
<caption class="cap">&#x8868;18-4: find &#x547D;&#x4EE4;&#x7684;&#x903B;&#x8F91;&#x64CD;&#x4F5C;&#x7B26;</caption>
<tr>
<th class="title">&#x64CD;&#x4F5C;&#x7B26;</th>
<th class="title">&#x63CF;&#x8FF0;</th>
</tr>
<tr>
<td valign="top" width="25%">-and</td>
<td valign="top">&#x5982;&#x679C;&#x64CD;&#x4F5C;&#x7B26;&#x4E24;&#x8FB9;&#x7684;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x90FD;&#x662F;&#x771F;&#xFF0C;&#x5219;&#x5339;&#x914D;&#x3002;&#x53EF;&#x4EE5;&#x7B80;&#x5199;&#x4E3A; -a&#x3002;
&#x6CE8;&#x610F;&#x82E5;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x64CD;&#x4F5C;&#x7B26;&#xFF0C;&#x5219;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528; -and&#x3002;</td>
</tr>
<tr>
<td valign="top">-or</td>
<td valign="top">&#x82E5;&#x64CD;&#x4F5C;&#x7B26;&#x4E24;&#x8FB9;&#x7684;&#x4EFB;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x4E3A;&#x771F;&#xFF0C;&#x5219;&#x5339;&#x914D;&#x3002;&#x53EF;&#x4EE5;&#x7B80;&#x5199;&#x4E3A; -o&#x3002;</td>
</tr>
<tr>
<td valign="top">-not</td>
<td valign="top">&#x82E5;&#x64CD;&#x4F5C;&#x7B26;&#x540E;&#x9762;&#x7684;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x662F;&#x771F;&#xFF0C;&#x5219;&#x5339;&#x914D;&#x3002;&#x53EF;&#x4EE5;&#x7B80;&#x5199;&#x4E3A;&#x4E00;&#x4E2A;&#x611F;&#x53F9;&#x53F7;&#xFF08;!&#xFF09;&#x3002;</td>
</tr>
<tr>
<td valign="top">()</td>
<td valign="top"> &#x628A;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x548C;&#x64CD;&#x4F5C;&#x7B26;&#x7EC4;&#x5408;&#x8D77;&#x6765;&#x5F62;&#x6210;&#x66F4;&#x5927;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x3002;&#x8FD9;&#x7528;&#x6765;&#x63A7;&#x5236;&#x903B;&#x8F91;&#x8BA1;&#x7B97;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x3002;
&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;find &#x547D;&#x4EE4;&#x6309;&#x7167;&#x4ECE;&#x5DE6;&#x5230;&#x53F3;&#x7684;&#x987A;&#x5E8F;&#x8BA1;&#x7B97;&#x3002;&#x7ECF;&#x5E38;&#x6709;&#x5FC5;&#x8981;&#x91CD;&#x5199;&#x9ED8;&#x8BA4;&#x7684;&#x6C42;&#x503C;&#x987A;&#x5E8F;&#xFF0C;&#x4EE5;&#x5F97;&#x5230;&#x671F;&#x671B;&#x7684;&#x7ED3;&#x679C;&#x3002;
&#x5373;&#x4F7F;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x5305;&#x62EC;&#x7EC4;&#x5408;&#x8D77;&#x6765;&#x7684;&#x5B57;&#x7B26;&#xFF0C;&#x5BF9;&#x63D0;&#x9AD8;&#x547D;&#x4EE4;&#x7684;&#x53EF;&#x8BFB;&#x6027;&#x662F;&#x5F88;&#x6709;&#x5E2E;&#x52A9;&#x7684;&#x3002;&#x6CE8;&#x610F;
&#x56E0;&#x4E3A;&#x5706;&#x62EC;&#x53F7;&#x5B57;&#x7B26;&#x5BF9;&#x4E8E; shell &#x6765;&#x8BF4;&#x6709;&#x7279;&#x6B8A;&#x542B;&#x4E49;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4EEC;&#x5FC5;&#x987B;
&#x7528;&#x5F15;&#x53F7;&#x5F15;&#x8D77;&#x6765;&#xFF0C;&#x624D;&#x80FD;&#x4F5C;&#x4E3A;&#x5B9E;&#x53C2;&#x4F20;&#x9012;&#x7ED9; find &#x547D;&#x4EE4;&#x3002;&#x901A;&#x5E38;&#x53CD;&#x659C;&#x6760;&#x5B57;&#x7B26;&#x88AB;&#x7528;&#x6765;&#x8F6C;&#x4E49;&#x5706;&#x62EC;&#x53F7;&#x5B57;&#x7B26;&#x3002;</td>
</tr>
</table>

<p>With this list of operators in hand, let&#x2019;s deconstruct our find command. When viewed
from the uppermost level, we see that our tests are arranged as two groupings separated
by an -or operator:</p>
<p>&#x901A;&#x8FC7;&#x8FD9;&#x5F20;&#x64CD;&#x4F5C;&#x7B26;&#x5217;&#x8868;&#xFF0C;&#x6211;&#x4EEC;&#x91CD;&#x5EFA; find &#x547D;&#x4EE4;&#x3002;&#x4ECE;&#x6700;&#x5916;&#x5C42;&#x770B;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x88AB;&#x5206;&#x4E3A;&#x4E24;&#x7EC4;&#xFF0C;&#x7531;&#x4E00;&#x4E2A;
-or &#x64CD;&#x4F5C;&#x7B26;&#x5206;&#x5F00;&#xFF1A;</p>
<pre><code>( expression 1 ) -or ( expression 2 )
</code></pre><p>This makes sense, since we are searching for files with a certain set of permissions and
for directories with a different set. If we are looking for both files and directories, why
do we use -or instead of -and? Because as find scans through the files and
directories, each one is evaluated to see if it matches the specified tests. We want to
know if it is either a file with bad permissions or a directory with bad permissions. It
can&#x2019;t be both at the same time. So if we expand the grouped expressions, we can see it
this way:</p>
<p>&#x8FD9;&#x770B;&#x8D77;&#x6765;&#x5408;&#x7406;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x6B63;&#x5728;&#x641C;&#x7D22;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x6743;&#x9650;&#x96C6;&#x5408;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x4E24;&#x8005;&#x90FD;&#x67E5;&#x627E;&#xFF0C;
&#x90A3;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528; -or &#x6765;&#x4EE3;&#x66FF; -and &#x5462;&#xFF1F;&#x56E0;&#x4E3A; find &#x547D;&#x4EE4;&#x626B;&#x63CF;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x65F6;&#xFF0C;&#x4F1A;&#x8BA1;&#x7B97;&#x6BCF;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x770B;&#x770B;&#x5B83;&#x662F;&#x5426;
&#x5339;&#x914D;&#x6307;&#x5B9A;&#x7684;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x3002;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x77E5;&#x9053;&#x5B83;&#x662F;&#x5177;&#x6709;&#x9519;&#x8BEF;&#x6743;&#x9650;&#x7684;&#x6587;&#x4EF6;&#x8FD8;&#x662F;&#x6709;&#x9519;&#x8BEF;&#x6743;&#x9650;&#x7684;&#x76EE;&#x5F55;&#x3002;&#x5B83;&#x4E0D;&#x53EF;&#x80FD;&#x540C;&#x65F6;&#x7B26;&#x5408;&#x8FD9;
&#x4E24;&#x4E2A;&#x6761;&#x4EF6;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x5C55;&#x5F00;&#x7EC4;&#x5408;&#x8D77;&#x6765;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x8FD9;&#x6837;&#x89E3;&#x91CA;&#x5B83;&#xFF1A;</p>
<pre><code>( file with bad perms ) -or ( directory with bad perms )
</code></pre><p>Our next challenge is how to test for &#x201C;bad permissions.&#x201D; How do we do that? Actually
we don&#x2019;t. What we will test for is &#x201C;not good permissions,&#x201D; since we know what &#x201C;good
permissions&#x201D; are. In the case of files, we define good as 0600 and for directories, as</p>
<ol>
<li>The expression that will test files for &#x201C;not good&#x201D; permissions is:</li>
</ol>
<p>&#x4E0B;&#x4E00;&#x4E2A;&#x6311;&#x6218;&#x662F;&#x600E;&#x6837;&#x6765;&#x68C0;&#x67E5;&#x201C;&#x9519;&#x8BEF;&#x6743;&#x9650;&#x201D;&#xFF0C;&#x8FD9;&#x4E2A;&#x600E;&#x6837;&#x505A;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x4E0D;&#x4ECE;&#x8FD9;&#x4E2A;&#x89D2;&#x5EA6;&#x505A;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x6D4B;&#x8BD5;
&#x201C;&#x4E0D;&#x662F;&#x6B63;&#x786E;&#x6743;&#x9650;&#x201D;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x4EC0;&#x4E48;&#x662F;&#x201C;&#x6B63;&#x786E;&#x6743;&#x9650;&#x201D;&#x3002;&#x5BF9;&#x4E8E;&#x6587;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x6B63;&#x786E;&#x6743;&#x9650;&#x4E3A;0600&#xFF0C;
&#x76EE;&#x5F55;&#x5219;&#x4E3A;0711&#x3002;&#x6D4B;&#x8BD5;&#x5177;&#x6709;&#x201C;&#x4E0D;&#x6B63;&#x786E;&#x201D;&#x6743;&#x9650;&#x7684;&#x6587;&#x4EF6;&#x8868;&#x8FBE;&#x5F0F;&#x4E3A;&#xFF1A;</p>
<pre><code>-type f -and -not -perms 0600
</code></pre><p>and for directories:</p>
<p>&#x5BF9;&#x4E8E;&#x76EE;&#x5F55;&#xFF0C;&#x8868;&#x8FBE;&#x5F0F;&#x4E3A;&#xFF1A;</p>
<pre><code>-type d -and -not -perms 0700
</code></pre><p>As noted in the table of operators above, the -and operator can be safely removed, since
it is implied by default. So if we put this all back together, we get our final command:</p>
<p>&#x6B63;&#x5982;&#x4E0A;&#x8FF0;&#x64CD;&#x4F5C;&#x7B26;&#x5217;&#x8868;&#x4E2D;&#x63D0;&#x5230;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;-and &#x64CD;&#x4F5C;&#x7B26;&#x80FD;&#x591F;&#x88AB;&#x5B89;&#x5168;&#x5730;&#x5220;&#x9664;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7684;&#x64CD;&#x4F5C;&#x7B26;&#x3002;
&#x6240;&#x4EE5;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x628A;&#x8FD9;&#x4E24;&#x4E2A;&#x8868;&#x8FBE;&#x5F0F;&#x8FDE;&#x8D77;&#x6765;&#xFF0C;&#x5C31;&#x5F97;&#x5230;&#x6700;&#x7EC8;&#x7684;&#x547D;&#x4EE4;&#xFF1A;</p>
<pre><code>find ~ ( -type f -not -perms 0600 ) -or ( -type d -not -perms 0700 )
</code></pre><p>However, since the parentheses have special meaning to the shell, we must escape them
to prevent the shell from trying to interpret them. Preceding each one with a backslash
character does the trick.</p>
<p>&#x7136;&#x800C;&#xFF0C;&#x56E0;&#x4E3A;&#x5706;&#x62EC;&#x53F7;&#x5BF9;&#x4E8E; shell &#x6709;&#x7279;&#x6B8A;&#x542B;&#x4E49;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x8F6C;&#x4E49;&#x5B83;&#x4EEC;&#xFF0C;&#x6765;&#x963B;&#x6B62; shell &#x89E3;&#x91CA;&#x5B83;&#x4EEC;&#x3002;&#x5728;&#x5706;&#x62EC;&#x53F7;&#x5B57;&#x7B26;
&#x4E4B;&#x524D;&#x52A0;&#x4E0A;&#x4E00;&#x4E2A;&#x53CD;&#x659C;&#x6760;&#x5B57;&#x7B26;&#x6765;&#x8F6C;&#x4E49;&#x5B83;&#x4EEC;&#x3002;</p>
<p>There is another feature of logical operators that is important to understand. Let&#x2019;s say
that we have two expressions separated by a logical operator:</p>
<p>&#x903B;&#x8F91;&#x64CD;&#x4F5C;&#x7B26;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#x8981;&#x91CD;&#x70B9;&#x7406;&#x89E3;&#x3002;&#x6BD4;&#x65B9;&#x8BF4;&#x6211;&#x4EEC;&#x6709;&#x4E24;&#x4E2A;&#x7531;&#x903B;&#x8F91;&#x64CD;&#x4F5C;&#x7B26;&#x5206;&#x5F00;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#xFF1A;</p>
<pre><code>expr1 -operator expr2
</code></pre><p>In all cases, expr1 will always be performed; however the operator will determine if
expr2 is performed. Here&#x2019;s how it works:</p>
<p>&#x5728;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x603B;&#x4F1A;&#x6267;&#x884C;&#x8868;&#x8FBE;&#x5F0F; expr1&#xFF1B;&#x7136;&#x800C;&#x7531;&#x64CD;&#x4F5C;&#x7B26;&#x6765;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x6267;&#x884C;&#x8868;&#x8FBE;&#x5F0F; expr2&#x3002;&#x8FD9;&#x91CC;
&#x5217;&#x51FA;&#x4E86;&#x5B83;&#x662F;&#x600E;&#x6837;&#x5DE5;&#x4F5C;&#x7684;&#xFF1A;</p>
<table class="multi">
<caption class="cap">Table 18-5: find AND/OR Logic</caption>
<tr>
<th class="title" width="%30">Results of expr1</th>
<th class="title" width="%30">Operator</th>
<th class="title">expr2 is...</th>
</tr>
<tr>
<td valign="top">True</td>
<td valign="top">-and</td>
<td valign="top">Always performed</td>
</tr>
<tr>
<td valign="top">False</td>
<td valign="top">-and</td>
<td valign="top">Never performed</td>
</tr>
<tr>
<td valign="top">Ture</td>
<td valign="top">-or</td>
<td valign="top">Never performed</td>
</tr>
<tr>
<td valign="top">False</td>
<td valign="top">-or</td>
<td valign="top">Always performed</td>
</tr>
</table>

<table class="multi">
<caption class="cap">&#x8868;18-5: find AND/OR &#x903B;&#x8F91;</caption>
<tr>
<th class="title" width="%30">expr1 &#x7684;&#x7ED3;&#x679C;</th>
<th class="title" width="%30">&#x64CD;&#x4F5C;&#x7B26;</th>
<th class="title">expr2 is...</th>
</tr>
<tr>
<td valign="top">&#x771F;</td>
<td valign="top">-and</td>
<td valign="top">&#x603B;&#x8981;&#x6267;&#x884C;</td>
</tr>
<tr>
<td valign="top">&#x5047;</td>
<td valign="top">-and</td>
<td valign="top">&#x4ECE;&#x4E0D;&#x6267;&#x884C;</td>
</tr>
<tr>
<td valign="top">&#x771F;</td>
<td valign="top">-or</td>
<td valign="top">&#x4ECE;&#x4E0D;&#x6267;&#x884C;</td>
</tr>
<tr>
<td valign="top">&#x5047;</td>
<td valign="top">-or</td>
<td valign="top">&#x603B;&#x8981;&#x6267;&#x884C;</td>
</tr>
</table>

<p>Why does this happen? It&#x2019;s done to improve performance. Take -and, for example. We
know that the expression expr1 -and expr2 cannot be true if the result of expr1
is false, so there is no point in performing expr2. Likewise, if we have the expression
expr1 -or expr2 and the result of expr1 is true, there is no point in performing
expr2, as we already know that the expression expr1 -or expr2 is true.
OK, so it helps it go faster. Why is this important? It&#x2019;s important because we can rely on
this behavior to control how actions are performed, as we shall soon see..</p>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4F1A;&#x53D1;&#x751F;&#x5462;&#xFF1F;&#x8FD9;&#x6837;&#x505A;&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x3002;&#x4EE5; -and &#x4E3A;&#x4F8B;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x8868;&#x8FBE;&#x5F0F; expr1 -and expr2
&#x4E0D;&#x80FD;&#x4E3A;&#x771F;&#xFF0C;&#x5982;&#x679C;&#x8868;&#x8FBE;&#x5F0F; expr1&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#x5047;&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x6267;&#x884C; expr2&#x3002;&#x540C;&#x6837;&#x5730;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6709;&#x8868;&#x8FBE;&#x5F0F;
expr1 -or expr2&#xFF0C;&#x5E76;&#x4E14;&#x8868;&#x8FBE;&#x5F0F; expr1&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#x771F;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x6267;&#x884C; expr2&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;
&#x8868;&#x8FBE;&#x5F0F; expr1 -or expr2 &#x4E3A;&#x771F;&#x3002;&#x597D;&#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x6267;&#x884C;&#x5FEB;&#x4E00;&#x4E9B;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4E2A;&#x5F88;&#x91CD;&#x8981;&#xFF1F;
&#x5B83;&#x5F88;&#x91CD;&#x8981;&#x662F;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x80FD;&#x4F9D;&#x9760;&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x6765;&#x63A7;&#x5236;&#x600E;&#x6837;&#x6765;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x6211;&#x4EEC;&#x4F1A;&#x5F88;&#x5FEB;&#x770B;&#x5230;...</p>
<h3 id="&#x9884;&#x5B9A;&#x4E49;&#x7684;&#x64CD;&#x4F5C;">&#x9884;&#x5B9A;&#x4E49;&#x7684;&#x64CD;&#x4F5C;</h3>
<p>Let&#x2019;s get some work done! Having a list of results from our find command is useful,
but what we really want to do is act on the items on the list. Fortunately, find allows
actions to be performed based on the search results. There are a set of predefined actions
and several ways to apply user-defined actions. First let&#x2019;s look at a few of the predefined
actions:</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x505A;&#x4E00;&#x4E9B;&#x5DE5;&#x4F5C;&#x5427;&#xFF01;&#x4ECE; find &#x547D;&#x4EE4;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x5217;&#x8868;&#x5F88;&#x6709;&#x7528;&#x5904;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x771F;&#x6B63;&#x60F3;&#x8981;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x662F;&#x64CD;&#x4F5C;&#x5217;&#x8868;
&#x4E2D;&#x7684;&#x67D0;&#x4E9B;&#x6761;&#x76EE;&#x3002;&#x5E78;&#x8FD0;&#x5730;&#x662F;&#xFF0C;find &#x547D;&#x4EE4;&#x5141;&#x8BB8;&#x57FA;&#x4E8E;&#x641C;&#x7D22;&#x7ED3;&#x679C;&#x6765;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x6709;&#x8BB8;&#x591A;&#x9884;&#x5B9A;&#x4E49;&#x7684;&#x64CD;&#x4F5C;&#x548C;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;&#x6765;
&#x5E94;&#x7528;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;&#x51E0;&#x4E2A;&#x9884;&#x5B9A;&#x4E49;&#x7684;&#x64CD;&#x4F5C;&#xFF1A;</p>
<table class="multi">
<caption class="cap">Table 18-6: Predefined find Actions</caption>
<tr>
<th class="title">Action </th>
<th class="title">Description</th>
</tr>
<tr>
<td valign="top" width="25%">-delete</td>
<td valign="top">Delete the currently matching file.</td>
</tr>
<tr>
<td valign="top">-ls</td>
<td valign="top">Perform the equivalent of ls -dils on the matching file.
Output is sent to standard output.
</td>
</tr>
<tr>
<td valign="top">-print</td>
<td valign="top">Output the full pathname of the matching file to standard
output. This is the default action if no other action is specified.</td>
</tr>
<tr>
<td valign="top">-quit</td>
<td valign="top"> Quit once a match has been made.  </td>
</tr>
</table>

<table class="multi">
<caption class="cap">&#x8868;18-6: &#x51E0;&#x4E2A;&#x9884;&#x5B9A;&#x4E49;&#x7684; find &#x547D;&#x4EE4;&#x64CD;&#x4F5C;</caption>
<tr>
<th class="title">&#x64CD;&#x4F5C;</th>
<th class="title">&#x63CF;&#x8FF0;</th>
</tr>
<tr>
<td valign="top" width="25%">-delete</td>
<td valign="top">&#x5220;&#x9664;&#x5F53;&#x524D;&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x3002;</td>
</tr>
<tr>
<td valign="top">-ls</td>
<td valign="top">&#x5BF9;&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x6267;&#x884C;&#x7B49;&#x540C;&#x7684; ls -dils &#x547D;&#x4EE4;&#x3002;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x53D1;&#x9001;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x3002;
</td>
</tr>
<tr>
<td valign="top">-print</td>
<td valign="top">&#x628A;&#x5339;&#x914D;&#x6587;&#x4EF6;&#x7684;&#x5168;&#x8DEF;&#x5F84;&#x540D;&#x8F93;&#x9001;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x5176;&#x5B83;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x662F;
&#x9ED8;&#x8BA4;&#x64CD;&#x4F5C;&#x3002;</td>
</tr>
<tr>
<td valign="top">-quit</td>
<td valign="top">&#x4E00;&#x65E6;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#xFF0C;&#x9000;&#x51FA;&#x3002;</td>
</tr>
</table>

<p>As with the tests, there are many more actions. See the find man page for full details.
In our very first example, we did this:</p>
<p>&#x548C;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x4E00;&#x6837;&#xFF0C;&#x8FD8;&#x6709;&#x66F4;&#x591A;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x67E5;&#x770B; find &#x547D;&#x4EE4;&#x624B;&#x518C;&#x5F97;&#x5230;&#x66F4;&#x591A;&#x7EC6;&#x8282;&#x3002;&#x5728;&#x7B2C;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x91CC;&#xFF0C;
&#x6211;&#x4EEC;&#x8FD9;&#x6837;&#x505A;&#xFF1A;</p>
<pre><code>find ~
</code></pre><p>which produced a list of every file and subdirectory contained within our home directory.
It produced a list because the -print action is implied if no other action is specified.
Thus our command could also be expressed as:</p>
<p>&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x8F93;&#x51FA;&#x4E86;&#x6211;&#x4EEC;&#x5BB6;&#x76EE;&#x5F55;&#x4E2D;&#x5305;&#x542B;&#x7684;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;&#x548C;&#x5B50;&#x76EE;&#x5F55;&#x3002;&#x5B83;&#x4F1A;&#x8F93;&#x51FA;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#xFF0C;&#x56E0;&#x4E3A;&#x4F1A;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;-print &#x64CD;&#x4F5C;
&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x5176;&#x5B83;&#x64CD;&#x4F5C;&#x7684;&#x8BDD;&#x3002;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x7684;&#x547D;&#x4EE4;&#x4E5F;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x8868;&#x8FF0;&#xFF1A;</p>
<pre><code>find ~ -print
</code></pre><p>We can use find to delete files that meet certain criteria. For example, to delete files
that have the file extension &#x201C;.BAK&#x201D; (which is often used to designate backup files), we
could use this command:</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; find &#x547D;&#x4EE4;&#x6765;&#x5220;&#x9664;&#x7B26;&#x5408;&#x4E00;&#x5B9A;&#x6761;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6765;&#x5220;&#x9664;&#x6269;&#x5C55;&#x540D;&#x4E3A;&#x201C;.BAK&#x201D;&#xFF08;&#x8FD9;&#x901A;&#x5E38;&#x7528;&#x6765;&#x6307;&#x5B9A;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#xFF09;
&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#xFF1A;</p>
<pre><code>find ~ -type f -name &apos;*.BAK&apos; -delete
</code></pre><p>In this example, every file in the user&#x2019;s home directory (and its subdirectories) is searched
for filenames ending in .BAK. When they are found, they are deleted.</p>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x91CC;&#x9762;&#xFF0C;&#x7528;&#x6237;&#x5BB6;&#x76EE;&#x5F55;&#xFF08;&#x548C;&#x5B83;&#x7684;&#x5B50;&#x76EE;&#x5F55;&#xFF09;&#x4E0B;&#x641C;&#x7D22;&#x6BCF;&#x4E2A;&#x4EE5;.BAK &#x7ED3;&#x5C3E;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x3002;&#x5F53;&#x627E;&#x5230;&#x540E;&#xFF0C;&#x5C31;&#x5220;&#x9664;&#x5B83;&#x4EEC;&#x3002;</p>
<hr>
<p>Warning: It should go without saying that you should use extreme caution when
using the -delete action. Always test the command first by substituting the
-print action for -delete to confirm the search results.</p>
<p>&#x8B66;&#x544A;&#xFF1A;&#x5F53;&#x4F7F;&#x7528; -delete &#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x4E0D;&#x7528;&#x8BF4;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x683C;&#x5916;&#x5C0F;&#x5FC3;&#x3002;&#x9996;&#x5148;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x547D;&#x4EE4;&#xFF0C;
&#x7528; -print &#x64CD;&#x4F5C;&#x4EE3;&#x66FF; -delete&#xFF0C;&#x6765;&#x786E;&#x8BA4;&#x641C;&#x7D22;&#x7ED3;&#x679C;&#x3002;</p>
<hr>
<p>Before we go on, let&#x2019;s take another look at how the logical operators affect actions.
Consider the following command:</p>
<p>&#x5728;&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#x4E4B;&#x524D;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;&#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x7B26;&#x662F;&#x600E;&#x6837;&#x5F71;&#x54CD;&#x64CD;&#x4F5C;&#x7684;&#x3002;&#x8003;&#x8651;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;</p>
<pre><code>find ~ -type f -name &apos;*.BAK&apos; -print
</code></pre><p>As we have seen, this command will look for every regular file (-type f) whose name
ends with .BAK (-name &apos;*.BAK&apos;) and will output the relative pathname of each
matching file to standard output (-print). However, the reason the command performs
the way it does is determined by the logical relationships between each of the tests and
actions. Remember, there is, by default, an implied -and relationship between each test
and action. We could also express the command this way to make the logical
relationships easier to see:</p>
<p>&#x6B63;&#x5982;&#x6211;&#x4EEC;&#x6240;&#x89C1;&#x5230;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x4F1A;&#x67E5;&#x627E;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;&#x540D;&#x4EE5;.BAK (-name &apos;*.BAK&apos;) &#x7ED3;&#x5C3E;&#x7684;&#x666E;&#x901A;&#x6587;&#x4EF6; (-type f)&#xFF0C;
&#x5E76;&#x628A;&#x6BCF;&#x4E2A;&#x5339;&#x914D;&#x6587;&#x4EF6;&#x7684;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x540D;&#x8F93;&#x51FA;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA; (-print)&#x3002;&#x7136;&#x800C;&#xFF0C;&#x6B64;&#x547D;&#x4EE4;&#x6309;&#x8FD9;&#x4E2A;&#x65B9;&#x5F0F;&#x6267;&#x884C;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x662F;
&#x7531;&#x6BCF;&#x4E2A;&#x6D4B;&#x8BD5;&#x548C;&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#x7684;&#x903B;&#x8F91;&#x5173;&#x7CFB;&#x51B3;&#x5B9A;&#x7684;&#x3002;&#x8BB0;&#x4F4F;&#xFF0C;&#x5728;&#x6BCF;&#x4E2A;&#x6D4B;&#x8BD5;&#x548C;&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#x4F1A;&#x9ED8;&#x8BA4;&#x5E94;&#x7528; -and &#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x7B26;&#x3002;
&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x8868;&#x8FBE;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#xFF0C;&#x4F7F;&#x903B;&#x8F91;&#x5173;&#x7CFB;&#x66F4;&#x5BB9;&#x6613;&#x770B;&#x51FA;&#xFF1A;</p>
<pre><code>find ~ -type f -and -name &apos;*.BAK&apos; -and -print
</code></pre><p>With our command fully expressed, let&#x2019;s look at how the logical operators affect its
execution:</p>
<p>&#x5F53;&#x547D;&#x4EE4;&#x88AB;&#x5145;&#x5206;&#x8868;&#x8FBE;&#x4E4B;&#x540E;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x770B;&#x770B;&#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x7B26;&#x662F;&#x5982;&#x4F55;&#x5F71;&#x54CD;&#x5176;&#x6267;&#x884C;&#x7684;&#xFF1A;</p>
<table class="multi">
<tr>
<th class="title">Test/Action</th>
<th class="title">Is Performed Only If...</th>
</tr>
<tr>
<td valign="top" width="25%">-print</td>
<td valign="top">-type f and -name &apos;*.BAK&apos; are true</td>
</tr>
<tr>
<td valign="top">-name &#x2018;*.BAK&#x2019; </td>
<td valign="top">-type f is true</td>
</tr>
<tr>
<td valign="top">-type f </td>
<td valign="top">Is always performed, since it is the first test/action in an
-and relationship.  </td>
</tr>
</table>

<table class="multi">
<tr>
<th class="title">&#x6D4B;&#x8BD5;&#xFF0F;&#x884C;&#x4E3A; </th>
<th class="title">&#x53EA;&#x6709;...&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x624D;&#x88AB;&#x6267;&#x884C;</th>
</tr>
<tr>
<td valign="top" width="25%">-print</td>
<td valign="top">&#x53EA;&#x6709; -type f and -name &apos;*.BAK&apos;&#x4E3A;&#x771F;&#x7684;&#x65F6;&#x5019;</td>
</tr>
<tr>
<td valign="top">-name &#x2018;*.BAK&#x2019; </td>
<td valign="top">&#x53EA;&#x6709; -type f &#x4E3A;&#x771F;&#x7684;&#x65F6;&#x5019;</td>
</tr>
<tr>
<td valign="top">-type f </td>
<td valign="top">&#x603B;&#x662F;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x4E0E; -and &#x5173;&#x7CFB;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#xFF0F;&#x884C;&#x4E3A;&#x3002;</td>
</tr>
</table>

<p>Since the logical relationship between the tests and actions determines which of them are
performed, we can see that the order of the tests and actions is important. For instance, if
we were to reorder the tests and actions so that the -print action was the first one, the
command would behave much differently:</p>
<p>&#x56E0;&#x4E3A;&#x6D4B;&#x8BD5;&#x548C;&#x884C;&#x4E3A;&#x4E4B;&#x95F4;&#x7684;&#x903B;&#x8F91;&#x5173;&#x7CFB;&#x51B3;&#x5B9A;&#x4E86;&#x54EA;&#x4E00;&#x4E2A;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x6D4B;&#x8BD5;&#x548C;&#x884C;&#x4E3A;&#x7684;&#x987A;&#x5E8F;&#x5F88;&#x91CD;&#x8981;&#x3002;&#x4F8B;&#x5982;&#xFF0C;
&#x5982;&#x679C;&#x6211;&#x4EEC;&#x91CD;&#x65B0;&#x5B89;&#x6392;&#x6D4B;&#x8BD5;&#x548C;&#x884C;&#x4E3A;&#x4E4B;&#x95F4;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x8BA9; -print &#x884C;&#x4E3A;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x8D77;&#x6765;&#x4F1A;&#x622A;&#x7136;&#x4E0D;&#x540C;&#xFF1A;</p>
<pre><code>find ~ -print -and -type f -and -name &apos;*.BAK&apos;
</code></pre><p>This version of the command will print each file (the -print action always evaluates to
true) and then test for file type and the specified file extension.</p>
<p>&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x7684;&#x547D;&#x4EE4;&#x4F1A;&#x6253;&#x5370;&#x51FA;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;&#xFF08;-print &#x884C;&#x4E3A;&#x603B;&#x662F;&#x4E3A;&#x771F;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#x548C;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x6269;&#x5C55;&#x540D;&#x3002;</p>
<h3 id="&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x884C;&#x4E3A;">&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x884C;&#x4E3A;</h3>
<p>In addition to the predefined actions, we can also invoke arbitrary commands. The
traditional way of doing this is with the -exec action. This action works like this:</p>
<p>&#x9664;&#x4E86;&#x9884;&#x5B9A;&#x4E49;&#x7684;&#x884C;&#x4E3A;&#x4E4B;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x5524;&#x9192;&#x968F;&#x610F;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x4F20;&#x7EDF;&#x65B9;&#x5F0F;&#x662F;&#x901A;&#x8FC7; -exec &#x884C;&#x4E3A;&#x3002;&#x8FD9;&#x4E2A;
&#x884C;&#x4E3A;&#x50CF;&#x8FD9;&#x6837;&#x5DE5;&#x4F5C;&#xFF1A;</p>
<pre><code>-exec command {} ;
</code></pre><p>where command is the name of a command, {} is a symbolic representation of the current
pathname and the semicolon is a required delimiter indicating the end of the command.
Here&#x2019;s an example of using -exec to act like the -delete action discussed earlier:</p>
<p>&#x8FD9;&#x91CC;&#x7684; command &#x5C31;&#x662F;&#x6307;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x540D;&#x5B57;&#xFF0C;{}&#x662F;&#x5F53;&#x524D;&#x8DEF;&#x5F84;&#x540D;&#x7684;&#x7B26;&#x53F7;&#x8868;&#x793A;&#xFF0C;&#x5206;&#x53F7;&#x662F;&#x8981;&#x6C42;&#x7684;&#x754C;&#x5B9A;&#x7B26;
&#x8868;&#x660E;&#x547D;&#x4EE4;&#x7ED3;&#x675F;&#x3002;&#x8FD9;&#x91CC;&#x662F;&#x4E00;&#x4E2A;&#x4F7F;&#x7528; -exec &#x884C;&#x4E3A;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x5176;&#x4F5C;&#x7528;&#x5982;&#x4E4B;&#x524D;&#x8BA8;&#x8BBA;&#x7684; -delete &#x884C;&#x4E3A;&#xFF1A;</p>
<pre><code>-exec rm &apos;{}&apos; &apos;;&apos;
</code></pre><p>Again, since the brace and semicolon characters have special meaning to the shell, they
must be quoted or escaped.</p>
<p>&#x91CD;&#x8FF0;&#x4E00;&#x904D;&#xFF0C;&#x56E0;&#x4E3A;&#x82B1;&#x62EC;&#x53F7;&#x548C;&#x5206;&#x53F7;&#x5BF9;&#x4E8E; shell &#x6709;&#x7279;&#x6B8A;&#x542B;&#x4E49;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x4EEC;&#x5FC5;&#x987B;&#x88AB;&#x5F15;&#x8D77;&#x6765;&#x6216;&#x88AB;&#x8F6C;&#x4E49;&#x3002;</p>
<p>It&#x2019;s also possible to execute a user defined action interactively. By using the -ok action
in place of -exec, the user is prompted before execution of each specified command:</p>
<p>&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x4EA4;&#x4E92;&#x5F0F;&#x5730;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x884C;&#x4E3A;&#x3002;&#x901A;&#x8FC7;&#x4F7F;&#x7528; -ok &#x884C;&#x4E3A;&#x6765;&#x4EE3;&#x66FF; -exec&#xFF0C;&#x5728;&#x6267;&#x884C;&#x6BCF;&#x4E2A;&#x6307;&#x5B9A;&#x7684;&#x547D;&#x4EE4;&#x4E4B;&#x524D;&#xFF0C;
&#x4F1A;&#x63D0;&#x793A;&#x7528;&#x6237;&#xFF1A;</p>
<pre><code>find ~ -type f -name &apos;foo*&apos; -ok ls -l &apos;{}&apos; &apos;;&apos;
&lt; ls ... /home/me/bin/foo &gt; ? y
-rwxr-xr-x 1 me    me 224 2007-10-29 18:44 /home/me/bin/foo
&lt; ls ... /home/me/foo.txt &gt; ? y
-rw-r--r-- 1 me    me 0 2008-09-19 12:53 /home/me/foo.txt
</code></pre><p>In this example, we search for files with names starting with the string &#x201C;foo&#x201D; and execute
the command ls -l each time one is found. Using the -ok action prompts the user
before the ls command is executed.</p>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x91CC;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x641C;&#x7D22;&#x4EE5;&#x5B57;&#x7B26;&#x4E32;&#x201C;foo&#x201D;&#x5F00;&#x5934;&#x7684;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x5E76;&#x4E14;&#x5BF9;&#x6BCF;&#x4E2A;&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x6267;&#x884C; ls -l &#x547D;&#x4EE4;&#x3002;
&#x4F7F;&#x7528; -ok &#x884C;&#x4E3A;&#xFF0C;&#x4F1A;&#x5728; ls &#x547D;&#x4EE4;&#x6267;&#x884C;&#x4E4B;&#x524D;&#x63D0;&#x793A;&#x7528;&#x6237;&#x3002;</p>
<h3 id="&#x63D0;&#x9AD8;&#x6548;&#x7387;">&#x63D0;&#x9AD8;&#x6548;&#x7387;</h3>
<p>When the -exec action is used, it launches a new instance of the specified command
each time a matching file is found. There are times when we might prefer to combine all
of the search results and launch a single instance of the command. For example, rather
than executing the commands like this:</p>
<p>&#x5F53; -exec &#x884C;&#x4E3A;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x82E5;&#x6BCF;&#x6B21;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x5B83;&#x4F1A;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6307;&#x5B9A;&#x547D;&#x4EE4;&#x7684;&#x5B9E;&#x4F8B;&#x3002;
&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x66F4;&#x613F;&#x610F;&#x628A;&#x6240;&#x6709;&#x7684;&#x641C;&#x7D22;&#x7ED3;&#x679C;&#x7ED3;&#x5408;&#x8D77;&#x6765;&#xFF0C;&#x518D;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x5B9E;&#x4F8B;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x50CF;&#x8FD9;&#x6837;&#x6267;&#x884C;&#x547D;&#x4EE4;&#xFF1A;</p>
<pre><code>ls -l file1
ls -l file2
</code></pre><p>we may prefer to execute it this way:</p>
<p>&#x6211;&#x4EEC;&#x66F4;&#x559C;&#x6B22;&#x8FD9;&#x6837;&#x6267;&#x884C;&#x547D;&#x4EE4;&#xFF1A;</p>
<pre><code>ls -l file1 file2
</code></pre><p>thus causing the command to be executed only one time rather than multiple times.
There are two ways we can do this. The traditional way, using the external command
xargs and the alternate way, using a new feature in find itself. We&#x2019;ll talk about the
alternate way first.</p>
<p>&#x8FD9;&#x6837;&#x5C31;&#x5BFC;&#x81F4;&#x547D;&#x4EE4;&#x53EA;&#x88AB;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x800C;&#x4E0D;&#x662F;&#x591A;&#x6B21;&#x3002;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x505A;&#x3002;&#x4F20;&#x7EDF;&#x65B9;&#x5F0F;&#x662F;&#x4F7F;&#x7528;&#x5916;&#x90E8;&#x547D;&#x4EE4;
xargs&#xFF0C;&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#xFF0C;&#x4F7F;&#x7528; find &#x547D;&#x4EE4;&#x81EA;&#x5DF1;&#x7684;&#x4E00;&#x4E2A;&#x65B0;&#x529F;&#x80FD;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x8BA8;&#x8BBA;&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x6CD5;&#x3002;</p>
<p>By changing the trailing semicolon character to a plus sign, we activate the ability of
find to combine the results of the search into an argument list for a single execution of
the desired command. Going back to our example, this:</p>
<p>&#x901A;&#x8FC7;&#x628A;&#x672B;&#x5C3E;&#x7684;&#x5206;&#x53F7;&#x6539;&#x4E3A;&#x52A0;&#x53F7;&#xFF0C;&#x5C31;&#x6FC0;&#x6D3B;&#x4E86; find &#x547D;&#x4EE4;&#x7684;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x628A;&#x641C;&#x7D22;&#x7ED3;&#x679C;&#x7ED3;&#x5408;&#x4E3A;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5217;&#x8868;&#xFF0C;
&#x7136;&#x540E;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x6240;&#x671F;&#x671B;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x518D;&#x770B;&#x4E00;&#x4E0B;&#x4E4B;&#x524D;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x8FD9;&#x4E2A;&#xFF1A;</p>
<pre><code>find ~ -type f -name &apos;foo*&apos; -exec ls -l &apos;{}&apos; &apos;;&apos;
-rwxr-xr-x 1 me     me 224 2007-10-29 18:44 /home/me/bin/foo
-rw-r--r-- 1 me     me 0 2008-09-19 12:53 /home/me/foo.txt
</code></pre><p>will execute ls each time a matching file is found. By changing the command to:</p>
<p>&#x4F1A;&#x6267;&#x884C; ls &#x547D;&#x4EE4;&#xFF0C;&#x6BCF;&#x6B21;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x628A;&#x547D;&#x4EE4;&#x6539;&#x4E3A;&#xFF1A;</p>
<pre><code>find ~ -type f -name &apos;foo*&apos; -exec ls -l &apos;{}&apos; +
-rwxr-xr-x 1 me     me 224 2007-10-29 18:44 /home/me/bin/foo
-rw-r--r-- 1 me     me 0 2008-09-19 12:53 /home/me/foo.txt
</code></pre><p>we get the same results, but the system only has to execute the ls command once.</p>
<p>&#x867D;&#x7136;&#x6211;&#x4EEC;&#x5F97;&#x5230;&#x4E00;&#x6837;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4F46;&#x662F;&#x7CFB;&#x7EDF;&#x53EA;&#x9700;&#x8981;&#x6267;&#x884C;&#x4E00;&#x6B21; ls &#x547D;&#x4EE4;&#x3002;</p>
<h4 id="xargs">xargs</h4>
<p>The xargs command performs an interesting function. It accepts input from standard
input and converts it into an argument list for a specified command. With our example,
we would use it like this:</p>
<p>&#x8FD9;&#x4E2A; xargs &#x547D;&#x4EE4;&#x4F1A;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x6709;&#x8DA3;&#x7684;&#x51FD;&#x6570;&#x3002;&#x5B83;&#x4ECE;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x63A5;&#x53D7;&#x8F93;&#x5165;&#xFF0C;&#x5E76;&#x628A;&#x8F93;&#x5165;&#x8F6C;&#x6362;&#x4E3A;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x547D;&#x4EE4;&#x7684;
&#x53C2;&#x6570;&#x5217;&#x8868;&#x3002;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x4F7F;&#x7528;&#x5B83;&#xFF1A;</p>
<pre><code>find ~ -type f -name &apos;foo*&apos; -print | xargs ls -l
-rwxr-xr-x 1 me     me 224 2007-10-29 18:44 /home/me/bin/foo
-rw-r--r-- 1 me     me 0 2008-09-19 12:53 /home/me/foo.txt
</code></pre><p>Here we see the output of the find command piped into xargs which, in turn,
constructs an argument list for ls command and then executes it.</p>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x770B;&#x5230; find &#x547D;&#x4EE4;&#x7684;&#x8F93;&#x51FA;&#x88AB;&#x7BA1;&#x9053;&#x5230; xargs &#x547D;&#x4EE4;&#xFF0C;&#x53CD;&#x8FC7;&#x6765;&#xFF0C;xargs &#x4F1A;&#x4E3A; ls &#x547D;&#x4EE4;&#x6784;&#x5EFA;
&#x53C2;&#x6570;&#x5217;&#x8868;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C; ls &#x547D;&#x4EE4;&#x3002;</p>
<hr>
<p>Note: While the number of arguments that can be placed into a command line is
quite large, it&#x2019;s not unlimited. It is possible to create commands that are too long
for the shell to accept. When a command line exceeds the maximum length
supported by the system, xargs executes the specified command with the
maximum number of arguments possible and then repeats this process until
standard input is exhausted. To see the maximum size of the command line,
execute xargs with the --show-limits option.</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5F53;&#x88AB;&#x653E;&#x7F6E;&#x5230;&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x7684;&#x53C2;&#x6570;&#x4E2A;&#x6570;&#x76F8;&#x5F53;&#x5927;&#x65F6;&#xFF0C;&#x53C2;&#x6570;&#x4E2A;&#x6570;&#x662F;&#x6709;&#x9650;&#x5236;&#x7684;&#x3002;&#x6709;&#x53EF;&#x80FD;&#x521B;&#x5EFA;&#x7684;&#x547D;&#x4EE4;
&#x592A;&#x957F;&#x4EE5;&#x81F3;&#x4E8E; shell &#x4E0D;&#x80FD;&#x63A5;&#x53D7;&#x3002;&#x5F53;&#x547D;&#x4EE4;&#x884C;&#x8D85;&#x8FC7;&#x7CFB;&#x7EDF;&#x652F;&#x6301;&#x7684;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x65F6;&#xFF0C;xargs &#x4F1A;&#x6267;&#x884C;&#x5E26;&#x6709;&#x6700;&#x5927;
&#x53C2;&#x6570;&#x4E2A;&#x6570;&#x7684;&#x6307;&#x5B9A;&#x547D;&#x4EE4;&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x590D;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x76F4;&#x5230;&#x8017;&#x5C3D;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x3002;&#x6267;&#x884C;&#x5E26;&#x6709; --show--limits &#x9009;&#x9879;
&#x7684; xargs &#x547D;&#x4EE4;&#xFF0C;&#x6765;&#x67E5;&#x770B;&#x547D;&#x4EE4;&#x884C;&#x7684;&#x6700;&#x5927;&#x503C;&#x3002;</p>
<hr>
<blockquote>
<p>Dealing With Funny Filenames</p>
<p>&#x5904;&#x7406;&#x53E4;&#x602A;&#x7684;&#x6587;&#x4EF6;&#x540D;</p>
<p>Unix-like systems allow embedded spaces (and even newlines!) in filenames.
This causes problems for programs like xargs that construct argument lists for
other programs. An embedded space will be treated as a delimiter and the
resulting command will interpret each space-separated word as a separate
argument. To overcome this, find and xarg allow the optional use of a null
character as argument separator. A null character is defined in ASCII as the
character represented by the number zero (as opposed to, for example, the space
character, which is defined in ASCII as the character represented by the number
32). The find command provides the action -print0, which produces null
separated output, and the xargs command has the --null option, which
accepts null separated input. Here&#x2019;s an example:</p>
<p>&#x7C7B; Unix &#x7684;&#x7CFB;&#x7EDF;&#x5141;&#x8BB8;&#x5728;&#x6587;&#x4EF6;&#x540D;&#x4E2D;&#x5D4C;&#x5165;&#x7A7A;&#x683C;&#xFF08;&#x751A;&#x81F3;&#x6362;&#x884C;&#x7B26;&#xFF09;&#x3002;&#x8FD9;&#x5C31;&#x7ED9;&#x4E00;&#x4E9B;&#x7A0B;&#x5E8F;&#xFF0C;&#x5982;&#x4E3A;&#x5176;&#x5B83;
&#x7A0B;&#x5E8F;&#x6784;&#x5EFA;&#x53C2;&#x6570;&#x5217;&#x8868;&#x7684; xargs &#x7A0B;&#x5E8F;&#xFF0C;&#x9020;&#x6210;&#x4E86;&#x95EE;&#x9898;&#x3002;&#x4E00;&#x4E2A;&#x5D4C;&#x5165;&#x7684;&#x7A7A;&#x683C;&#x4F1A;&#x88AB;&#x770B;&#x4F5C;&#x662F;&#x4E00;&#x4E2A;&#x754C;&#x5B9A;&#x7B26;&#xFF0C;&#x751F;&#x6210;&#x7684;
&#x547D;&#x4EE4;&#x4F1A;&#x628A;&#x6BCF;&#x4E2A;&#x7A7A;&#x683C;&#x5206;&#x79BB;&#x7684;&#x5355;&#x8BCD;&#x89E3;&#x91CA;&#x4E3A;&#x5355;&#x72EC;&#x7684;&#x53C2;&#x6570;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;find &#x547D;&#x4EE4;&#x548C; xarg &#x7A0B;&#x5E8F;
&#x5141;&#x8BB8;&#x53EF;&#x9009;&#x62E9;&#x7684;&#x4F7F;&#x7528;&#x4E00;&#x4E2A; null &#x5B57;&#x7B26;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x5206;&#x9694;&#x7B26;&#x3002;&#x4E00;&#x4E2A; null &#x5B57;&#x7B26;&#x88AB;&#x5B9A;&#x4E49;&#x5728; ASCII &#x7801;&#x4E2D;&#xFF0C;&#x7531;&#x6570;&#x5B57;
&#x96F6;&#x6765;&#x8868;&#x793A;&#xFF08;&#x76F8;&#x53CD;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x7A7A;&#x683C;&#x5B57;&#x7B26;&#x5728; ASCII &#x7801;&#x4E2D;&#x7531;&#x6570;&#x5B57;32&#x8868;&#x793A;&#xFF09;&#x3002;find &#x547D;&#x4EE4;&#x63D0;&#x4F9B;&#x7684; -print0 &#x884C;&#x4E3A;&#xFF0C;
&#x5219;&#x4F1A;&#x4EA7;&#x751F;&#x7531; null &#x5B57;&#x7B26;&#x5206;&#x79BB;&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x5E76;&#x4E14; xargs &#x547D;&#x4EE4;&#x6709;&#x4E00;&#x4E2A; --null &#x9009;&#x9879;&#xFF0C;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x4F1A;&#x63A5;&#x53D7;&#x7531; null &#x5B57;&#x7B26;
&#x5206;&#x79BB;&#x7684;&#x8F93;&#x5165;&#x3002;&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<p> find ~ -iname &apos;*.jpg&apos; -print0 | xargs --null ls -l</p>
<p>Using this technique, we can ensure that all files, even those containing embedded
spaces in their names, are handled correctly.</p>
<p>&#x4F7F;&#x7528;&#x8FD9;&#x9879;&#x6280;&#x672F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x6240;&#x6709;&#x6587;&#x4EF6;&#xFF0C;&#x751A;&#x81F3;&#x90A3;&#x4E9B;&#x6587;&#x4EF6;&#x540D;&#x4E2D;&#x5305;&#x542B;&#x7A7A;&#x683C;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x90FD;&#x80FD;&#x88AB;&#x6B63;&#x786E;&#x5730;&#x5904;&#x7406;&#x3002;</p>
</blockquote>
<h3 id="&#x8FD4;&#x56DE;&#x64CD;&#x7EC3;&#x573A;">&#x8FD4;&#x56DE;&#x64CD;&#x7EC3;&#x573A;</h3>
<p>It&#x2019;s time to put find to some (almost) practical use. We&#x2019;ll create a playground and try
out some of what we have learned.</p>
<p>&#x5230;&#x5B9E;&#x9645;&#x4F7F;&#x7528; find &#x547D;&#x4EE4;&#x7684;&#x65F6;&#x5019;&#x4E86;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x64CD;&#x7EC3;&#x573A;&#xFF0C;&#x6765;&#x5B9E;&#x8DF5;&#x4E00;&#x4E9B;&#x6211;&#x4EEC;&#x6240;&#x5B66;&#x5230;&#x7684;&#x77E5;&#x8BC6;&#x3002;</p>
<p>First, let&#x2019;s create a playground with lots of subdirectories and files:</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x8BB8;&#x591A;&#x5B50;&#x76EE;&#x5F55;&#x548C;&#x6587;&#x4EF6;&#x7684;&#x64CD;&#x7EC3;&#x573A;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ mkdir -p playground/dir-{00{1..9},0{10..99},100}
[me@linuxbox ~]$ touch playground/dir-{00{1..9},0{10..99},100}/file-{A..Z}
</code></pre><p>Marvel in the power of the command line! With these two lines, we created a playground
directory containing one hundred subdirectories each containing twenty-six empty files.
Try that with the GUI!</p>
<p>&#x60CA;&#x53F9;&#x4E8E;&#x547D;&#x4EE4;&#x884C;&#x7684;&#x5F3A;&#x5927;&#x529F;&#x80FD;&#xFF01;&#x53EA;&#x7528;&#x8FD9;&#x4E24;&#x884C;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x4E00;&#x767E;&#x4E2A;&#x5B50;&#x76EE;&#x5F55;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B50;&#x76EE;&#x5F55;&#x4E2D;
&#x5305;&#x542B;&#x4E86;26&#x4E2A;&#x7A7A;&#x6587;&#x4EF6;&#x7684;&#x64CD;&#x7EC3;&#x573A;&#x3002;&#x8BD5;&#x8BD5;&#x7528; GUI &#x6765;&#x521B;&#x5EFA;&#x5B83;&#xFF01;</p>
<p>The method we employed to accomplish this magic involved a familiar command
(mkdir), an exotic shell expansion (braces) and a new command, touch. By
combining mkdir with the -p option (which causes mkdir to create the parent
directories of the specified paths) with brace expansion, we were able to create one
hundred directories.</p>
<p>&#x6211;&#x4EEC;&#x7528;&#x6765;&#x521B;&#x9020;&#x8FD9;&#x4E2A;&#x5947;&#x8FF9;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x719F;&#x6089;&#x7684;&#x547D;&#x4EE4;&#xFF08;mkdir&#xFF09;&#xFF0C;&#x4E00;&#x4E2A;&#x5947;&#x5F02;&#x7684; shell &#x6269;&#x5C55;&#xFF08;&#x5927;&#x62EC;&#x53F7;&#xFF09;
&#x548C;&#x4E00;&#x4E2A;&#x65B0;&#x547D;&#x4EE4;&#xFF0C;touch&#x3002;&#x901A;&#x8FC7;&#x7ED3;&#x5408; mkdir &#x547D;&#x4EE4;&#x548C;-p &#x9009;&#x9879;&#xFF08;&#x5BFC;&#x81F4; mkdir &#x547D;&#x4EE4;&#x521B;&#x5EFA;&#x6307;&#x5B9A;&#x8DEF;&#x5F84;&#x7684;&#x7236;&#x76EE;&#x5F55;&#xFF09;&#xFF0C;&#x4EE5;&#x53CA;
&#x5927;&#x62EC;&#x53F7;&#x5C55;&#x5F00;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x521B;&#x5EFA;&#x4E00;&#x767E;&#x4E2A;&#x76EE;&#x5F55;&#x3002;</p>
<p>The touch command is usually used to set or update the access, change, and modify
times of files. However, if a filename argument is that of a nonexistent file, an empty file
is created.</p>
<p>&#x8FD9;&#x4E2A; touch &#x547D;&#x4EE4;&#x901A;&#x5E38;&#x88AB;&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x6216;&#x66F4;&#x65B0;&#x6587;&#x4EF6;&#x7684;&#x8BBF;&#x95EE;&#xFF0C;&#x66F4;&#x6539;&#xFF0C;&#x548C;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x540D;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;
&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7A7A;&#x6587;&#x4EF6;&#x3002;</p>
<p>In our playground, we created one hundred instances of a file named file-A. Let&#x2019;s find
them:</p>
<p>&#x5728;&#x6211;&#x4EEC;&#x7684;&#x64CD;&#x7EC3;&#x573A;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x767E;&#x4E2A;&#x540D;&#x4E3A; file-A &#x7684;&#x6587;&#x4EF6;&#x5B9E;&#x4F8B;&#x3002;&#x8BA9;&#x6211;&#x4EEC;&#x627E;&#x5230;&#x5B83;&#x4EEC;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ find playground -type f -name &apos;file-A&apos;
</code></pre><p>Note that unlike ls, find does not produce results in sorted order. Its order is
determined by the layout of the storage device. To confirm that we actually have one
hundred instances of the file we can confirm it this way:</p>
<p>&#x6CE8;&#x610F;&#x4E0D;&#x540C;&#x4E8E; ls &#x547D;&#x4EE4;&#xFF0C;find &#x547D;&#x4EE4;&#x7684;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x662F;&#x65E0;&#x5E8F;&#x7684;&#x3002;&#x5176;&#x987A;&#x5E8F;&#x7531;&#x5B58;&#x50A8;&#x8BBE;&#x5907;&#x7684;&#x5E03;&#x5C40;&#x51B3;&#x5B9A;&#x3002;&#x4E3A;&#x4E86;&#x786E;&#x5B9A;&#x5B9E;&#x9645;&#x4E0A;
&#x6211;&#x4EEC;&#x62E5;&#x6709;&#x4E00;&#x767E;&#x4E2A;&#x6B64;&#x6587;&#x4EF6;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x786E;&#x8BA4;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ find playground -type f -name &apos;file-A&apos; | wc -l
</code></pre><p>Next, let&#x2019;s look at finding files based on their modification times. This will be helpful
when creating backups or organizing files in chronological order. To do this, we will first
create a reference file against which we will compare modification time:</p>
<p>&#x4E0B;&#x4E00;&#x6B65;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;&#x57FA;&#x4E8E;&#x6587;&#x4EF6;&#x7684;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x6765;&#x67E5;&#x627E;&#x6587;&#x4EF6;&#x3002;&#x5F53;&#x521B;&#x5EFA;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x4EE5;&#x5E74;&#x4EE3;&#x987A;&#x5E8F;&#x6765;
&#x7EC4;&#x7EC7;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x4F1A;&#x5F88;&#x6709;&#x5E2E;&#x52A9;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5C06;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x53C2;&#x8003;&#x6587;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4E0E;&#x5176;&#x6BD4;&#x8F83;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ touch playground/timestamp
</code></pre><p>This creates an empty file named timestamp and sets its modification time to the
current time. We can verify this by using another handy command, stat, which is a
kind of souped-up version of ls. The stat command reveals all that the system
understands about a file and its attributes:</p>
<p>&#x8FD9;&#x4E2A;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x7A7A;&#x6587;&#x4EF6;&#xFF0C;&#x540D;&#x4E3A; timestamp&#xFF0C;&#x5E76;&#x4E14;&#x628A;&#x5B83;&#x7684;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x8BBE;&#x7F6E;&#x4E3A;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x3002;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x9A8C;&#x8BC1;
&#x5B83;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x53E6;&#x4E00;&#x4E2A;&#x65B9;&#x4FBF;&#x7684;&#x547D;&#x4EE4;&#xFF0C;stat&#xFF0C;&#x662F;&#x4E00;&#x6B3E;&#x52A0;&#x5927;&#x9A6C;&#x529B;&#x7684; ls &#x547D;&#x4EE4;&#x7248;&#x672C;&#x3002;&#x8FD9;&#x4E2A; stat &#x547D;&#x4EE4;&#x4F1A;&#x5C55;&#x793A;&#x7CFB;&#x7EDF;&#x5BF9;
&#x67D0;&#x4E2A;&#x6587;&#x4EF6;&#x53CA;&#x5176;&#x5C5E;&#x6027;&#x6240;&#x77E5;&#x9053;&#x7684;&#x6240;&#x6709;&#x4FE1;&#x606F;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ stat playground/timestamp
File: &apos;playground/timestamp&apos;
Size: 0 Blocks: 0 IO Block: 4096 regular empty file
Device: 803h/2051d Inode: 14265061 Links: 1
Access: (0644/-rw-r--r--) Uid: ( 1001/ me) Gid: ( 1001/ me)
Access: 2008-10-08 15:15:39.000000000 -0400
Modify: 2008-10-08 15:15:39.000000000 -0400
Change: 2008-10-08 15:15:39.000000000 -0400
</code></pre><p>If we touch the file again and then examine it with stat, we will see that the file&#x2019;s
times have been updated.</p>
<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x518D;&#x6B21; touch &#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x7528; stat &#x547D;&#x4EE4;&#x68C0;&#x6D4B;&#x5B83;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x95F4;&#x5DF2;&#x7ECF;&#x66F4;&#x65B0;&#x4E86;&#x3002;</p>
<pre><code>[me@linuxbox ~]$ touch playground/timestamp
[me@linuxbox ~]$ stat playground/timestamp
File: &apos;playground/timestamp&apos;
Size: 0 Blocks: 0 IO Block: 4096 regular empty file
Device: 803h/2051d Inode: 14265061 Links: 1
Access: (0644/-rw-r--r--) Uid: ( 1001/ me) Gid: ( 1001/ me)
Access: 2008-10-08 15:23:33.000000000 -0400
Modify: 2008-10-08 15:23:33.000000000 -0400
Change: 2008-10-08 15:23:33.000000000 -0400
</code></pre><p>Next, let&#x2019;s use find to update some of our playground files:</p>
<p>&#x4E0B;&#x4E00;&#x6B65;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x4F7F;&#x7528; find &#x547D;&#x4EE4;&#x6765;&#x66F4;&#x65B0;&#x4E00;&#x4E9B;&#x64CD;&#x7EC3;&#x573A;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ find playground -type f -name &apos;file-B&apos; -exec touch &apos;{}&apos; &apos;;&apos;
</code></pre><p>This updates all files in the playground named file-B. Next we&#x2019;ll use find to identify
the updated files by comparing all the files to the reference file timestamp:</p>
<p>&#x8FD9;&#x4F1A;&#x66F4;&#x65B0;&#x64CD;&#x7EC3;&#x573A;&#x4E2D;&#x6240;&#x6709;&#x540D;&#x4E3A; file-B &#x7684;&#x6587;&#x4EF6;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x4F1A;&#x4F7F;&#x7528; find &#x547D;&#x4EE4;&#x6765;&#x8BC6;&#x522B;&#x5DF2;&#x66F4;&#x65B0;&#x7684;&#x6587;&#x4EF6;&#xFF0C;
&#x901A;&#x8FC7;&#x628A;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x4E0E;&#x53C2;&#x8003;&#x6587;&#x4EF6; timestamp &#x505A;&#x6BD4;&#x8F83;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ find playground -type f -newer playground/timestamp
</code></pre><p>The results contain all one hundred instances of file-B. Since we performed a touch
on all the files in the playground named file-B after we updated timestamp, they
are now &#x201C;newer&#x201D; than timestamp and thus can be identified with the -newer test.</p>
<p>&#x641C;&#x7D22;&#x7ED3;&#x679C;&#x5305;&#x542B;&#x6240;&#x6709;&#x4E00;&#x767E;&#x4E2A;&#x6587;&#x4EF6; file-B &#x7684;&#x5B9E;&#x4F8B;&#x3002;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5728;&#x66F4;&#x65B0;&#x4E86;&#x6587;&#x4EF6; timestamp &#x4E4B;&#x540E;&#xFF0C;
touch &#x4E86;&#x64CD;&#x7EC3;&#x573A;&#x4E2D;&#x540D;&#x4E3A; file-B &#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x73B0;&#x5728;&#x5B83;&#x4EEC;&#x201C;&#x65B0;&#x4E8E;&#x201D;timestamp &#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x6B64;&#x80FD;&#x88AB;&#x7528;
-newer &#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x8BC6;&#x522B;&#x51FA;&#x6765;&#x3002;</p>
<p>Finally, let&#x2019;s go back to the bad permissions test we performed earlier and apply it to
playground:</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x56DE;&#x5230;&#x4E4B;&#x524D;&#x90A3;&#x4E2A;&#x9519;&#x8BEF;&#x6743;&#x9650;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x628A;&#x5B83;&#x5E94;&#x7528;&#x4E8E;&#x64CD;&#x7EC3;&#x573A;&#x91CC;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ find playground \( -type f -not -perm 0600 \) -or \( -type d -not -perm 0700 \)
</code></pre><p>This command lists all one hundred directories and twenty-six hundred files in
playground (as well as timestamp and playground itself, for a total of 2702)
because none of them meets our definition of &#x201C;good permissions.&#x201D; With our knowledge
of operators and actions, we can add actions to this command to apply new permissions
to the files and directories in our playground:</p>
<p>&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x5217;&#x51FA;&#x4E86;&#x64CD;&#x7EC3;&#x573A;&#x4E2D;&#x6240;&#x6709;&#x4E00;&#x767E;&#x4E2A;&#x76EE;&#x5F55;&#x548C;&#x4E8C;&#x767E;&#x516D;&#x5341;&#x4E2A;&#x6587;&#x4EF6;&#xFF08;&#x8FD8;&#x6709; timestamp &#x548C;&#x64CD;&#x7EC3;&#x573A;&#x672C;&#x8EAB;&#xFF0C;&#x5171; 2702 &#x4E2A;&#xFF09;
&#xFF0C;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x7B26;&#x5408;&#x6211;&#x4EEC;&#x201C;&#x6B63;&#x786E;&#x6743;&#x9650;&#x201D;&#x7684;&#x5B9A;&#x4E49;&#x3002;&#x901A;&#x8FC7;&#x5BF9;&#x8FD0;&#x7B97;&#x7B26;&#x548C;&#x884C;&#x4E3A;&#x77E5;&#x8BC6;&#x7684;&#x4E86;&#x89E3;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7ED9;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;
&#x6DFB;&#x52A0;&#x884C;&#x4E3A;&#xFF0C;&#x5BF9;&#x5B9E;&#x6218;&#x573A;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x5E94;&#x7528;&#x65B0;&#x7684;&#x6743;&#x9650;&#x3002;</p>
<pre><code>[me@linuxbox ~]$ find playground \( -type f -not -perm 0600 -exec chmod 0600 &apos;{}&apos; &apos;;&apos; \)
   -or \( -type d -not -perm 0711 -exec chmod 0700 &apos;{}&apos; &apos;;&apos; \)
</code></pre><p>On a day-to-day basis, we might find it easier to issue two commands, one for the
directories and one for the files, rather than this one large compound command, but it&#x2019;s
nice to know that we can do it this way. The important point here is to understand how
the operators and actions can be used together to perform useful tasks.</p>
<p>&#x5728;&#x65E5;&#x5E38;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x53D1;&#x73B0;&#x8FD0;&#x884C;&#x4E24;&#x4E2A;&#x547D;&#x4EE4;&#x4F1A;&#x6BD4;&#x8F83;&#x5BB9;&#x6613;&#x4E00;&#x4E9B;&#xFF0C;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x76EE;&#x5F55;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x6587;&#x4EF6;&#xFF0C;
&#x800C;&#x4E0D;&#x662F;&#x8FD9;&#x4E00;&#x4E2A;&#x957F;&#x957F;&#x7684;&#x590D;&#x5408;&#x547D;&#x4EE4;&#xFF0C;&#x4F46;&#x662F;&#x5F88;&#x9AD8;&#x5174;&#x77E5;&#x9053;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x8FD9;&#x6837;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x3002;&#x8FD9;&#x91CC;&#x6700;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x662F;&#x8981;
&#x7406;&#x89E3;&#x600E;&#x6837;&#x628A;&#x64CD;&#x4F5C;&#x7B26;&#x548C;&#x884C;&#x4E3A;&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x6765;&#x6267;&#x884C;&#x6709;&#x7528;&#x7684;&#x4EFB;&#x52A1;&#x3002;</p>
<h4 id="&#x9009;&#x9879;">&#x9009;&#x9879;</h4>
<p>Finally, we have the options. The options are used to control the scope of a find search.
They may be included with other tests and actions when constructing find expressions.
Here is a list of the most commonly used ones:</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x8FD9;&#x4E9B;&#x9009;&#x9879;&#x3002;&#x8FD9;&#x4E9B;&#x9009;&#x9879;&#x88AB;&#x7528;&#x6765;&#x63A7;&#x5236; find &#x547D;&#x4EE4;&#x7684;&#x641C;&#x7D22;&#x8303;&#x56F4;&#x3002;&#x5F53;&#x6784;&#x5EFA; find &#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;
&#x5B83;&#x4EEC;&#x53EF;&#x80FD;&#x88AB;&#x5176;&#x5B83;&#x7684;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x548C;&#x884C;&#x4E3A;&#x5305;&#x542B;&#xFF1A;</p>
<table class="multi">
<caption class="cap">Table 18-7: find Options</caption>
<tr>
<th class="title">Option</th>
<th class="title">Description</th>
</tr>
<tr>
<td valign="top" width="25%">-depth</td>
<td valign="top">Direct find to process a directory&#x2019;s files before the
directory itself. This option is automatically applied
when the -delete action is specified.</td>
</tr>
<tr>
<td valign="top">-maxdepth levels </td>
<td valign="top">Set the maximum number of levels that find will
descend into a directory tree when performing tests and actions.</td>
</tr>
<tr>
<td valign="top">-mindepth levels </td>
<td valign="top">Set the minimum number of levels that find will
descend into a directory tree before applying tests and actions.</td>
</tr>
<tr>
<td valign="top">-mount </td>
<td valign="top">Direct find not to traverse directories that are mounted
on other file systems.</td>
</tr>
<tr>
<td valign="top">-noleaf </td>
<td valign="top">Direct find not to optimize its search based on the
assumption that it is searching a Unix-like file system.
This is needed when scanning DOS/Windows file
systems and CD-ROMs.</td>
</tr>
</table>

<table class="multi">
<caption class="cap">&#x8868; 18-7: find &#x547D;&#x4EE4;&#x9009;&#x9879;</caption>
<tr>
<th class="title">&#x9009;&#x9879;</th>
<th class="title">&#x63CF;&#x8FF0;</th>
</tr>
<tr>
<td valign="top" width="25%">-depth</td>
<td valign="top"> &#x6307;&#x5BFC; find &#x7A0B;&#x5E8F;&#x5148;&#x5904;&#x7406;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x518D;&#x5904;&#x7406;&#x76EE;&#x5F55;&#x81EA;&#x8EAB;&#x3002;&#x5F53;&#x6307;&#x5B9A;-delete &#x884C;&#x4E3A;&#x65F6;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;
&#x5E94;&#x7528;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x3002;</td>
</tr>
<tr>
<td valign="top">-maxdepth levels </td>
<td valign="top">&#x5F53;&#x6267;&#x884C;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x548C;&#x884C;&#x4E3A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8BBE;&#x7F6E; find &#x7A0B;&#x5E8F;&#x9677;&#x5165;&#x76EE;&#x5F55;&#x6811;&#x7684;&#x6700;&#x5927;&#x7EA7;&#x522B;&#x6570; </td>
</tr>
<tr>
<td valign="top">-mindepth levels </td>
<td valign="top">&#x5728;&#x5E94;&#x7528;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x548C;&#x884C;&#x4E3A;&#x4E4B;&#x524D;&#xFF0C;&#x8BBE;&#x7F6E; find &#x7A0B;&#x5E8F;&#x9677;&#x5165;&#x76EE;&#x5F55;&#x6570;&#x7684;&#x6700;&#x5C0F;&#x7EA7;&#x522B;&#x6570;&#x3002; </td>
</tr>
<tr>
<td valign="top">-mount </td>
<td valign="top">&#x6307;&#x5BFC; find &#x7A0B;&#x5E8F;&#x4E0D;&#x8981;&#x641C;&#x7D22;&#x6302;&#x8F7D;&#x5230;&#x5176;&#x5B83;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E0A;&#x7684;&#x76EE;&#x5F55;&#x3002;</td>
</tr>
<tr>
<td valign="top">-noleaf </td>
<td valign="top">&#x6307;&#x5BFC; find &#x7A0B;&#x5E8F;&#x4E0D;&#x8981;&#x57FA;&#x4E8E;&#x641C;&#x7D22;&#x7C7B; Unix &#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x505A;&#x51FA;&#x7684;&#x5047;&#x8BBE;&#xFF0C;&#x6765;&#x4F18;&#x5316;&#x5B83;&#x7684;&#x641C;&#x7D22;&#x3002;</td>
</tr>
</table>

<h3 id="&#x62D3;&#x5C55;&#x9605;&#x8BFB;">&#x62D3;&#x5C55;&#x9605;&#x8BFB;</h3>
<ul>
<li><p>The locate, updatedb, find, and xargs programs are all part the GNU
Project&#x2019;s findutils package. The GNU Project provides a website with
extensive on-line documentation, which is quite good and should be read if
you are using these programs in high security environments:</p>
</li>
<li><p>&#x7A0B;&#x5E8F; locate&#xFF0C;updatedb&#xFF0C;find &#x548C; xargs &#x90FD;&#x662F; GNU &#x9879;&#x76EE; findutils &#x8F6F;&#x4EF6;&#x5305;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;
&#x8FD9;&#x4E2A; GUN &#x9879;&#x76EE;&#x63D0;&#x4F9B;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x5728;&#x7EBF;&#x6587;&#x6863;&#xFF0C;&#x8FD9;&#x4E9B;&#x6587;&#x6863;&#x76F8;&#x5F53;&#x51FA;&#x8272;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5728;&#x9AD8;&#x5B89;&#x5168;&#x6027;&#x7684;
&#x73AF;&#x5883;&#x4E2D;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x8BFB;&#x8BFB;&#x8FD9;&#x4E9B;&#x6587;&#x6863;&#x3002;</p>
<p><a href="http://www.gnu.org/software/findutils/" target="_blank">http://www.gnu.org/software/findutils/</a></p>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="chap17.html" class="navigation navigation-prev " aria-label="Previous page: 17. 网络系统">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="chap19.html" class="navigation navigation-next " aria-label="Next page: 19. 归档和备份">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"layout":"book","title":"18. 查找文件","level":"1.1.18","depth":2,"next":{"title":"19. 归档和备份","level":"1.1.19","depth":2,"path":"chap19.md","ref":"chap19.md","articles":[]},"previous":{"title":"17. 网络系统","level":"1.1.17","depth":2,"path":"chap17.md","ref":"chap17.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"chap18.md","mtime":"2017-01-12T13:05:37.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-01-12T13:06:00.166Z"},"basePath":".","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

