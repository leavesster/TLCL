
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>14. 自定制 shell 提示符 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="chap15.html" />
    
    
    <link rel="prev" href="chap13.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="chap01.html">
            
                <a href="chap01.html">
            
                    
                    01. 引言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="chap02.html">
            
                <a href="chap02.html">
            
                    
                    02. 什么是 shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="chap03.html">
            
                <a href="chap03.html">
            
                    
                    03. 文件系统中跳转
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="chap04.html">
            
                <a href="chap04.html">
            
                    
                    04. 探究操作系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5" data-path="chap05.html">
            
                <a href="chap05.html">
            
                    
                    05. 操作文件和目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6" data-path="chap06.html">
            
                <a href="chap06.html">
            
                    
                    06. 使用命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7" data-path="chap07.html">
            
                <a href="chap07.html">
            
                    
                    07. 重定向
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8" data-path="chap08.html">
            
                <a href="chap08.html">
            
                    
                    08. 从 shell 眼中看世界
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.9" data-path="chap09.html">
            
                <a href="chap09.html">
            
                    
                    09. 键盘高级操作技巧
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.10" data-path="chap10.html">
            
                <a href="chap10.html">
            
                    
                    10. 权限
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.11" data-path="chap11.html">
            
                <a href="chap11.html">
            
                    
                    11. 进程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.12" data-path="chap12.html">
            
                <a href="chap12.html">
            
                    
                    12. shell 环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.13" data-path="chap13.html">
            
                <a href="chap13.html">
            
                    
                    13. vi 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.1.14" data-path="chap14.html">
            
                <a href="chap14.html">
            
                    
                    14. 自定制 shell 提示符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.15" data-path="chap15.html">
            
                <a href="chap15.html">
            
                    
                    15. 软件包管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.16" data-path="chap16.html">
            
                <a href="chap16.html">
            
                    
                    16. 存储媒介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.17" data-path="chap17.html">
            
                <a href="chap17.html">
            
                    
                    17. 网络系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.18" data-path="chap18.html">
            
                <a href="chap18.html">
            
                    
                    18. 查找文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.19" data-path="chap19.html">
            
                <a href="chap19.html">
            
                    
                    19. 归档和备份
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.20" data-path="chap20.html">
            
                <a href="chap20.html">
            
                    
                    20. 正则表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.21" data-path="chap21.html">
            
                <a href="chap21.html">
            
                    
                    21. 文本处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.22" data-path="chap22.html">
            
                <a href="chap22.html">
            
                    
                    22. 格式化输出
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.23" data-path="chap23.html">
            
                <a href="chap23.html">
            
                    
                    23. 打印
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.24" data-path="chap24.html">
            
                <a href="chap24.html">
            
                    
                    24. 编译程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.25" data-path="chap25.html">
            
                <a href="chap25.html">
            
                    
                    25. 编写第一个 Shell 脚本
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.26" data-path="chap26.html">
            
                <a href="chap26.html">
            
                    
                    26. 启动一个项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.27" data-path="chap27.html">
            
                <a href="chap27.html">
            
                    
                    27. 自顶向下设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.28" data-path="chap28.html">
            
                <a href="chap28.html">
            
                    
                    28. 流程控制：if 分支结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.29" data-path="chap29.html">
            
                <a href="chap29.html">
            
                    
                    29. 读取键盘输入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.30" data-path="chap30.html">
            
                <a href="chap30.html">
            
                    
                    30. 流程控制：while/until 循环
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.31" data-path="chap31.html">
            
                <a href="chap31.html">
            
                    
                    31. 疑难排解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.32" data-path="chap32.html">
            
                <a href="chap32.html">
            
                    
                    32. 流程控制：case 分支
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.33" data-path="chap33.html">
            
                <a href="chap33.html">
            
                    
                    33. 位置参数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.34" data-path="chap34.html">
            
                <a href="chap34.html">
            
                    
                    34. 流程控制：for 循环
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.35" data-path="chap35.html">
            
                <a href="chap35.html">
            
                    
                    35. 字符串和数字
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.36" data-path="chap36.html">
            
                <a href="chap36.html">
            
                    
                    36. 数组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.37" data-path="chap37.html">
            
                <a href="chap37.html">
            
                    
                    37. 奇珍异宝
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >14. 自定制 shell 提示符</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p>In this chapter we will look at a seemingly trivial detail &#x2014; our shell prompt. This
examination will reveal some of the inner workings of the shell and the terminal emulator
program itself.</p>
<p>&#x5728;&#x8FD9;&#x4E00;&#x7AE0;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4F1A;&#x770B;&#x4E00;&#x4E0B;&#x8868;&#x9762;&#x4E0A;&#x770B;&#x6765;&#x5F88;&#x7410;&#x788E;&#x7684;&#x7EC6;&#x8282;&#xFF0D;shell &#x63D0;&#x793A;&#x7B26;&#x3002;&#x4F46;&#x8FD9;&#x4F1A;&#x63ED;&#x793A;&#x4E00;&#x4E9B;&#x5185;&#x90E8; shell &#x548C;
&#x7EC8;&#x7AEF;&#x4EFF;&#x771F;&#x5668;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x3002;</p>
<p>Like so many things in Linux, the shell prompt is highly configurable, and while we have
pretty much taken it for granted, the prompt is a really useful device once we learn how
to control it.</p>
<p>&#x548C; Linux &#x5185;&#x7684;&#x8BB8;&#x591A;&#x7A0B;&#x5E8F;&#x4E00;&#x6837;&#xFF0C;shell &#x63D0;&#x793A;&#x7B26;&#x662F;&#x53EF;&#x9AD8;&#x5EA6;&#x914D;&#x7F6E;&#x7684;&#xFF0C;&#x867D;&#x7136;&#x6211;&#x4EEC;&#x628A;&#x5B83;&#x76F8;&#x5F53;&#x591A;&#x5730;&#x770B;&#x4F5C;&#x662F;&#x7406;&#x6240;&#x5F53;&#x7136;&#x7684;&#xFF0C;
&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x4E00;&#x65E6;&#x5B66;&#x4F1A;&#x4E86;&#x600E;&#x6837;&#x63A7;&#x5236;&#x5B83;&#xFF0C;shell &#x63D0;&#x793A;&#x7B26;&#x662F;&#x4E00;&#x4E2A;&#x771F;&#x6B63;&#x6709;&#x7528;&#x7684;&#x8BBE;&#x5907;&#x3002;</p>
<p>Anatomy Of A Prompt</p>
<h3 id="&#x89E3;&#x5256;&#x4E00;&#x4E2A;&#x63D0;&#x793A;&#x7B26;">&#x89E3;&#x5256;&#x4E00;&#x4E2A;&#x63D0;&#x793A;&#x7B26;</h3>
<p>Our default prompt looks something like this:</p>
<p>&#x6211;&#x4EEC;&#x9ED8;&#x8BA4;&#x7684;&#x63D0;&#x793A;&#x7B26;&#x770B;&#x8D77;&#x6765;&#x50CF;&#x8FD9;&#x6837;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$
</code></pre><p>Notice that it contains our user name, our host name and our current working directory,
but how did it get that way? Very simply, it turns out. The prompt is defined by an
environment variable named PS1 (short for &#x201C;prompt string one&#x201D;). We can view the
contents of PS1 with the echo command:</p>
<p>&#x6CE8;&#x610F;&#x5B83;&#x5305;&#x542B;&#x6211;&#x4EEC;&#x7684;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x4E3B;&#x673A;&#x540D;&#x548C;&#x5F53;&#x524D;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x53C8;&#x662F;&#x600E;&#x6837;&#x5F97;&#x5230;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#x7684;&#x5462;&#xFF1F;
&#x7ED3;&#x679C;&#x8BC1;&#x660E;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;&#x63D0;&#x793A;&#x7B26;&#x662F;&#x7531;&#x4E00;&#x4E2A;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x7684;&#xFF0C;&#x53EB;&#x505A; PS1&#xFF08;&#x662F;&#x201C;prompt string one&#x201D;
&#x7684;&#x7B80;&#x5199;&#xFF09;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; echo &#x547D;&#x4EE4;&#x6765;&#x67E5;&#x770B; PS1&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<pre><code>[me@linuxbox ~]$ echo $PS1
[\u@\h \W]\$
</code></pre><hr>
<p>Note: Don&apos;t worry if your results are not exactly the same as the example above.
Every Linux distribution defines the prompt string a little differently, some quite
exotically.</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x4F60; shell &#x63D0;&#x793A;&#x7B26;&#x7684;&#x5185;&#x5BB9;&#x548C;&#x4E0A;&#x4F8B;&#x4E0D;&#x662F;&#x4E00;&#x6A21;&#x4E00;&#x6837;&#xFF0C;&#x4E5F;&#x4E0D;&#x5FC5;&#x62C5;&#x5FC3;&#x3002;&#x6BCF;&#x4E2A; Linux &#x53D1;&#x884C;&#x7248;
&#x5B9A;&#x4E49;&#x7684;&#x63D0;&#x793A;&#x7B26;&#x7A0D;&#x5FAE;&#x6709;&#x70B9;&#x4E0D;&#x540C;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x4E9B;&#x76F8;&#x5F53;&#x5F02;&#x4E4E;&#x5BFB;&#x5E38;&#x3002;</p>
<hr>
<p>From the results, we can see that PS1 contains a few of the characters we see in our
prompt such as the brackets, the at-sign, and the dollar sign, but the rest are a mystery.
The astute among us will recognize these as backslash-escaped special characters like
those we saw in Chapter 8. Here is a partial list of the characters that the shell treats
specially in the prompt string:</p>
<p>&#x4ECE;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x90A3;&#x4E2A; PS1 &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x8FD9;&#x6837;&#x7684;&#x5B57;&#x7B26;&#xFF0C;&#x6BD4;&#x65B9;&#x8BF4;&#x4E2D;&#x62EC;&#x53F7;&#xFF0C;@&#x7B26;&#x53F7;&#xFF0C;&#x548C;&#x7F8E;&#x5143;&#x7B26;&#x53F7;&#xFF0C;
&#x4F46;&#x662F;&#x5269;&#x4F59;&#x90E8;&#x5206;&#x5C31;&#x662F;&#x4E2A;&#x8C1C;&#x3002;&#x6211;&#x4EEC;&#x4E2D;&#x4E00;&#x4E9B;&#x673A;&#x654F;&#x7684;&#x4EBA;&#x4F1A;&#x628A;&#x8FD9;&#x4E9B;&#x770B;&#x4F5C;&#x662F;&#x7531;&#x53CD;&#x659C;&#x6760;&#x8F6C;&#x4E49;&#x7684;&#x7279;&#x6B8A;&#x5B57;&#x7B26;&#xFF0C;&#x5C31;&#x50CF;&#x6211;&#x4EEC;
&#x5728;&#x7B2C;&#x516B;&#x7AE0;&#x4E2D;&#x770B;&#x5230;&#x7684;&#x4E00;&#x6837;&#x3002;&#x8FD9;&#x91CC;&#x662F;&#x4E00;&#x90E8;&#x5206;&#x5B57;&#x7B26;&#x5217;&#x8868;&#xFF0C;&#x5728;&#x63D0;&#x793A;&#x7B26;&#x4E2D; shell &#x4F1A;&#x7279;&#x6B8A;&#x5BF9;&#x5F85;&#x8FD9;&#x4E9B;&#x5B57;&#x7B26;&#xFF1A;</p>
<table class="multi">
<caption class="cap">Table 14-1: Escape Codes Used In Shell Prompts</caption>
<tr>
<th class="title">Sequence</th>
<th class="title">Value Displayed</th>
</tr>
<tr>
<td valign="top" width="20%">\a</td>
<td valign="top">ASCII bell. This makes the computer beep when it is encountered.</td>
</tr>
<tr>
<td valign="top">\d</td>
<td valign="top">Current date in day, month, date format. For example, &#x201C;Mon
May 26.&quot;</td>
</tr>
<tr>
<td valign="top">\h</td>
<td valign="top">Host name of the local machine minus the trailing domain name.</td>
</tr>
<tr>
<td valign="top">\H</td>
<td valign="top">Full host name.</td>
</tr>
<tr>
<td valign="top">\j</td>
<td valign="top">Number of jobs running in the current shell session.</td>
</tr>
<tr>
<td valign="top">\l</td>
<td valign="top">Name of the current terminal device.</td>
</tr>
<tr>
<td valign="top">\n</td>
<td valign="top">A newline character.</td>
</tr>
<tr>
<td valign="top">\r</td>
<td valign="top">A carriage return.</td>
</tr>
<tr>
<td valign="top">\s</td>
<td valign="top">Name of the shell program.</td>
</tr>
<tr>
<td valign="top">\t</td>
<td valign="top">Current time in 24 hour hours:minutes:seconds format.
</td>
</tr>
<tr>
<td valign="top">\T</td>
<td valign="top">Current time in 12 hour format.
</td>
</tr>
<tr>
<td valign="top">\@</td>
<td valign="top">Current time in 12 hour AM/PM format.</td>
</tr>
<tr>
<td valign="top">\A</td>
<td valign="top">Current time in 24 hour hours:minutes format.</td>
</tr>
<tr>
<td valign="top">\u</td>
<td valign="top">User name of the current user.</td>
</tr>
<tr>
<td valign="top">\v</td>
<td valign="top">Version number of the shell.
</td>
</tr>
<tr>
<td valign="top">\V</td>
<td valign="top">Version and release numbers of the shell.</td>
</tr>
<tr>
<td valign="top">\w</td>
<td valign="top">Name of the current working directory.
</td>
</tr>
<tr>
<td valign="top">\W</td>
<td valign="top">Last part of the current working directory name.</td>
</tr>
<tr>
<td valign="top">\!</td>
<td valign="top">History number of the current command.
</td>
</tr>
<tr>
<td valign="top">\#</td>
<td valign="top">Number of commands entered into this shell session.
</td>
</tr>
<tr>
<td valign="top">\$</td>
<td valign="top">This displays a &#x201C;$&#x201D; character unless you have superuser privileges.
In that case, it displays a &#x201C;#&#x201D; instead.
</td>
</tr>
<tr>
<td valign="top">\[</td>
<td valign="top">Signals the start of a series of one or more non-printing characters.
This is used to embed non-printing control characters which
manipulate the terminal emulator in some way, such as moving the
cursor or changing text colors.
</td>
</tr>
<tr>
<td valign="top">\]</td>
<td valign="top">Signals the end of a non-printing character sequence.
</td>
</tr>
</table>

<table class="multi">
<caption class="cap">&#x8868;14-1: Shell &#x63D0;&#x793A;&#x7B26;&#x4E2D;&#x7528;&#x5230;&#x7684;&#x8F6C;&#x4E49;&#x5B57;&#x7B26;</caption>
<tr>
<th class="title">&#x5E8F;&#x5217;</th>
<th class="title">&#x663E;&#x793A;&#x503C;</th>
</tr>
<tr>
<td valign="top" width="20%">\a</td>
<td valign="top">&#x4EE5; ASCII &#x683C;&#x5F0F;&#x7F16;&#x7801;&#x7684;&#x94C3;&#x58F0; . &#x5F53;&#x9047;&#x5230;&#x8FD9;&#x4E2A;&#x8F6C;&#x4E49;&#x5E8F;&#x5217;&#x65F6;&#xFF0C;&#x8BA1;&#x7B97;&#x673A;&#x4F1A;&#x53D1;&#x51FA;&#x55E1;&#x55E1;&#x7684;&#x54CD;&#x58F0;&#x3002;</td>
</tr>
<tr>
<td valign="top">\d</td>
<td valign="top">&#x4EE5;&#x65E5;&#xFF0C;&#x6708;&#xFF0C;&#x5929;&#x683C;&#x5F0F;&#x6765;&#x8868;&#x793A;&#x5F53;&#x524D;&#x65E5;&#x671F;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x201C;Mon May 26.&#x201D;</td>
</tr>
<tr>
<td valign="top">\h</td>
<td valign="top">&#x672C;&#x5730;&#x673A;&#x7684;&#x4E3B;&#x673A;&#x540D;&#xFF0C;&#x4F46;&#x4E0D;&#x5E26;&#x672B;&#x5C3E;&#x7684;&#x57DF;&#x540D;&#x3002;</td>
</tr>
<tr>
<td valign="top">\H</td>
<td valign="top">&#x5B8C;&#x6574;&#x7684;&#x4E3B;&#x673A;&#x540D;&#x3002;</td>
</tr>
<tr>
<td valign="top">\j</td>
<td valign="top">&#x8FD0;&#x884C;&#x5728;&#x5F53;&#x524D; shell &#x4F1A;&#x8BDD;&#x4E2D;&#x7684;&#x5DE5;&#x4F5C;&#x6570;&#x3002;</td>
</tr>
<tr>
<td valign="top">\l</td>
<td valign="top">&#x5F53;&#x524D;&#x7EC8;&#x7AEF;&#x8BBE;&#x5907;&#x540D;&#x3002;</td>
</tr>
<tr>
<td valign="top">\n</td>
<td valign="top">&#x4E00;&#x4E2A;&#x6362;&#x884C;&#x7B26;&#x3002;</td>
</tr>
<tr>
<td valign="top">\r</td>
<td valign="top">&#x4E00;&#x4E2A;&#x56DE;&#x8F66;&#x7B26;&#x3002;</td>
</tr>
<tr>
<td valign="top">\s</td>
<td valign="top">shell &#x7A0B;&#x5E8F;&#x540D;&#x3002;</td>
</tr>
<tr>
<td valign="top">\t</td>
<td valign="top">&#x4EE5;24&#x5C0F;&#x65F6;&#x5236;&#xFF0C;hours:minutes:seconds &#x7684;&#x683C;&#x5F0F;&#x8868;&#x793A;&#x5F53;&#x524D;&#x65F6;&#x95F4;.</td>
</tr>
<tr>
<td valign="top">\T</td>
<td valign="top">&#x4EE5;12&#x5C0F;&#x65F6;&#x5236;&#x8868;&#x793A;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x3002; </td>
</tr>
<tr>
<td valign="top">\@</td>
<td valign="top">&#x4EE5;12&#x5C0F;&#x65F6;&#x5236;&#xFF0C;AM/PM &#x683C;&#x5F0F;&#x6765;&#x8868;&#x793A;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x3002;</td>
</tr>
<tr>
<td valign="top">\A</td>
<td valign="top">&#x4EE5;24&#x5C0F;&#x65F6;&#x5236;&#xFF0C;hours:minutes &#x683C;&#x5F0F;&#x8868;&#x793A;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x3002;</td>
</tr>
<tr>
<td valign="top">\u</td>
<td valign="top">&#x5F53;&#x524D;&#x7528;&#x6237;&#x540D;&#x3002;</td>
</tr>
<tr>
<td valign="top">\v</td>
<td valign="top">shell &#x7A0B;&#x5E8F;&#x7684;&#x7248;&#x672C;&#x53F7;&#x3002;</td>
</tr>
<tr>
<td valign="top">\V</td>
<td valign="top">Version and release numbers of the shell.</td>
</tr>
<tr>
<td valign="top">\w</td>
<td valign="top">&#x5F53;&#x524D;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x540D;&#x3002;</td>
</tr>
<tr>
<td valign="top">\W</td>
<td valign="top">&#x5F53;&#x524D;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x540D;&#x7684;&#x6700;&#x540E;&#x90E8;&#x5206;&#x3002;</td>
</tr>
<tr>
<td valign="top">\!</td>
<td valign="top">&#x5F53;&#x524D;&#x547D;&#x4EE4;&#x7684;&#x5386;&#x53F2;&#x53F7;&#x3002;
</td>
</tr>
<tr>
<td valign="top">\#</td>
<td valign="top">&#x5F53;&#x524D; shell &#x4F1A;&#x8BDD;&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#x6570;&#x3002;
</td>
</tr>
<tr>
<td valign="top">\$</td>
<td valign="top">&#x8FD9;&#x4F1A;&#x663E;&#x793A;&#x4E00;&#x4E2A;&quot;$&quot;&#x5B57;&#x7B26;&#xFF0C;&#x9664;&#x975E;&#x4F60;&#x62E5;&#x6709;&#x8D85;&#x7EA7;&#x7528;&#x6237;&#x6743;&#x9650;&#x3002;&#x5728;&#x90A3;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;
&#x5B83;&#x4F1A;&#x663E;&#x793A;&#x4E00;&#x4E2A;&quot;#&quot;&#x5B57;&#x7B26;&#x3002;</td>
</tr>
<tr>
<td valign="top">\[</td>
<td valign="top">&#x6807;&#x5FD7;&#x7740;&#x4E00;&#x7CFB;&#x5217;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x975E;&#x6253;&#x5370;&#x5B57;&#x7B26;&#x7684;&#x5F00;&#x59CB;&#x3002;&#x8FD9;&#x88AB;&#x7528;&#x6765;&#x5D4C;&#x5165;&#x975E;&#x6253;&#x5370;
&#x7684;&#x63A7;&#x5236;&#x5B57;&#x7B26;&#xFF0C;&#x8FD9;&#x4E9B;&#x5B57;&#x7B26;&#x4EE5;&#x67D0;&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x64CD;&#x4F5C;&#x7EC8;&#x7AEF;&#x4EFF;&#x771F;&#x5668;&#xFF0C;&#x6BD4;&#x65B9;&#x8BF4;&#x79FB;&#x52A8;&#x5149;&#x6807;&#x6216;&#x8005;&#x662F;&#x66F4;&#x6539;&#x6587;&#x672C;&#x989C;&#x8272;&#x3002;
</td>
</tr>
<tr>
<td valign="top">\]</td>
<td valign="top">&#x6807;&#x5FD7;&#x7740;&#x975E;&#x6253;&#x5370;&#x5B57;&#x7B26;&#x5E8F;&#x5217;&#x7ED3;&#x675F;&#x3002; </td>
</tr>
</table>

<p>Trying Some Alternate Prompt Designs</p>
<h3 id="&#x8BD5;&#x8BD5;&#x4E00;&#x4E9B;&#x53EF;&#x66FF;&#x4EE3;&#x7684;&#x63D0;&#x793A;&#x7B26;&#x8BBE;&#x8BA1;">&#x8BD5;&#x8BD5;&#x4E00;&#x4E9B;&#x53EF;&#x66FF;&#x4EE3;&#x7684;&#x63D0;&#x793A;&#x7B26;&#x8BBE;&#x8BA1;</h3>
<p>With this list of special characters, we can change the prompt to see the effect. First,
we&apos;ll back up the existing string so we can restore it later. To do this, we will copy the
existing string into another shell variable that we create ourselves:</p>
<p>&#x53C2;&#x7167;&#x8FD9;&#x4E2A;&#x7279;&#x6B8A;&#x5B57;&#x7B26;&#x5217;&#x8868;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x66F4;&#x6539;&#x63D0;&#x793A;&#x7B26;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x6548;&#x679C;&#x3002;&#x9996;&#x5148;&#xFF0C;
&#x6211;&#x4EEC;&#x628A;&#x539F;&#x6765;&#x63D0;&#x793A;&#x7B26;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5185;&#x5BB9;&#x5907;&#x4EFD;&#x4E00;&#x4E0B;&#xFF0C;&#x4EE5;&#x5907;&#x4E4B;&#x540E;&#x6062;&#x590D;&#x539F;&#x8C8C;&#x3002;&#x4E3A;&#x4E86;&#x5B8C;&#x6210;&#x5907;&#x4EFD;&#xFF0C;
&#x6211;&#x4EEC;&#x628A;&#x5DF2;&#x6709;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x590D;&#x5236;&#x5230;&#x53E6;&#x4E00;&#x4E2A; shell &#x53D8;&#x91CF;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x662F;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x521B;&#x9020;&#x7684;&#x3002;</p>
<pre><code>[me@linuxbox ~]$ ps1_old=&quot;$PS1&quot;
</code></pre><p>We create a new variable called ps1_old and assign the value of PS1 to it. We can
verify that the string has been copied with the echo command:</p>
<p>&#x6211;&#x4EEC;&#x65B0;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x53EB;&#x505A; ps1_old &#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x5E76;&#x628A;&#x53D8;&#x91CF; PS1&#x7684;&#x503C;&#x8D4B; ps1_old&#x3002;&#x901A;&#x8FC7; echo &#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x8BC1;&#x660E;
&#x6211;&#x4EEC;&#x7684;&#x786E;&#x590D;&#x5236;&#x4E86; PS1&#x7684;&#x503C;&#x3002;</p>
<pre><code>[me@linuxbox ~]$ echo $ps1_old
[\u@\h \W]\$
</code></pre><p>We can restore the original prompt at any time during our terminal session by simply
reversing the process:</p>
<p>&#x5728;&#x7EC8;&#x7AEF;&#x4F1A;&#x8BDD;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x5728;&#x4EFB;&#x4E00;&#x65F6;&#x95F4;&#x590D;&#x539F;&#x63D0;&#x793A;&#x7B26;&#xFF0C;&#x53EA;&#x8981;&#x7B80;&#x5355;&#x5730;&#x53CD;&#x5411;&#x64CD;&#x4F5C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>
<pre><code>[me@linuxbox ~]$ PS1=&quot;$ps1_old&quot;
</code></pre><p>Now that we are ready to proceed, let&apos;s see what happens if we have an empty prompt
string:</p>
<p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x51C6;&#x5907;&#x5F00;&#x59CB;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x770B;&#x770B;&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ PS1=
</code></pre><p>If we assign nothing to the prompt string, we get nothing. No prompt string at all! The
prompt is still there, but displays nothing, just as we asked it to. Since this is kind of
disconcerting to look at, we&apos;ll replace it with a minimal prompt:</p>
<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x7ED9;&#x63D0;&#x793A;&#x5B57;&#x7B26;&#x4E32;&#x8D4B;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x4EC0;&#x4E48;&#x4E5F;&#x5F97;&#x4E0D;&#x5230;&#x3002;&#x6839;&#x672C;&#x6CA1;&#x6709;&#x63D0;&#x793A;&#x5B57;&#x7B26;&#x4E32;&#xFF01;&#x63D0;&#x793A;&#x7B26;&#x4ECD;&#x7136;&#x5728;&#x90A3;&#x91CC;&#xFF0C;
&#x4F46;&#x662F;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x663E;&#x793A;&#xFF0C;&#x6B63;&#x5982;&#x6211;&#x4EEC;&#x6240;&#x8981;&#x6C42;&#x7684;&#x90A3;&#x6837;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x7528;&#x4E00;&#x4E2A;&#x6700;&#x5C0F;&#x7684;&#x63D0;&#x793A;&#x7B26;&#x6765;&#x4EE3;&#x66FF;&#x5B83;&#xFF1A;</p>
<pre><code>PS1=&quot;\$ &quot;
</code></pre><p>That&apos;s better. At least now we can see what we are doing. Notice the trailing space
within the double quotes. This provides the space between the dollar sign and the cursor
when the prompt is displayed.</p>
<p>&#x8FD9;&#x6837;&#x8981;&#x597D;&#x4E00;&#x4E9B;&#x3002;&#x81F3;&#x5C11;&#x80FD;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x5728;&#x505A;&#x4EC0;&#x4E48;&#x3002;&#x6CE8;&#x610F;&#x53CC;&#x5F15;&#x53F7;&#x4E2D;&#x672B;&#x5C3E;&#x7684;&#x7A7A;&#x683C;&#x3002;&#x5F53;&#x63D0;&#x793A;&#x7B26;&#x663E;&#x793A;&#x7684;&#x65F6;&#x5019;&#xFF0C;
&#x8FD9;&#x4E2A;&#x7A7A;&#x683C;&#x628A;&#x7F8E;&#x5143;&#x7B26;&#x53F7;&#x548C;&#x5149;&#x6807;&#x5206;&#x79BB;&#x5F00;&#x3002;</p>
<p>Let&apos;s add a bell to our prompt:</p>
<p>&#x5728;&#x63D0;&#x793A;&#x7B26;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x54CD;&#x94C3;&#xFF1A;</p>
<pre><code>$ PS1=&quot;\a\$ &quot;
</code></pre><p>Now we should hear a beep each time the prompt is displayed. This could get annoying,
but it might be useful if we needed notification when an especially long-running
command has been executed.</p>
<p>&#x73B0;&#x5728;&#x6BCF;&#x6B21;&#x63D0;&#x793A;&#x7B26;&#x663E;&#x793A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x80FD;&#x542C;&#x5230;&#x55E1;&#x55E1;&#x58F0;&#x3002;&#x8FD9;&#x4F1A;&#x53D8;&#x5F97;&#x5F88;&#x70E6;&#x4EBA;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x53EF;&#x80FD;&#x4F1A;
&#x5F88;&#x6709;&#x7528;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5F53;&#x4E00;&#x4E2A;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#x7684;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x5B8C;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x5F97;&#x5230;&#x901A;&#x77E5;&#x3002;</p>
<p>Next, let&apos;s try to make an informative prompt with some host name and time-of-day
information:</p>
<p>&#x4E0B;&#x4E00;&#x6B65;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x8BD5;&#x7740;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4FE1;&#x606F;&#x4E30;&#x5BCC;&#x7684;&#x63D0;&#x793A;&#x7B26;&#xFF0C;&#x5305;&#x542B;&#x4E3B;&#x673A;&#x540D;&#x548C;&#x5F53;&#x5929;&#x65F6;&#x95F4;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>
<pre><code>$ PS1=&quot;\A \h \$ &quot;
17:33 linuxbox $
</code></pre><p>Try out the other sequences listed in the table above and see if you can come up with a
brilliant new prompt.</p>
<p>&#x8BD5;&#x8BD5;&#x5176;&#x4ED6;&#x4E0A;&#x8868;&#x4E2D;&#x5217;&#x51FA;&#x7684;&#x8F6C;&#x4E49;&#x5E8F;&#x5217;&#xFF0C;&#x770B;&#x770B;&#x4F60;&#x80FD;&#x5426;&#x60F3;&#x51FA;&#x7CBE;&#x5F69;&#x7684;&#x65B0;&#x63D0;&#x793A;&#x7B26;&#x3002;</p>
<p>Adding Color</p>
<h3 id="&#x6DFB;&#x52A0;&#x989C;&#x8272;">&#x6DFB;&#x52A0;&#x989C;&#x8272;</h3>
<p>Most terminal emulator programs respond to certain non-printing character sequences to
control such things as character attributes (like color, bold text and the dreaded blinking
text) and cursor position. We&apos;ll cover cursor position in a little bit, but first we&apos;ll look at
color.</p>
<p>&#x5927;&#x591A;&#x6570;&#x7EC8;&#x7AEF;&#x4EFF;&#x771F;&#x5668;&#x7A0B;&#x5E8F;&#x652F;&#x6301;&#x4E00;&#x5B9A;&#x7684;&#x975E;&#x6253;&#x5370;&#x5B57;&#x7B26;&#x5E8F;&#x5217;&#x6765;&#x63A7;&#x5236;&#xFF0C;&#x6BD4;&#x65B9;&#x8BF4;&#x5B57;&#x7B26;&#x5C5E;&#x6027;&#xFF08;&#x50CF;&#x989C;&#x8272;&#xFF0C;&#x9ED1;&#x4F53;&#x548C;&#x53EF;&#x6015;&#x7684;&#x95EA;&#x70C1;&#xFF09;
&#x548C;&#x5149;&#x6807;&#x4F4D;&#x7F6E;&#x3002;&#x6211;&#x4EEC;&#x4F1A;&#x66F4;&#x6DF1;&#x5165;&#x5730;&#x8BA8;&#x8BBA;&#x5149;&#x6807;&#x4F4D;&#x7F6E;&#xFF0C;&#x4F46;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x8981;&#x770B;&#x4E00;&#x4E0B;&#x5B57;&#x4F53;&#x989C;&#x8272;&#x3002;</p>
<blockquote>
<p>Terminal Confusion</p>
<p>&#x6DF7;&#x4E71;&#x7684;&#x7EC8;&#x7AEF;&#x65F6;&#x4EE3;</p>
<p>Back in ancient times, when terminals were hooked to remote computers, there
were many competing brands of terminals and they all worked differently. They
had different keyboards and they all had different ways of interpreting control
information. Unix and Unix-like systems have two rather complex subsystems to
deal with the babel of terminal control (called termcap and terminfo). If
you look in the deepest recesses of your terminal emulator settings you may find
a setting for the type of terminal emulation.</p>
<p>&#x56DE;&#x6EAF;&#x5230;&#x7EC8;&#x7AEF;&#x8FDE;&#x63A5;&#x5230;&#x8FDC;&#x7AEF;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x65F6;&#x4EE3;&#xFF0C;&#x6709;&#x8BB8;&#x591A;&#x7ADE;&#x4E89;&#x7684;&#x7EC8;&#x7AEF;&#x54C1;&#x724C;&#xFF0C;&#x5B83;&#x4EEC;&#x5404;&#x81EA;&#x5DE5;&#x4F5C;&#x4E0D;&#x540C;&#x3002;
&#x5B83;&#x4EEC;&#x6709;&#x7740;&#x4E0D;&#x540C;&#x7684;&#x952E;&#x76D8;&#xFF0C;&#x4EE5;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x89E3;&#x91CA;&#x63A7;&#x5236;&#x4FE1;&#x606F;&#x3002;Unix &#x548C;&#x7C7B; Unix &#x7684;&#x7CFB;&#x7EDF;&#x6709;&#x4E24;&#x4E2A;
&#x76F8;&#x5F53;&#x590D;&#x6742;&#x7684;&#x5B50;&#x7CFB;&#x7EDF;&#x6765;&#x5904;&#x7406;&#x7EC8;&#x7AEF;&#x63A7;&#x5236;&#x9886;&#x57DF;&#x7684;&#x6DF7;&#x4E71;&#x5C40;&#x9762;&#xFF08;&#x79F0;&#x4E3A; termcap &#x548C; terminfo&#xFF09;&#x3002;&#x5982;&#x679C;&#x4F60;
&#x67E5;&#x770B;&#x4E00;&#x4E0B;&#x7EC8;&#x7AEF;&#x4EFF;&#x771F;&#x5668;&#x6700;&#x5E95;&#x5C42;&#x7684;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x5173;&#x4E8E;&#x7EC8;&#x7AEF;&#x4EFF;&#x771F;&#x5668;&#x7C7B;&#x578B;&#x7684;&#x8BBE;&#x7F6E;&#x3002;</p>
<p>In an effort to make terminals speak some sort of common language, the
American National Standards Institute (ANSI) developed a standard set of
character sequences to control video terminals. Old time DOS users will
remember the ANSI.SYS file that was used to enable interpretation of these
codes.</p>
<p>&#x4E3A;&#x4E86;&#x52AA;&#x529B;&#x4F7F;&#x6240;&#x6709;&#x7684;&#x7EC8;&#x7AEF;&#x90FD;&#x8BB2;&#x67D0;&#x79CD;&#x901A;&#x7528;&#x8BED;&#x8A00;&#xFF0C;&#x7F8E;&#x56FD;&#x56FD;&#x5BB6;&#x6807;&#x51C6;&#x59D4;&#x5458;&#x4F1A;&#xFF08;ANSI&#xFF09;&#x5236;&#x5B9A;&#x4E86;
&#x4E00;&#x5957;&#x6807;&#x51C6;&#x7684;&#x5B57;&#x7B26;&#x5E8F;&#x5217;&#x96C6;&#x5408;&#x6765;&#x63A7;&#x5236;&#x89C6;&#x9891;&#x7EC8;&#x7AEF;&#x3002;&#x539F;&#x5148; DOS &#x7528;&#x6237;&#x4F1A;&#x8BB0;&#x5F97; ANSI.SYS &#x6587;&#x4EF6;&#xFF0C;
&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x6765;&#x4F7F;&#x8FD9;&#x4E9B;&#x7F16;&#x7801;&#x89E3;&#x91CA;&#x751F;&#x6548;&#x7684;&#x6587;&#x4EF6;&#x3002;</p>
</blockquote>
<p>Character color is controlled by sending the terminal emulator an ANSI escape code
embedded in the stream of characters to be displayed. The control code does not &#x201C;print
out&#x201D; on the display, rather it is interpreted by the terminal as an instruction. As we saw in
the table above, the [ and ] sequences are used to encapsulate non-printing characters.
An ANSI escape code begins with an octal 033 (the code generated by the escape key)
followed by an optional character attribute followed by an instruction. For example, the
code to set the text color to normal (attribute = 0), black text is:</p>
<p>&#x5B57;&#x7B26;&#x989C;&#x8272;&#x662F;&#x7531;&#x53D1;&#x9001;&#x5230;&#x7EC8;&#x7AEF;&#x4EFF;&#x771F;&#x5668;&#x7684;&#x4E00;&#x4E2A;&#x5D4C;&#x5165;&#x5230;&#x4E86;&#x8981;&#x663E;&#x793A;&#x7684;&#x5B57;&#x7B26;&#x6D41;&#x4E2D;&#x7684; ANSI &#x8F6C;&#x4E49;&#x7F16;&#x7801;&#x6765;&#x63A7;&#x5236;&#x7684;&#x3002;
&#x8FD9;&#x4E2A;&#x63A7;&#x5236;&#x7F16;&#x7801;&#x4E0D;&#x4F1A;&#x201C;&#x6253;&#x5370;&#x201D;&#x5230;&#x5C4F;&#x5E55;&#x4E0A;&#xFF0C;&#x800C;&#x662F;&#x88AB;&#x7EC8;&#x7AEF;&#x89E3;&#x91CA;&#x4E3A;&#x4E00;&#x4E2A;&#x6307;&#x4EE4;&#x3002;&#x6B63;&#x5982;&#x6211;&#x4EEC;&#x5728;&#x4E0A;&#x8868;&#x770B;&#x5230;&#x7684;&#x5B57;&#x7B26;&#x5E8F;&#x5217;&#xFF0C;
&#x8FD9;&#x4E2A; [ &#x548C; ] &#x5E8F;&#x5217;&#x88AB;&#x7528;&#x6765;&#x5C01;&#x88C5;&#x8FD9;&#x4E9B;&#x975E;&#x6253;&#x5370;&#x5B57;&#x7B26;&#x3002;&#x4E00;&#x4E2A; ANSI &#x8F6C;&#x4E49;&#x7F16;&#x7801;&#x4EE5;&#x4E00;&#x4E2A;&#x516B;&#x8FDB;&#x5236;033&#xFF08;&#x8FD9;&#x4E2A;&#x7F16;&#x7801;&#x662F;&#x7531;
&#x9000;&#x51FA;&#x6309;&#x952E;&#x4EA7;&#x751F;&#x7684;&#xFF09;&#x5F00;&#x5934;&#xFF0C;&#x5176;&#x540E;&#x8DDF;&#x7740;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x7684;&#x5B57;&#x7B26;&#x5C5E;&#x6027;&#xFF0C;&#x5728;&#x4E4B;&#x540E;&#x662F;&#x4E00;&#x4E2A;&#x6307;&#x4EE4;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x628A;&#x6587;&#x672C;&#x989C;&#x8272;
&#x8BBE;&#x4E3A;&#x6B63;&#x5E38;&#xFF08;attribute = 0&#xFF09;&#xFF0C;&#x9ED1;&#x8272;&#x6587;&#x672C;&#x7684;&#x7F16;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>\033[0;30m
</code></pre><p>Here is a table of available text colors. Notice that the colors are divided into two groups,
differentiated by the application of the bold character attribute (1) which creates the
appearance of &#x201C;light&#x201D; colors:</p>
<p>&#x8FD9;&#x91CC;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x7528;&#x7684;&#x6587;&#x672C;&#x989C;&#x8272;&#x5217;&#x8868;&#x3002;&#x6CE8;&#x610F;&#x8FD9;&#x4E9B;&#x989C;&#x8272;&#x88AB;&#x5206;&#x4E3A;&#x4E24;&#x7EC4;&#xFF0C;&#x7531;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7C97;&#x4F53;&#x5B57;&#x7B26;&#x5C5E;&#x6027;&#xFF08;1&#xFF09;
&#x5206;&#x5316;&#x5F00;&#x6765;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x53EF;&#x4EE5;&#x63CF;&#x7ED8;&#x51FA;&#x201C;&#x6D45;&#x201D;&#x8272;&#x6587;&#x672C;&#x3002;</p>
<table class="multi">
<caption class="cap">Table 14-2: Escape Sequences Used To Set Text Colors</caption>
<tr>
<th class="title">Sequence</th>
<th class="title">Text Color</th>
<th class="title">Sequence</th>
<th class="title">Text Color</th>
</tr>
<tr>
<td valign="top">\033[0;30m</td>
<td valign="top">Black</td>
<td valign="top">\033[1;30m </td>
<td valign="top">Dark Gray</td>
</tr>
<tr>
<td valign="top">\033[0;31m</td>
<td valign="top">Red</td>
<td valign="top">\033[1;31m </td>
<td valign="top">Light Red</td>
</tr>
<tr>
<td valign="top">\033[0;32m </td>
<td valign="top">Green</td>
<td valign="top">\033[1;32m </td>
<td valign="top">Light Green</td>
</tr>
<tr>
<td valign="top">\033[0;33m </td>
<td valign="top">Brown</td>
<td valign="top">\033[1;33m </td>
<td valign="top">Yellow</td>
</tr>
<tr>
<td valign="top">\033[0;34m </td>
<td valign="top">Blue</td>
<td valign="top">\033[1;34m </td>
<td valign="top">Light Blue</td>
</tr>
<tr>
<td valign="top">\033[0;35m </td>
<td valign="top">Purple</td>
<td valign="top">\033[1;35m </td>
<td valign="top">Light Purple</td>
</tr>
<tr>
<td valign="top">\033[0;36m </td>
<td valign="top">Cyan</td>
<td valign="top">\033[1;36m </td>
<td valign="top">Light Cyan</td>
</tr>
<tr>
<td valign="top">\033[0;37m </td>
<td valign="top">Light Gray</td>
<td valign="top">\033[1;37m </td>
<td valign="top">White</td>
</tr>
</table>

<table class="multi">
<caption class="cap">&#x8868;14-2: &#x7528;&#x8F6C;&#x4E49;&#x5E8F;&#x5217;&#x6765;&#x8BBE;&#x7F6E;&#x6587;&#x672C;&#x989C;&#x8272;</caption>
<tr>
<th class="title">&#x5E8F;&#x5217;</th>
<th class="title">&#x6587;&#x672C;&#x989C;&#x8272;</th>
<th class="title">&#x5E8F;&#x5217;</th>
<th class="title">&#x6587;&#x672C;&#x989C;&#x8272;</th>
</tr>
<tr>
<td valign="top">\033[0;30m</td>
<td valign="top">&#x9ED1;&#x8272;</td>
<td valign="top">\033[1;30m </td>
<td valign="top">&#x6DF1;&#x7070;&#x8272;</td>
</tr>
<tr>
<td valign="top">\033[0;31m</td>
<td valign="top">&#x7EA2;&#x8272;</td>
<td valign="top">\033[1;31m </td>
<td valign="top">&#x6D45;&#x7EA2;&#x8272;</td>
</tr>
<tr>
<td valign="top">\033[0;32m </td>
<td valign="top">&#x7EFF;&#x8272;</td>
<td valign="top">\033[1;32m </td>
<td valign="top">&#x6D45;&#x7EFF;&#x8272;</td>
</tr>
<tr>
<td valign="top">\033[0;33m </td>
<td valign="top">&#x68D5;&#x8272;</td>
<td valign="top">\033[1;33m </td>
<td valign="top">&#x9EC4;&#x8272;</td>
</tr>
<tr>
<td valign="top">\033[0;34m </td>
<td valign="top">&#x84DD;&#x8272;</td>
<td valign="top">\033[1;34m </td>
<td valign="top">&#x6D45;&#x84DD;&#x8272;</td>
</tr>
<tr>
<td valign="top">\033[0;35m </td>
<td valign="top">&#x7C89;&#x7EA2;</td>
<td valign="top">\033[1;35m </td>
<td valign="top">&#x6D45;&#x7C89;&#x8272;</td>
</tr>
<tr>
<td valign="top">\033[0;36m </td>
<td valign="top">&#x9752;&#x8272;</td>
<td valign="top">\033[1;36m </td>
<td valign="top">&#x6D45;&#x9752;&#x8272;</td>
</tr>
<tr>
<td valign="top">\033[0;37m </td>
<td valign="top">&#x6D45;&#x7070;&#x8272;</td>
<td valign="top">\033[1;37m </td>
<td valign="top">&#x767D;&#x8272;</td>
</tr>
</table>

<p>Let&apos;s try to make a red prompt. We&apos;ll insert the escape code at the beginning:</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x8BD5;&#x7740;&#x5236;&#x4F5C;&#x4E00;&#x4E2A;&#x7EA2;&#x8272;&#x63D0;&#x793A;&#x7B26;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x5728;&#x5F00;&#x5934;&#x52A0;&#x5165;&#x8F6C;&#x4E49;&#x7F16;&#x7801;&#xFF1A;</p>
<pre><code>&lt;me@linuxbox ~&gt;$ PS1=&apos;\[\033[0;31m\]&lt;\u@\h \W&gt;\$&apos;
&lt;me@linuxbox ~&gt;$
</code></pre><p>That works, but notice that all the text that we type after the prompt is also red. To fix
this, we will add another escape code to the end of the prompt that tells the terminal
emulator to return to the previous color:</p>
<p>&#x6211;&#x4EEC;&#x7684;&#x63D0;&#x793A;&#x7B26;&#x751F;&#x6548;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6CE8;&#x610F;&#x6211;&#x4EEC;&#x5728;&#x63D0;&#x793A;&#x7B26;&#x4E4B;&#x540E;&#x8F93;&#x5165;&#x7684;&#x6587;&#x672C;&#x4E5F;&#x662F;&#x7EA2;&#x8272;&#x7684;&#x3002;&#x4E3A;&#x4E86;&#x4FEE;&#x6539;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;
&#x6211;&#x4EEC;&#x5C06;&#x6DFB;&#x52A0;&#x53E6;&#x4E00;&#x4E2A;&#x8F6C;&#x4E49;&#x7F16;&#x7801;&#x5230;&#x8FD9;&#x4E2A;&#x63D0;&#x793A;&#x7B26;&#x7684;&#x672B;&#x5C3E;&#x6765;&#x544A;&#x8BC9;&#x7EC8;&#x7AEF;&#x4EFF;&#x771F;&#x5668;&#x6062;&#x590D;&#x5230;&#x539F;&#x6765;&#x7684;&#x989C;&#x8272;&#x3002;</p>
<pre><code>&lt;me@linuxbox ~&gt;$ PS1=&apos;\[\033[0;31m\]&lt;\u@\h \W&gt;\$\[\033[0m\]&apos;
&lt;me@linuxbox ~&gt;$
</code></pre><p>That&apos;s better!</p>
<p>&#x8FD9;&#x770B;&#x8D77;&#x6765;&#x8981;&#x597D;&#x4E9B;&#xFF01;</p>
<p>It&apos;s also possible to set the text background color using the codes listed below. The
background colors do not support the bold attribute.</p>
<p>&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x8981;&#x8BBE;&#x7F6E;&#x6587;&#x672C;&#x7684;&#x80CC;&#x666F;&#x989C;&#x8272;&#xFF0C;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x5217;&#x51FA;&#x7684;&#x8F6C;&#x4E49;&#x7F16;&#x7801;&#x3002;&#x8FD9;&#x4E2A;&#x80CC;&#x666F;&#x989C;&#x8272;&#x4E0D;&#x652F;&#x6301;&#x9ED1;&#x4F53;&#x5C5E;&#x6027;&#x3002;</p>
<table class="multi">
<caption class="cap">Table 14-3: Escape Sequences Used To Set Background Color</caption>
<tr>
<td valign="top">\033[0;40m </td>
<td valign="top">Blue</td>
<td valign="top">\033[1;44m </td>
<td valign="top">Black</td>
</tr>
<tr>
<td valign="top">\033[0;41m </td>
<td valign="top">Red</td>
<td valign="top">\033[1;45m </td>
<td valign="top">Purple</td>
</tr>
<tr>
<td valign="top">\033[0;42m </td>
<td valign="top">Green</td>
<td valign="top">\033[1;46m </td>
<td valign="top">Cyan</td>
</tr>
<tr>
<td valign="top">\033[0;43m </td>
<td valign="top">Brown</td>
<td valign="top">\033[1;47m </td>
<td valign="top">Light Gray</td>
</tr>
</table>

<table class="multi">
<caption class="cap">&#x8868;14-3: &#x7528;&#x8F6C;&#x4E49;&#x5E8F;&#x5217;&#x6765;&#x8BBE;&#x7F6E;&#x80CC;&#x666F;&#x989C;&#x8272;</caption>
<tr>
<td valign="top">\033[0;40m </td>
<td valign="top">&#x84DD;&#x8272;</td>
<td valign="top">\033[1;44m </td>
<td valign="top">&#x9ED1;&#x8272;</td>
</tr>
<tr>
<td valign="top">\033[0;41m </td>
<td valign="top">&#x7EA2;&#x8272;</td>
<td valign="top">\033[1;45m </td>
<td valign="top">&#x7D2B;&#x8272;</td>
</tr>
<tr>
<td valign="top">\033[0;42m </td>
<td valign="top">&#x7EFF;&#x8272;</td>
<td valign="top">\033[1;46m </td>
<td valign="top">&#x9752;&#x8272;</td>
</tr>
<tr>
<td valign="top">\033[0;43m </td>
<td valign="top">&#x68D5;&#x8272;</td>
<td valign="top">\033[1;47m </td>
<td valign="top">&#x6D45;&#x7070;&#x8272;</td>
</tr>
</table>

<p>We can create a prompt with a red background by applying a simple change to the first
escape code:</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5E26;&#x6709;&#x7EA2;&#x8272;&#x80CC;&#x666F;&#x7684;&#x63D0;&#x793A;&#x7B26;&#xFF0C;&#x53EA;&#x662F;&#x5BF9;&#x7B2C;&#x4E00;&#x4E2A;&#x8F6C;&#x4E49;&#x7F16;&#x7801;&#x505A;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4FEE;&#x6539;&#x3002;</p>
<pre><code>&lt;me@linuxbox ~&gt;$ PS1=&apos;\[\033[0;41m\]&lt;\u@\h \W&gt;\$\[\033[0m\] &apos;
&lt;me@linuxbox ~&gt;$
</code></pre><p>Try out the color codes and see what you can create!</p>
<p>&#x8BD5;&#x8BD5;&#x8FD9;&#x4E9B;&#x989C;&#x8272;&#x7F16;&#x7801;&#xFF0C;&#x770B;&#x770B;&#x4F60;&#x80FD;&#x5B9A;&#x5236;&#x51FA;&#x600E;&#x6837;&#x7684;&#x63D0;&#x793A;&#x7B26;&#xFF01;</p>
<hr>
<p>Note: Besides the normal (0) and bold (1) character attributes, text may also be
given underscore (4), blinking (5), and inverse (7) attributes as well. In the
interests of good taste, many terminal emulators refuse to honor the blinking
attribute, however.</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x9664;&#x4E86;&#x6B63;&#x5E38;&#x7684; (0) &#x548C;&#x9ED1;&#x4F53; (1) &#x5B57;&#x7B26;&#x5C5E;&#x6027;&#x4E4B;&#x5916;&#xFF0C;&#x6587;&#x672C;&#x4E5F;&#x53EF;&#x4EE5;&#x5177;&#x6709;&#x4E0B;&#x5212;&#x7EBF; (4)&#xFF0C;&#x95EA;&#x70C1; (5)&#xFF0C;
&#x548C;&#x53CD;&#x5411; (7) &#x5C5E;&#x6027;&#x3002;&#x4E3A;&#x4E86;&#x62E5;&#x6709;&#x597D;&#x54C1;&#x5473;&#xFF0C;&#x7136;&#x800C;&#xFF0C;&#x8BB8;&#x591A;&#x7EC8;&#x7AEF;&#x4EFF;&#x771F;&#x5668;&#x62D2;&#x7EDD;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x95EA;&#x70C1;&#x5C5E;&#x6027;&#x3002;</p>
<hr>
<p>Moving The Cursor</p>
<h3 id="&#x79FB;&#x52A8;&#x5149;&#x6807;">&#x79FB;&#x52A8;&#x5149;&#x6807;</h3>
<p>Escape codes can be used to position the cursor. This is commonly used to provide a
clock or some other kind of information at a different location on the screen such as an
upper corner each time the prompt is drawn. Here is a list of the escape codes that
position the cursor:</p>
<p>&#x8F6C;&#x4E49;&#x7F16;&#x7801;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B9A;&#x4F4D;&#x5149;&#x6807;&#x3002;&#x8FD9;&#x4E9B;&#x7F16;&#x7801;&#x88AB;&#x666E;&#x904D;&#x5730;&#x7528;&#x6765;&#xFF0C;&#x6BCF;&#x6B21;&#x5F53;&#x63D0;&#x793A;&#x7B26;&#x51FA;&#x73B0;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x5728;&#x5C4F;&#x5E55;&#x7684;&#x4E0D;&#x540C;&#x4F4D;&#x7F6E;
&#x6BD4;&#x5982;&#x8BF4;&#x4E0A;&#x9762;&#x4E00;&#x4E2A;&#x89D2;&#x843D;&#xFF0C;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x65F6;&#x949F;&#x6216;&#x8005;&#x5176;&#x5B83;&#x4E00;&#x4E9B;&#x4FE1;&#x606F;&#x3002;&#x8FD9;&#x91CC;&#x662F;&#x4E00;&#x7CFB;&#x5217;&#x7528;&#x6765;&#x5B9A;&#x4F4D;&#x5149;&#x6807;&#x7684;&#x8F6C;&#x4E49;&#x7F16;&#x7801;&#xFF1A;</p>
<table class="multi">
<caption class="cap">Table 14-4: Cursor Movement Escape Sequences</caption>
<tr>
<th class="title">Escape Code</th>
<th class="title">Action</th>
</tr>
<tr>
<td valign="top" width="25%">\033[l;cH </td>
<td valign="top">Move the cursor to line l and column c.  </td>
</tr>
<tr>
<td valign="top">\033[nA </td>
<td valign="top">Move the cursor up n lines.  </td>
</tr>
<tr>
<td valign="top">\033[nB </td>
<td valign="top">Move the cursor down n lines.  </td>
</tr>
<tr>
<td valign="top">\033[nC </td>
<td valign="top">Move the cursor forward n characters.  </td>
</tr>
<tr>
<td valign="top">\033[nD </td>
<td valign="top">Move the cursor backward n characters.  </td>
</tr>
<tr>
<td valign="top">\033[2J </td>
<td valign="top">Clear the screen and move the cursor to the upper left corner (line
0, column 0).
</td>
</tr>
<tr>
<td valign="top">\033[K </td>
<td valign="top">Clear from the cursor position to the end of the current line.  </td>
</tr>
<tr>
<td valign="top">\033[s </td>
<td valign="top">Store the current cursor position.  </td>
</tr>
<tr>
<td valign="top">\033[u </td>
<td valign="top">Recall the stored cursor position.  </td>
</tr>
</table>

<table class="multi">
<caption class="cap">&#x8868;14-4: &#x5149;&#x6807;&#x79FB;&#x52A8;&#x8F6C;&#x4E49;&#x5E8F;&#x5217;</caption>
<tr>
<th class="title">&#x8F6C;&#x4E49;&#x7F16;&#x7801;</th>
<th class="title">&#x884C;&#x52A8;</th>
</tr>
<tr>
<td valign="top" width="25%">\033[l;cH </td>
<td valign="top">&#x628A;&#x5149;&#x6807;&#x79FB;&#x5230;&#x7B2C; l &#x884C;&#xFF0C;&#x7B2C; c &#x5217;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[nA </td>
<td valign="top">&#x628A;&#x5149;&#x6807;&#x5411;&#x4E0A;&#x79FB;&#x52A8; n &#x884C;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[nB </td>
<td valign="top">&#x628A;&#x5149;&#x6807;&#x5411;&#x4E0B;&#x79FB;&#x52A8; n &#x884C;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[nC </td>
<td valign="top">&#x628A;&#x5149;&#x6807;&#x5411;&#x524D;&#x79FB;&#x52A8; n &#x4E2A;&#x5B57;&#x7B26;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[nD </td>
<td valign="top">&#x628A;&#x5149;&#x6807;&#x5411;&#x540E;&#x79FB;&#x52A8; n &#x4E2A;&#x5B57;&#x7B26;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[2J </td>
<td valign="top">&#x6E05;&#x7A7A;&#x5C4F;&#x5E55;&#xFF0C;&#x628A;&#x5149;&#x6807;&#x79FB;&#x5230;&#x5DE6;&#x4E0A;&#x89D2;&#xFF08;&#x7B2C;&#x96F6;&#x884C;&#xFF0C;&#x7B2C;&#x96F6;&#x5217;&#xFF09;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[K </td>
<td valign="top">&#x6E05;&#x7A7A;&#x4ECE;&#x5149;&#x6807;&#x4F4D;&#x7F6E;&#x5230;&#x5F53;&#x524D;&#x884C;&#x672B;&#x7684;&#x5185;&#x5BB9;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[s </td>
<td valign="top">&#x5B58;&#x50A8;&#x5F53;&#x524D;&#x5149;&#x6807;&#x4F4D;&#x7F6E;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[u </td>
<td valign="top">&#x5524;&#x9192;&#x4E4B;&#x524D;&#x5B58;&#x50A8;&#x7684;&#x5149;&#x6807;&#x4F4D;&#x7F6E;&#x3002;</td>
</tr>
</table>

<p>Using the codes above, we&apos;ll construct a prompt that draws a red bar at the top of the
screen containing a clock (rendered in yellow text) each time the prompt is displayed.
The code for the prompt is this formidable looking string:</p>
<p>&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x7684;&#x7F16;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x63D0;&#x793A;&#x7B26;&#xFF0C;&#x6BCF;&#x6B21;&#x5F53;&#x8FD9;&#x4E2A;&#x63D0;&#x793A;&#x7B26;&#x51FA;&#x73B0;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x5728;&#x5C4F;&#x5E55;&#x7684;&#x4E0A;&#x65B9;&#x753B;&#x51FA;&#x4E00;&#x4E2A;
&#x5305;&#x542B;&#x65F6;&#x949F;&#xFF08;&#x7531;&#x9EC4;&#x8272;&#x6587;&#x672C;&#x6E32;&#x67D3;&#xFF09;&#x7684;&#x7EA2;&#x8272;&#x957F;&#x6761;&#x3002;&#x63D0;&#x793A;&#x7B26;&#x7684;&#x7F16;&#x7801;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;&#x770B;&#x8D77;&#x6765;&#x4EE4;&#x4EBA;&#x656C;&#x754F;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</p>
<pre><code>PS1=&apos;\[\033[s\033[0;0H\033[0;41m\033[K\033[1;33m\t\033[0m\033[u\]
&lt;\u@\h \W&gt;\$ &apos;
</code></pre><p>Let&apos;s take a look at each part of the string to see what it does:</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x5206;&#x522B;&#x770B;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x6BCF;&#x4E00;&#x90E8;&#x5206;&#x6240;&#x8868;&#x793A;&#x7684;&#x610F;&#x601D;&#xFF1A;</p>
<table class="multi">
<tr>
<th class="title">Squence</th>
<th class="title">Action</th>
</tr>
<tr>
<td valign="top" width="25%">\[</td>
<td valign="top">Begins a non-printing character sequence. The real purpose of
this is to allow bash to correctly calculate the size of the
visible prompt. Without this, command line editing features
will improperly position the cursor.  </td>
</tr>
<tr>
<td valign="top">\033[s </td>
<td valign="top">Store the cursor position. This is needed to return to the prompt
location after the bar and clock have been drawn at the top of
the screen. Be aware that some terminal emulators do not
honor this code.  </td>
</tr>
<tr>
<td valign="top">\033[0;0H </td>
<td valign="top">Move the cursor to the upper left corner, which is line zero,
column zero.  </td>
</tr>
<tr>
<td valign="top">\033[0;41m </td>
<td valign="top">Set the background color to red.  </td>
</tr>
<tr>
<td valign="top">\033[K </td>
<td valign="top">Clear from the current cursor location (the top left corner) to
the end of the line. Since the background color is now red, the
line is cleared to that color creating our bar. Note that clearing
to the end of the line does not change the cursor position, which
remains at the upper left corner.
</td>
</tr>
<tr>
<td valign="top">\033[1;33m </td>
<td valign="top">Set the text color to yellow.  </td>
</tr>
<tr>
<td valign="top">\t </td>
<td valign="top">Display the current time. While this is a &#x201C;printing&#x201D; element, we
still include it in the non-printing portion of the prompt, since
we don&apos;t want bash to include the clock when calculating the
true size of the displayed prompt.  </td>
</tr>
<tr>
<td valign="top">\033[0m </td>
<td valign="top">Turn off color. This affects both the text and background.  </td>
</tr>
<tr>
<td valign="top">\033[u </td>
<td valign="top">Restore the cursor position saved earlier.  </td>
</tr>
<tr>
<td valign="top">\] </td>
<td valign="top">End non-printing characters sequence.  </td>
</tr>
<tr>
<td valign="top">&lt;\u@\h \W&gt;\$ </td>
<td valign="top">Prompt string.</td>
</tr>
</table>

<table class="multi">
<tr>
<th class="title">&#x5E8F;&#x5217;</th>
<th class="title">&#x884C;&#x52A8;</th>
</tr>
<tr>
<td valign="top" width="25%">\[</td>
<td valign="top">&#x5F00;&#x59CB;&#x4E00;&#x4E2A;&#x975E;&#x6253;&#x5370;&#x5B57;&#x7B26;&#x5E8F;&#x5217;&#x3002;&#x5176;&#x771F;&#x6B63;&#x7684;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x8BA9; bash
&#x80FD;&#x591F;&#x6B63;&#x786E;&#x5730;&#x8BA1;&#x7B97;&#x63D0;&#x793A;&#x7B26;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x8F6C;&#x4E49;&#x5B57;&#x7B26;&#x7684;&#x8BDD;&#xFF0C;&#x547D;&#x4EE4;&#x884C;&#x7F16;&#x8F91;
&#x529F;&#x80FD;&#x4F1A;&#x5F04;&#x9519;&#x5149;&#x6807;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[s </td>
<td valign="top">&#x5B58;&#x50A8;&#x5149;&#x6807;&#x4F4D;&#x7F6E;&#x3002;&#x8FD9;&#x4E2A;&#x7528;&#x6765;&#x4F7F;&#x5149;&#x6807;&#x80FD;&#x56DE;&#x5230;&#x539F;&#x6765;&#x63D0;&#x793A;&#x7B26;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;
&#x5F53;&#x957F;&#x6761;&#x548C;&#x65F6;&#x949F;&#x663E;&#x793A;&#x5230;&#x5C4F;&#x5E55;&#x4E0A;&#x65B9;&#x4E4B;&#x540E;&#x3002;&#x5F53;&#x5FC3;&#x4E00;&#x4E9B;
&#x7EC8;&#x7AEF;&#x4EFF;&#x771F;&#x5668;&#x4E0D;&#x63A8;&#x5D07;&#x8FD9;&#x4E2A;&#x7F16;&#x7801;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[0;0H </td>
<td valign="top"> &#x628A;&#x5149;&#x6807;&#x79FB;&#x5230;&#x5C4F;&#x5E55;&#x5DE6;&#x4E0A;&#x89D2;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x7B2C;&#x96F6;&#x884C;&#xFF0C;&#x7B2C;&#x96F6;&#x5217;&#x7684;&#x4F4D;&#x7F6E;&#x3002; </td>
</tr>
<tr>
<td valign="top">\033[0;41m </td>
<td valign="top">&#x628A;&#x80CC;&#x666F;&#x8BBE;&#x7F6E;&#x4E3A;&#x7EA2;&#x8272;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[K </td>
<td valign="top">&#x6E05;&#x7A7A;&#x4ECE;&#x5F53;&#x524D;&#x5149;&#x6807;&#x4F4D;&#x7F6E;&#x5230;&#x884C;&#x672B;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x56E0;&#x4E3A;&#x73B0;&#x5728;
&#x80CC;&#x666F;&#x989C;&#x8272;&#x662F;&#x7EA2;&#x8272;&#xFF0C;&#x5219;&#x88AB;&#x6E05;&#x7A7A;&#x884C;&#x80CC;&#x666F;&#x6210;&#x4E3A;&#x7EA2;&#x8272;&#xFF0C;&#x4EE5;&#x6B64;&#x6765;&#x521B;&#x5EFA;&#x957F;&#x6761;&#x3002;&#x6CE8;&#x610F;&#x867D;&#x7136;&#x4E00;&#x76F4;&#x6E05;&#x7A7A;&#x5230;&#x884C;&#x672B;&#xFF0C;
&#x4F46;&#x662F;&#x4E0D;&#x6539;&#x53D8;&#x5149;&#x6807;&#x4F4D;&#x7F6E;&#xFF0C;&#x5B83;&#x4ECD;&#x7136;&#x5728;&#x5C4F;&#x5E55;&#x5DE6;&#x4E0A;&#x89D2;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[1;33m </td>
<td valign="top">&#x628A;&#x6587;&#x672C;&#x989C;&#x8272;&#x8BBE;&#x4E3A;&#x9EC4;&#x8272;&#x3002;</td>
</tr>
<tr>
<td valign="top">\t </td>
<td valign="top">&#x663E;&#x793A;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x3002;&#x867D;&#x7136;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x201C;&#x6253;&#x5370;&#x201D;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x4ECD;&#x628A;&#x5B83;&#x5305;&#x542B;&#x5728;&#x63D0;&#x793A;&#x7B26;&#x7684;&#x975E;&#x6253;&#x5370;&#x90E8;&#x5206;&#xFF0C;
&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x4E0D;&#x60F3; bash &#x5728;&#x8BA1;&#x7B97;&#x53EF;&#x89C1;&#x63D0;&#x793A;&#x7B26;&#x7684;&#x771F;&#x6B63;&#x5927;&#x5C0F;&#x65F6;&#x5305;&#x62EC;&#x8FD9;&#x4E2A;&#x65F6;&#x949F;&#x5728;&#x5185;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[0m </td>
<td valign="top">&#x5173;&#x95ED;&#x989C;&#x8272;&#x8BBE;&#x7F6E;&#x3002;&#x8FD9;&#x5BF9;&#x6587;&#x672C;&#x548C;&#x80CC;&#x666F;&#x90FD;&#x8D77;&#x4F5C;&#x7528;&#x3002;</td>
</tr>
<tr>
<td valign="top">\033[u </td>
<td valign="top">&#x6062;&#x590D;&#x5230;&#x4E4B;&#x524D;&#x4FDD;&#x5B58;&#x8FC7;&#x7684;&#x5149;&#x6807;&#x4F4D;&#x7F6E;&#x5904;&#x3002;</td>
</tr>
<tr>
<td valign="top">\] </td>
<td valign="top">&#x7ED3;&#x675F;&#x975E;&#x6253;&#x5370;&#x5B57;&#x7B26;&#x5E8F;&#x5217;&#x3002;</td>
</tr>
<tr>
<td valign="top"><\u@\h \w="">\$ </\u@\h></td>
<td valign="top">&#x63D0;&#x793A;&#x7B26;&#x5B57;&#x7B26;&#x4E32;&#x3002;</td>
</tr>
</table>

<p>Saving The Prompt</p>
<h3 id="&#x4FDD;&#x5B58;&#x63D0;&#x793A;&#x7B26;">&#x4FDD;&#x5B58;&#x63D0;&#x793A;&#x7B26;</h3>
<p>Obviously, we don&apos;t want to be typing that monster all the time, so we&apos;ll want to store our
prompt someplace. We can make the prompt permanent by adding it to our .bashrc
file. To do so, add these two lines to the file:</p>
<p>&#x663E;&#x7136;&#x5730;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x60F3;&#x603B;&#x662F;&#x6572;&#x5165;&#x90A3;&#x4E2A;&#x602A;&#x7269;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5C06;&#x8981;&#x628A;&#x8FD9;&#x4E2A;&#x63D0;&#x793A;&#x7B26;&#x5B58;&#x50A8;&#x5728;&#x67D0;&#x4E2A;&#x5730;&#x65B9;&#x3002;&#x901A;&#x8FC7;&#x628A;&#x5B83;
&#x6DFB;&#x52A0;&#x5230;&#x6211;&#x4EEC;&#x7684;.bashrc &#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x8FD9;&#x4E2A;&#x63D0;&#x793A;&#x7B26;&#x6C38;&#x4E45;&#x5B58;&#x5728;&#x3002;&#x4E3A;&#x4E86;&#x8FBE;&#x5230;&#x76EE;&#x7684;&#xFF0C;&#x628A;&#x4E0B;&#x9762;&#x8FD9;&#x4E24;&#x884C;&#x6DFB;&#x52A0;&#x5230;.bashrc &#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>
<pre><code>PS1=&apos;\[\033[s\033[0;0H\033[0;41m\033[K\033[1;33m\t\033[0m\033[u\]&lt;\u@\h \W&gt;\$ &apos;
export PS1
</code></pre><p>Summing Up</p>
<h3 id="&#x603B;&#x7ED3;&#x5F52;&#x7EB3;">&#x603B;&#x7ED3;&#x5F52;&#x7EB3;</h3>
<p>Believe it or not, there is much more that can be done with prompts involving shell
functions and scripts that we haven&apos;t covered here, but this is a good start. Not everyone
will care enough to change the prompt, since the default prompt is usually satisfactory.
But for those of us who like to tinker, the shell provides the opportunity for many hours
of trivial fun.</p>
<p>&#x4E0D;&#x7BA1;&#x4F60;&#x4FE1;&#x4E0D;&#x4FE1;&#xFF0C;&#x8FD8;&#x6709;&#x8BB8;&#x591A;&#x4E8B;&#x60C5;&#x53EF;&#x4EE5;&#x7531;&#x63D0;&#x793A;&#x7B26;&#x6765;&#x5B8C;&#x6210;&#xFF0C;&#x6D89;&#x53CA;&#x5230;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x91CC;&#x6CA1;&#x6709;&#x8BBA;&#x53CA;&#x7684; shell &#x51FD;&#x6570;&#x548C;&#x811A;&#x672C;&#xFF0C;
&#x4F46;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x5F00;&#x59CB;&#x3002;&#x5E76;&#x4E0D;&#x662F;&#x6BCF;&#x4E2A;&#x4EBA;&#x90FD;&#x4F1A;&#x82B1;&#x5FC3;&#x601D;&#x6765;&#x66F4;&#x6539;&#x63D0;&#x793A;&#x7B26;&#xFF0C;&#x56E0;&#x4E3A;&#x901A;&#x5E38;&#x9ED8;&#x8BA4;&#x7684;&#x63D0;&#x793A;&#x7B26;&#x5C31;&#x5F88;&#x8BA9;&#x4EBA;&#x6EE1;&#x610F;&#x3002;
&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x8FD9;&#x4E9B;&#x559C;&#x6B22;&#x601D;&#x8003;&#x7684;&#x4EBA;&#x4EEC;&#x6765;&#x8BF4;&#xFF0C;shell &#x5374;&#x63D0;&#x4F9B;&#x4E86;&#x8BB8;&#x591A;&#x5236;&#x9020;&#x7410;&#x788E;&#x4E50;&#x8DA3;&#x7684;&#x673A;&#x4F1A;&#x3002;</p>
<p>Further Reading</p>
<h3 id="&#x62D3;&#x5C55;&#x9605;&#x8BFB;">&#x62D3;&#x5C55;&#x9605;&#x8BFB;</h3>
<ul>
<li><p>The Bash Prompt HOWTO from the Linux Documentation Project provides a
pretty complete discussion of what the shell prompt can be made to do. It is
available at:</p>
</li>
<li><p>The Bash Prompt HOWTO &#x6765;&#x81EA;&#x4E8E; Linux &#x6587;&#x6863;&#x5DE5;&#x7A0B;&#xFF0C;&#x5BF9; shell &#x63D0;&#x793A;&#x7B26;&#x7684;&#x7528;&#x9014;&#x8FDB;&#x884C;&#x4E86;&#x76F8;&#x5F53;
&#x5B8C;&#x5907;&#x7684;&#x8BBA;&#x8FF0;&#x3002;&#x53EF;&#x5728;&#x4EE5;&#x4E0B;&#x94FE;&#x63A5;&#x4E2D;&#x5F97;&#x5230;&#xFF1A;</p>
<p>  <a href="http://tldp.org/HOWTO/Bash-Prompt-HOWTO/" target="_blank">http://tldp.org/HOWTO/Bash-Prompt-HOWTO/</a></p>
</li>
<li><p>Wikipedia has a good article on the ANSI Escape Codes:</p>
</li>
<li><p>Wikipedia &#x4E0A;&#x6709;&#x4E00;&#x7BC7;&#x5173;&#x4E8E; ANSI Escape Codes &#x7684;&#x597D;&#x6587;&#x7AE0;&#xFF1A;</p>
<p>  <a href="http://en.wikipedia.org/wiki/ANSI_escape_code" target="_blank">http://en.wikipedia.org/wiki/ANSI_escape_code</a></p>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="chap13.html" class="navigation navigation-prev " aria-label="Previous page: 13. vi 简介">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="chap15.html" class="navigation navigation-next " aria-label="Next page: 15. 软件包管理">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"layout":"book","title":"14. 自定制 shell 提示符","level":"1.1.14","depth":2,"next":{"title":"15. 软件包管理","level":"1.1.15","depth":2,"path":"chap15.md","ref":"chap15.md","articles":[]},"previous":{"title":"13. vi 简介","level":"1.1.13","depth":2,"path":"chap13.md","ref":"chap13.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"chap14.md","mtime":"2017-01-12T13:21:32.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-01-12T13:23:32.099Z"},"basePath":".","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

