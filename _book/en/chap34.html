
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>34. 流程控制：for 循环 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="chap35.html" />
    
    
    <link rel="prev" href="chap33.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="chap01.html">
            
                <a href="chap01.html">
            
                    
                    01. 引言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="chap02.html">
            
                <a href="chap02.html">
            
                    
                    02. 什么是 shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="chap03.html">
            
                <a href="chap03.html">
            
                    
                    03. 文件系统中跳转
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="chap04.html">
            
                <a href="chap04.html">
            
                    
                    04. 探究操作系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5" data-path="chap05.html">
            
                <a href="chap05.html">
            
                    
                    05. 操作文件和目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6" data-path="chap06.html">
            
                <a href="chap06.html">
            
                    
                    06. 使用命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7" data-path="chap07.html">
            
                <a href="chap07.html">
            
                    
                    07. 重定向
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8" data-path="chap08.html">
            
                <a href="chap08.html">
            
                    
                    08. 从 shell 眼中看世界
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.9" data-path="chap09.html">
            
                <a href="chap09.html">
            
                    
                    09. 键盘高级操作技巧
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.10" data-path="chap10.html">
            
                <a href="chap10.html">
            
                    
                    10. 权限
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.11" data-path="chap11.html">
            
                <a href="chap11.html">
            
                    
                    11. 进程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.12" data-path="chap12.html">
            
                <a href="chap12.html">
            
                    
                    12. shell 环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.13" data-path="chap13.html">
            
                <a href="chap13.html">
            
                    
                    13. vi 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.14" data-path="chap14.html">
            
                <a href="chap14.html">
            
                    
                    14. 自定制 shell 提示符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.15" data-path="chap15.html">
            
                <a href="chap15.html">
            
                    
                    15. 软件包管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.16" data-path="chap16.html">
            
                <a href="chap16.html">
            
                    
                    16. 存储媒介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.17" data-path="chap17.html">
            
                <a href="chap17.html">
            
                    
                    17. 网络系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.18" data-path="chap18.html">
            
                <a href="chap18.html">
            
                    
                    18. 查找文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.19" data-path="chap19.html">
            
                <a href="chap19.html">
            
                    
                    19. 归档和备份
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.20" data-path="chap20.html">
            
                <a href="chap20.html">
            
                    
                    20. 正则表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.21" data-path="chap21.html">
            
                <a href="chap21.html">
            
                    
                    21. 文本处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.22" data-path="chap22.html">
            
                <a href="chap22.html">
            
                    
                    22. 格式化输出
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.23" data-path="chap23.html">
            
                <a href="chap23.html">
            
                    
                    23. 打印
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.24" data-path="chap24.html">
            
                <a href="chap24.html">
            
                    
                    24. 编译程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.25" data-path="chap25.html">
            
                <a href="chap25.html">
            
                    
                    25. 编写第一个 Shell 脚本
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.26" data-path="chap26.html">
            
                <a href="chap26.html">
            
                    
                    26. 启动一个项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.27" data-path="chap27.html">
            
                <a href="chap27.html">
            
                    
                    27. 自顶向下设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.28" data-path="chap28.html">
            
                <a href="chap28.html">
            
                    
                    28. 流程控制：if 分支结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.29" data-path="chap29.html">
            
                <a href="chap29.html">
            
                    
                    29. 读取键盘输入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.30" data-path="chap30.html">
            
                <a href="chap30.html">
            
                    
                    30. 流程控制：while/until 循环
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.31" data-path="chap31.html">
            
                <a href="chap31.html">
            
                    
                    31. 疑难排解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.32" data-path="chap32.html">
            
                <a href="chap32.html">
            
                    
                    32. 流程控制：case 分支
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.33" data-path="chap33.html">
            
                <a href="chap33.html">
            
                    
                    33. 位置参数
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.1.34" data-path="chap34.html">
            
                <a href="chap34.html">
            
                    
                    34. 流程控制：for 循环
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.35" data-path="chap35.html">
            
                <a href="chap35.html">
            
                    
                    35. 字符串和数字
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.36" data-path="chap36.html">
            
                <a href="chap36.html">
            
                    
                    36. 数组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.37" data-path="chap37.html">
            
                <a href="chap37.html">
            
                    
                    37. 奇珍异宝
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >34. 流程控制：for 循环</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p>In this final chapter on flow control, we will look at another of the shell&#x2019;s looping constructs.
The for loop differs from the while and until loops in that it provides
a means of processing sequences during a loop. This turns out to be very useful when programming.
Accordingly, the for loop is a very popular construct in bash scripting.</p>
<p>&#x5728;&#x8FD9;&#x5173;&#x4E8E;&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#x7684;&#x6700;&#x540E;&#x4E00;&#x7AE0;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x770B;&#x770B;&#x53E6;&#x4E00;&#x79CD; shell &#x5FAA;&#x73AF;&#x6784;&#x9020;&#x3002;for &#x5FAA;&#x73AF;&#x4E0D;&#x540C;&#x4E8E; while &#x548C; until &#x5FAA;&#x73AF;&#xFF0C;&#x56E0;&#x4E3A;
&#x5728;&#x5FAA;&#x73AF;&#x4E2D;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x5904;&#x7406;&#x5E8F;&#x5217;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x8FD9;&#x5728;&#x7F16;&#x7A0B;&#x65F6;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;&#x56E0;&#x6B64;&#x5728; bash &#x811A;&#x672C;&#x4E2D;&#xFF0C;for &#x5FAA;&#x73AF;&#x662F;&#x975E;&#x5E38;&#x6D41;&#x884C;&#x7684;&#x6784;&#x9020;&#x3002;</p>
<p>A for loop is implemented, naturally enough, with the for command.
In modern versions of bash, for is available in two forms.</p>
<p>&#x5B9E;&#x73B0;&#x4E00;&#x4E2A; for &#x5FAA;&#x73AF;&#xFF0C;&#x5F88;&#x81EA;&#x7136;&#x7684;&#xFF0C;&#x8981;&#x7528; for &#x547D;&#x4EE4;&#x3002;&#x5728;&#x73B0;&#x4EE3;&#x7248;&#x7684; bash &#x4E2D;&#xFF0C;&#x6709;&#x4E24;&#x79CD;&#x53EF;&#x7528;&#x7684; for &#x5FAA;&#x73AF;&#x683C;&#x5F0F;&#x3002;</p>
<h3 id="for-&#x4F20;&#x7EDF;-shell-&#x683C;&#x5F0F;">for: &#x4F20;&#x7EDF; shell &#x683C;&#x5F0F;</h3>
<p>The original for command&#x2019;s syntax is:</p>
<p>&#x539F;&#x6765;&#x7684; for &#x547D;&#x4EE4;&#x8BED;&#x6CD5;&#x662F;&#xFF1A;</p>
<pre><code>for variable [in words]; do
    commands
done
</code></pre><p>Where variable is the name of a variable that will increment during the
execution of the loop, words is an optional list of items that will
be sequentially assigned to variable, and commands are the commands that are to
be executed on each iteration of the loop.</p>
<p>&#x8FD9;&#x91CC;&#x7684; variable &#x662F;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x5728;&#x5FAA;&#x73AF;&#x6267;&#x884C;&#x671F;&#x95F4;&#x4F1A;&#x589E;&#x52A0;&#xFF0C;words &#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x7684;&#x6761;&#x76EE;&#x5217;&#x8868;&#xFF0C;
&#x5176;&#x503C;&#x4F1A;&#x6309;&#x987A;&#x5E8F;&#x8D4B;&#x503C;&#x7ED9; variable&#xFF0C;commands &#x662F;&#x5728;&#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x8FED;&#x4EE3;&#x4E2D;&#x8981;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x3002;</p>
<p>The for command is useful on the command line. We can easily demonstrate how it works:</p>
<p>&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E2D; for &#x547D;&#x4EE4;&#x662F;&#x5F88;&#x6709;&#x7528;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x7684;&#x8BF4;&#x660E;&#x5B83;&#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ for i in A B C D; do echo $i; done
A
B
C
D
</code></pre><p>In this example, for is given a list of four words: &#x201C;A&#x201D;, &#x201C;B&#x201D;, &#x201C;C&#x201D;, and &#x201C;D&#x201D;. With a list of
four words, the loop is executed four times. Each time the loop is executed, a word is as-
signed to the variable i. Inside the loop, we have an echo command that displays the
value of i to show the assignment. As with the while and until loops, the done keyword closes the loop.</p>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;for &#x5FAA;&#x73AF;&#x6709;&#x4E00;&#x4E2A;&#x56DB;&#x4E2A;&#x5355;&#x8BCD;&#x7684;&#x5217;&#x8868;&#xFF1A;&#x201C;A&#x201D;&#xFF0C;&#x201C;B&#x201D;&#xFF0C;&#x201C;C&#x201D;&#xFF0C;&#x548C; &#x201C;D&#x201D;&#x3002;&#x7531;&#x4E8E;&#x8FD9;&#x56DB;&#x4E2A;&#x5355;&#x8BCD;&#x7684;&#x5217;&#x8868;&#xFF0C;for &#x5FAA;&#x73AF;&#x4F1A;&#x6267;&#x884C;&#x56DB;&#x6B21;&#x3002;
&#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x6267;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x5355;&#x8BCD;&#x8D4B;&#x503C;&#x7ED9;&#x53D8;&#x91CF; i&#x3002;&#x5728;&#x5FAA;&#x73AF;&#x4F53;&#x5185;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4E00;&#x4E2A; echo &#x547D;&#x4EE4;&#x4F1A;&#x663E;&#x793A; i &#x53D8;&#x91CF;&#x7684;&#x503C;&#xFF0C;&#x6765;&#x6F14;&#x793A;&#x8D4B;&#x503C;&#x7ED3;&#x679C;&#x3002;
&#x6B63;&#x5982; while &#x548C; until &#x5FAA;&#x73AF;&#xFF0C;done &#x5173;&#x952E;&#x5B57;&#x4F1A;&#x5173;&#x95ED;&#x5FAA;&#x73AF;&#x3002;</p>
<p>The really powerful feature of for is the number of interesting ways we can create the
list of words. For example, through brace expansion:</p>
<p>for &#x547D;&#x4EE4;&#x771F;&#x6B63;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;&#x662F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BB8;&#x591A;&#x6709;&#x8DA3;&#x7684;&#x65B9;&#x5F0F;&#x521B;&#x5EFA; words &#x5217;&#x8868;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x901A;&#x8FC7;&#x82B1;&#x62EC;&#x53F7;&#x5C55;&#x5F00;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ for i in {A..D}; do echo $i; done
A
B
C
D
</code></pre><p>or pathname expansion:</p>
<p>&#x6216;&#x8005;&#x8DEF;&#x5F84;&#x540D;&#x5C55;&#x5F00;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ for i in distros*.txt; do echo $i; done
distros-by-date.txt
distros-dates.txt
distros-key-names.txt
distros-key-vernums.txt
distros-names.txt
distros.txt
distros-vernums.txt
distros-versions.txt
</code></pre><p>or command substitution:</p>
<p>&#x6216;&#x8005;&#x547D;&#x4EE4;&#x66FF;&#x6362;&#xFF1A;</p>
<pre><code>#!/bin/bash
# longest-word : find longest string in a file
while [[ -n $1 ]]; do
    if [[ -r $1 ]]; then
        max_word=
        max_len=0
        for i in $(strings $1); do
            len=$(echo $i | wc -c)
            if (( len &gt; max_len )); then
                max_len=$len
                max_word=$i
            fi
        done
        echo &quot;$1: &apos;$max_word&apos; ($max_len characters)&quot;
    fi
    shift
done
</code></pre><p>In this example, we look for the longest string found within a file. When given one or
more filenames on the command line, this program uses the strings program (which is
included in the GNU binutils package) to generate a list of readable text &#x201C;words&#x201D; in each
file. The for loop processes each word in turn and determines if the current word is the
longest found so far. When the loop concludes, the longest word is displayed.</p>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x5728;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x67E5;&#x627E;&#x6700;&#x957F;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x5F53;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x7ED9;&#x51FA;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x540D;&#x7684;&#x65F6;&#x5019;&#xFF0C;
&#x8BE5;&#x7A0B;&#x5E8F;&#x4F1A;&#x4F7F;&#x7528; strings &#x7A0B;&#x5E8F;&#xFF08;&#x5176;&#x5305;&#x542B;&#x5728; GNU binutils &#x5305;&#x4E2D;&#xFF09;&#xFF0C;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x53EF;&#x8BFB;&#x7684;&#x6587;&#x672C;&#x683C;&#x5F0F;&#x7684; &#x201C;words&#x201D; &#x5217;&#x8868;&#x3002;
&#x7136;&#x540E;&#x8FD9;&#x4E2A; for &#x5FAA;&#x73AF;&#x4F9D;&#x6B21;&#x5904;&#x7406;&#x6BCF;&#x4E2A;&#x5355;&#x8BCD;&#xFF0C;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x8FD9;&#x4E2A;&#x5355;&#x8BCD;&#x662F;&#x5426;&#x4E3A;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#x627E;&#x5230;&#x7684;&#x6700;&#x957F;&#x7684;&#x4E00;&#x4E2A;&#x3002;&#x5F53;&#x5FAA;&#x73AF;&#x7ED3;&#x675F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x663E;&#x793A;&#x51FA;&#x6700;&#x957F;&#x7684;&#x5355;&#x8BCD;&#x3002;</p>
<p>If the optional in words portion of the for command is omitted, for defaults to pro-
cessing the positional parameters. We will modify our longest-word script to use this
method:</p>
<p>&#x5982;&#x679C;&#x7701;&#x7565;&#x6389; for &#x547D;&#x4EE4;&#x7684;&#x53EF;&#x9009;&#x9879; words &#x90E8;&#x5206;&#xFF0C;for &#x547D;&#x4EE4;&#x4F1A;&#x9ED8;&#x8BA4;&#x5904;&#x7406;&#x4F4D;&#x7F6E;&#x53C2;&#x6570;&#x3002;
&#x6211;&#x4EEC;&#x5C06;&#x4FEE;&#x6539; longest-word &#x811A;&#x672C;&#xFF0C;&#x6765;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;</p>
<pre><code>#!/bin/bash
# longest-word2 : find longest string in a file
for i; do
    if [[ -r $i ]]; then
        max_word=
        max_len=0
        for j in $(strings $i); do
            len=$(echo $j | wc -c)
            if (( len &gt; max_len )); then
                max_len=$len
                max_word=$j
            fi
        done
        echo &quot;$i: &apos;$max_word&apos; ($max_len characters)&quot;
    fi
done
</code></pre><p>As we can see, we have changed the outermost loop to use for in place of while. By
omitting the list of words in the for command, the positional parameters are used instead.
Inside the loop, previous instances of the variable i have been changed to the variable j.
The use of shift has also been eliminated.</p>
<p>&#x6B63;&#x5982;&#x6211;&#x4EEC;&#x6240;&#x770B;&#x5230;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x66F4;&#x6539;&#x4E86;&#x6700;&#x5916;&#x56F4;&#x7684;&#x5FAA;&#x73AF;&#xFF0C;&#x7528; for &#x5FAA;&#x73AF;&#x6765;&#x4EE3;&#x66FF; while &#x5FAA;&#x73AF;&#x3002;&#x901A;&#x8FC7;&#x7701;&#x7565; for &#x547D;&#x4EE4;&#x7684; words &#x5217;&#x8868;&#xFF0C;
&#x7528;&#x4F4D;&#x7F6E;&#x53C2;&#x6570;&#x66FF;&#x800C;&#x4EE3;&#x4E4B;&#x3002;&#x5728;&#x5FAA;&#x73AF;&#x4F53;&#x5185;&#xFF0C;&#x4E4B;&#x524D;&#x7684;&#x53D8;&#x91CF; i &#x5DF2;&#x7ECF;&#x6539;&#x4E3A;&#x53D8;&#x91CF; j&#x3002;&#x540C;&#x65F6; shift &#x547D;&#x4EE4;&#x4E5F;&#x88AB;&#x6DD8;&#x6C70;&#x6389;&#x4E86;&#x3002;</p>
<blockquote>
<p><em>Why i?</em></p>
<p><em>&#x4E3A;&#x4EC0;&#x4E48;&#x662F; i&#xFF1F;</em></p>
<p>You may have noticed that the variable i was chosen for each of the for loop
examples above. Why? No specific reason actually, besides tradition. The variable
used with for can be any valid variable, but i is the most common, followed by
j and k.</p>
<p>&#x4F60;&#x53EF;&#x80FD;&#x5DF2;&#x7ECF;&#x6CE8;&#x610F;&#x5230;&#x4E0A;&#x9762;&#x6240;&#x5217;&#x4E3E;&#x7684; for &#x5FAA;&#x73AF;&#x7684;&#x5B9E;&#x4F8B;&#x90FD;&#x9009;&#x62E9; i &#x4F5C;&#x4E3A;&#x53D8;&#x91CF;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F; &#x5B9E;&#x9645;&#x4E0A;&#x6CA1;&#x6709;&#x5177;&#x4F53;&#x539F;&#x56E0;&#xFF0C;&#x9664;&#x4E86;&#x4F20;&#x7EDF;&#x4E60;&#x60EF;&#x3002;
for &#x5FAA;&#x73AF;&#x4F7F;&#x7528;&#x7684;&#x53D8;&#x91CF;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x610F;&#x6709;&#x6548;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x4F46;&#x662F; i &#x662F;&#x6700;&#x5E38;&#x7528;&#x7684;&#x4E00;&#x4E2A;&#xFF0C;&#x5176;&#x6B21;&#x662F; j &#x548C; k&#x3002;</p>
<p>The basis of this tradition comes from the Fortran programming language. In For-
tran, undeclared variables starting with the letters I, J, K, L, and M are automati-
cally typed as integers, while variables beginning with any other letter are typed
as real (numbers with decimal fractions). This behavior led programmers to use
the variables I, J, and K for loop variables, since it was less work to use them
when a temporary variable (as loop variables often are) was needed.
It also led to the following Fortran-based witticism:</p>
<p>&#x201C;GOD is real, unless declared integer.&#x201D;</p>
<p>&#x8FD9;&#x4E00;&#x4F20;&#x7EDF;&#x7684;&#x57FA;&#x7840;&#x6E90;&#x4E8E; Fortran &#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x3002;&#x5728; Fortran &#x8BED;&#x8A00;&#x4E2D;&#xFF0C;&#x4EE5;&#x5B57;&#x6BCD; I&#xFF0C;J&#xFF0C;K&#xFF0C;L &#x548C; M &#x5F00;&#x5934;&#x7684;&#x672A;&#x58F0;&#x660E;&#x53D8;&#x91CF;&#x7684;&#x7C7B;&#x578B;
&#x81EA;&#x52A8;&#x8BBE;&#x4E3A;&#x6574;&#x5F62;&#xFF0C;&#x800C;&#x4EE5;&#x5176;&#x5B83;&#x5B57;&#x6BCD;&#x5F00;&#x5934;&#x7684;&#x53D8;&#x91CF;&#x5219;&#x4E3A;&#x5B9E;&#x6570;&#x7C7B;&#x578B;&#xFF08;&#x5E26;&#x6709;&#x5C0F;&#x6570;&#x7684;&#x6570;&#x5B57;&#xFF09;&#x3002;&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x5BFC;&#x81F4;&#x7A0B;&#x5E8F;&#x5458;&#x4F7F;&#x7528;&#x53D8;&#x91CF; I&#xFF0C;J&#xFF0C;&#x548C; K &#x4F5C;&#x4E3A;&#x5FAA;&#x73AF;&#x53D8;&#x91CF;&#xFF0C;
&#x56E0;&#x4E3A;&#x5F53;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x53D8;&#x91CF;&#xFF08;&#x6B63;&#x5982;&#x5FAA;&#x73AF;&#x53D8;&#x91CF;&#xFF09;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x5DE5;&#x4F5C;&#x91CF;&#x6BD4;&#x8F83;&#x5C11;&#x3002;&#x8FD9;&#x4E5F;&#x5F15;&#x51FA;&#x4E86;&#x5982;&#x4E0B;&#x57FA;&#x4E8E; fortran &#x7684;&#x4FCF;&#x76AE;&#x8BDD;&#xFF1A;</p>
<p>&#x201C;&#x795E;&#x662F;&#x5B9E;&#x6570;&#xFF0C;&#x9664;&#x975E;&#x662F;&#x58F0;&#x660E;&#x7684;&#x6574;&#x6570;&#x3002;&#x201D;</p>
</blockquote>
<h3 id="for-c-&#x8BED;&#x8A00;&#x683C;&#x5F0F;">for: C &#x8BED;&#x8A00;&#x683C;&#x5F0F;</h3>
<p>Recent versions of bash have added a second form of for command syntax, one that
resembles the form found in the C programming language. Many other languages support
this form, as well:</p>
<p>&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684; bash &#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;&#x7B2C;&#x4E8C;&#x79CD;&#x683C;&#x5F0F;&#x7684; for &#x547D;&#x4EE4;&#x8BED;&#x6CD5;&#xFF0C;&#x8BE5;&#x8BED;&#x6CD5;&#x76F8;&#x4F3C;&#x4E8E; C &#x8BED;&#x8A00;&#x4E2D;&#x7684; for &#x8BED;&#x6CD5;&#x683C;&#x5F0F;&#x3002;
&#x5176;&#x5B83;&#x8BB8;&#x591A;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x4E5F;&#x652F;&#x6301;&#x8FD9;&#x79CD;&#x683C;&#x5F0F;&#xFF1A;</p>
<pre><code>for (( expression1; expression2; expression3 )); do
    commands
done
</code></pre><p>where expression1, expression2, and expression3 are arithmetic expressions and com-
mands are the commands to be performed during each iteration of the loop.
In terms of behavior, this form is equivalent to the following construct:</p>
<p>&#x8FD9;&#x91CC;&#x7684; expression1&#xFF0C;expression2&#xFF0C;&#x548C; expression3 &#x90FD;&#x662F;&#x7B97;&#x672F;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;commands &#x662F;&#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x8FED;&#x4EE3;&#x65F6;&#x8981;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x3002;
&#x5728;&#x884C;&#x4E3A;&#x65B9;&#x9762;&#xFF0C;&#x8FD9;&#x76F8;&#x5F53;&#x4E8E;&#x4EE5;&#x4E0B;&#x6784;&#x9020;&#x5F62;&#x5F0F;&#xFF1A;</p>
<pre><code>(( expression1 ))
while (( expression2 )); do
    commands
    (( expression3 ))
done
</code></pre><p>expression1 is used to initialize conditions for the loop, expression2 is used to determine
when the loop is finished, and expression3 is carried out at the end of each iteration of the
loop.</p>
<p>expression1 &#x7528;&#x6765;&#x521D;&#x59CB;&#x5316;&#x5FAA;&#x73AF;&#x6761;&#x4EF6;&#xFF0C;expression2 &#x7528;&#x6765;&#x51B3;&#x5B9A;&#x5FAA;&#x73AF;&#x7ED3;&#x675F;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x8FD8;&#x6709;&#x5728;&#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x8FED;&#x4EE3;&#x7684;&#x672B;&#x5C3E;&#x4F1A;&#x6267;&#x884C; expression3&#x3002;</p>
<p>Here is a typical application:</p>
<p>&#x8FD9;&#x91CC;&#x662F;&#x4E00;&#x4E2A;&#x5178;&#x578B;&#x5E94;&#x7528;&#xFF1A;</p>
<pre><code>#!/bin/bash
# simple_counter : demo of C style for command
for (( i=0; i&lt;5; i=i+1 )); do
    echo $i
done
</code></pre><p>When executed, it produces the following output:</p>
<p>&#x811A;&#x672C;&#x6267;&#x884C;&#x4E4B;&#x540E;&#xFF0C;&#x4EA7;&#x751F;&#x5982;&#x4E0B;&#x8F93;&#x51FA;&#xFF1A;</p>
<pre><code>[me@linuxbox ~]$ simple_counter
0
1
2
3
4
</code></pre><p>In this example, expression1 initializes the variable i with the value of zero, expression2
allows the loop to continue as long as the value of i remains less than 5, and expression3
increments the value of i by one each time the loop repeats.</p>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;expression1 &#x521D;&#x59CB;&#x5316;&#x53D8;&#x91CF; i &#x7684;&#x503C;&#x4E3A;0&#xFF0C;expression2 &#x5141;&#x8BB8;&#x5FAA;&#x73AF;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x53EA;&#x8981;&#x53D8;&#x91CF; i &#x7684;&#x503C;&#x5C0F;&#x4E8E;5&#xFF0C;
&#x8FD8;&#x6709;&#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x8FED;&#x4EE3;&#x65F6;&#xFF0C;expression3 &#x4F1A;&#x628A;&#x53D8;&#x91CF; i &#x7684;&#x503C;&#x52A0;1&#x3002;</p>
<p>The C language form of for is useful anytime a numeric sequence is needed. We will see
several applications for this in the next two chapters.</p>
<p>C &#x8BED;&#x8A00;&#x683C;&#x5F0F;&#x7684; for &#x5FAA;&#x73AF;&#x5BF9;&#x4E8E;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x5E8F;&#x5217;&#x7684;&#x60C5;&#x51B5;&#x662F;&#x5F88;&#x6709;&#x7528;&#x5904;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x5728;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x4E24;&#x7AE0;&#x4E2D;&#x770B;&#x5230;&#x51E0;&#x4E2A;&#x8FD9;&#x6837;&#x7684;&#x5E94;&#x7528;&#x5B9E;&#x4F8B;&#x3002;</p>
<h3 id="&#x603B;&#x7ED3;">&#x603B;&#x7ED3;</h3>
<p>With our knowledge of the for command, we will now apply the final improvements to
our sys_info_page script. Currently, the report_home_space function looks
like this:</p>
<p>&#x5B66;&#x4E60;&#x4E86; for &#x547D;&#x4EE4;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5C06;&#x5BF9;&#x6211;&#x4EEC;&#x7684; sys_info_page &#x811A;&#x672C;&#x505A;&#x6700;&#x540E;&#x7684;&#x6539;&#x8FDB;&#x3002;
&#x76EE;&#x524D;&#xFF0C;&#x8FD9;&#x4E2A; report_home_space &#x51FD;&#x6570;&#x770B;&#x8D77;&#x6765;&#x50CF;&#x8FD9;&#x6837;&#xFF1A;</p>
<pre><code>report_home_space () {
    if [[ $(id -u) -eq 0 ]]; then
        cat &lt;&lt;- _EOF_
        &lt;H2&gt;Home Space Utilization (All Users)&lt;/H2&gt;
        &lt;PRE&gt;$(du -sh /home/*)&lt;/PRE&gt;
        _EOF_
    else
        cat &lt;&lt;- _EOF_
        &lt;H2&gt;Home Space Utilization ($USER)&lt;/H2&gt;
        &lt;PRE&gt;$(du -sh $HOME)&lt;/PRE&gt;
        _EOF_
    fi
    return
}
</code></pre><p>Next, we will rewrite it to provide more detail for each user&#x2019;s home directory, and include
the total number of files and subdirectories in each:</p>
<p>&#x4E0B;&#x4E00;&#x6B65;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x91CD;&#x5199;&#x5B83;&#xFF0C;&#x4EE5;&#x4FBF;&#x63D0;&#x4F9B;&#x6BCF;&#x4E2A;&#x7528;&#x6237;&#x5BB6;&#x76EE;&#x5F55;&#x7684;&#x66F4;&#x8BE6;&#x5C3D;&#x4FE1;&#x606F;&#xFF0C;&#x5E76;&#x4E14;&#x5305;&#x542B;&#x7528;&#x6237;&#x5BB6;&#x76EE;&#x5F55;&#x4E2D;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x7684;&#x603B;&#x4E2A;&#x6570;&#xFF1A;</p>
<pre><code>report_home_space () {
    local format=&quot;%8s%10s%10s\n&quot;
    local i dir_list total_files total_dirs total_size user_name
    if [[ $(id -u) -eq 0 ]]; then
        dir_list=/home/*
        user_name=&quot;All Users&quot;
    else
        dir_list=$HOME
        user_name=$USER
    fi
    echo &quot;&lt;H2&gt;Home Space Utilization ($user_name)&lt;/H2&gt;&quot;
    for i in $dir_list; do
        total_files=$(find $i -type f | wc -l)
        total_dirs=$(find $i -type d | wc -l)
        total_size=$(du -sh $i | cut -f 1)
        echo &quot;&lt;H3&gt;$i&lt;/H3&gt;&quot;
        echo &quot;&lt;PRE&gt;&quot;
        printf &quot;$format&quot; &quot;Dirs&quot; &quot;Files&quot; &quot;Size&quot;
        printf &quot;$format&quot; &quot;----&quot; &quot;-----&quot; &quot;----&quot;
        printf &quot;$format&quot; $total_dirs $total_files $total_size
        echo &quot;&lt;/PRE&gt;&quot;
    done
    return
}
</code></pre><p>This rewrite applies much of what we have learned so far. We still test for the superuser,
but instead of performing the complete set of actions as part of the if, we set some vari-
ables used later in a for loop. We have added several local variables to the function and
made use of printf to format some of the output.</p>
<p>&#x8FD9;&#x6B21;&#x91CD;&#x5199;&#x5E94;&#x7528;&#x4E86;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#x6211;&#x4EEC;&#x5B66;&#x8FC7;&#x7684;&#x8BB8;&#x591A;&#x77E5;&#x8BC6;&#x3002;&#x6211;&#x4EEC;&#x4ECD;&#x7136;&#x6D4B;&#x8BD5;&#x8D85;&#x7EA7;&#x7528;&#x6237;&#xFF08;superuser&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5728; if &#x8BED;&#x53E5;&#x5757;&#x5185;
&#x8BBE;&#x7F6E;&#x4E86;&#x4E00;&#x4E9B;&#x968F;&#x540E;&#x4F1A;&#x5728; for &#x5FAA;&#x73AF;&#x4E2D;&#x7528;&#x5230;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x6765;&#x53D6;&#x4EE3;&#x5728; if &#x8BED;&#x53E5;&#x5757;&#x5185;&#x6267;&#x884C;&#x5B8C;&#x5907;&#x7684;&#x52A8;&#x4F5C;&#x96C6;&#x5408;&#x3002;&#x6211;&#x4EEC;&#x7ED9;
&#x51FD;&#x6570;&#x6DFB;&#x52A0;&#x4E86;&#x51E0;&#x4E2A;&#x672C;&#x5730;&#x53D8;&#x91CF;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528; printf &#x6765;&#x683C;&#x5F0F;&#x5316;&#x8F93;&#x51FA;&#x3002;</p>
<h3 id="&#x62D3;&#x5C55;&#x9605;&#x8BFB;">&#x62D3;&#x5C55;&#x9605;&#x8BFB;</h3>
<ul>
<li><p>The Advanced Bash-Scripting Guide has a chapter on loops, with a variety of examples using for:</p>
</li>
<li><p>&#x300A;&#x9AD8;&#x7EA7; Bash &#x811A;&#x672C;&#x6307;&#x5357;&#x300B;&#x6709;&#x4E00;&#x7AE0;&#x5173;&#x4E8E;&#x5FAA;&#x73AF;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5176;&#x4E2D;&#x5217;&#x4E3E;&#x4E86;&#x5404;&#x79CD;&#x5404;&#x6837;&#x7684; for &#x5FAA;&#x73AF;&#x5B9E;&#x4F8B;&#xFF1A;</p>
<p>  <a href="http://tldp.org/LDP/abs/html/loops1.html" target="_blank">http://tldp.org/LDP/abs/html/loops1.html</a></p>
</li>
<li><p>The Bash Reference Manual describes the looping compound commands, including for:</p>
</li>
<li><p>&#x300A;Bash &#x53C2;&#x8003;&#x624B;&#x518C;&#x300B;&#x63CF;&#x8FF0;&#x4E86;&#x5FAA;&#x73AF;&#x590D;&#x5408;&#x547D;&#x4EE4;&#xFF0C;&#x5305;&#x62EC;&#x4E86; for &#x5FAA;&#x73AF;&#xFF1A;</p>
<p>  <a href="http://www.gnu.org/software/bash/manual/bashref.html#Looping-Constructs" target="_blank">http://www.gnu.org/software/bash/manual/bashref.html#Looping-Constructs</a></p>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="chap33.html" class="navigation navigation-prev " aria-label="Previous page: 33. 位置参数">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="chap35.html" class="navigation navigation-next " aria-label="Next page: 35. 字符串和数字">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"layout":"book","title":"34. 流程控制：for 循环","level":"1.1.34","depth":2,"next":{"title":"35. 字符串和数字","level":"1.1.35","depth":2,"path":"chap35.md","ref":"chap35.md","articles":[]},"previous":{"title":"33. 位置参数","level":"1.1.33","depth":2,"path":"chap33.md","ref":"chap33.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"chap34.md","mtime":"2017-01-12T13:05:37.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-01-12T13:06:00.166Z"},"basePath":".","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

